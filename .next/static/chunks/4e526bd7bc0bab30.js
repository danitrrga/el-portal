(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21218,e=>{"use strict";let t=(0,e.i(75254).default)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);e.s(["Activity",()=>t],21218)},71841,21345,98997,e=>{"use strict";var t=e.i(18050),a=e.i(71645),r=e.i(73986),i=e.i(65286),s=e.i(37727),l=e.i(75254);let d=(0,l.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>d],21345);var o=e.i(55436),n=e.i(43531);e.s(["GoalFormModal",0,({isOpen:e,onClose:l,onSave:c,initialGoal:p,currentCycleHabits:h,allHabits:x})=>{let[g,b]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[f,k]=(0,a.useState)(r.GoalType.TASK_PROJECT),[j,v]=(0,a.useState)(""),[y,N]=(0,a.useState)(null),[w,C]=(0,a.useState)("current"),[S,T]=(0,a.useState)("");if((0,a.useEffect)(()=>{if(p){if(b(p.title),u(p.description),k(p.type),p.subtasks?v(p.subtasks.map(e=>{let t="  ".repeat(e.level||0);return`${t}${e.name}`}).join("\n")):v(""),p.linked_habit_id){let e=x.find(e=>e.id===p.linked_habit_id);e&&N(e)}}else b(""),u(""),k(r.GoalType.TASK_PROJECT),v(""),N(null)},[p,e]),!e)return null;let z=Array.from(new Map(x.map(e=>[e.name,e])).values()),M=("current"===w?h:z).filter(e=>e.name.toLowerCase().includes(S.toLowerCase()));return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:l,children:(0,t.jsxs)("div",{className:"w-full max-w-xl rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 border-b border-graphite-200 dark:border-graphite-800 flex justify-between items-center",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)(i.CheckCircle2,{size:20,className:"text-pacific-500"}),p?"Edit Goal":"Add New Goal"]}),(0,t.jsx)("button",{onClick:l,className:"text-graphite-400 hover:text-white",children:(0,t.jsx)(s.X,{size:20})})]}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Goal Title"}),(0,t.jsx)("input",{value:g,onChange:e=>b(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white",placeholder:"e.g. Launch Marketing Campaign",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Description"}),(0,t.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),rows:2,className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white resize-none",placeholder:"What is the objective?"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-2",children:"Goal Type"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-1 bg-graphite-100 dark:bg-graphite-800 rounded-xl",children:[(0,t.jsx)("button",{onClick:()=>k(r.GoalType.TASK_PROJECT),className:`py-2 rounded-lg text-sm font-bold transition-all ${f===r.GoalType.TASK_PROJECT?"bg-white dark:bg-graphite-700 text-pacific-600 dark:text-white shadow-sm":"text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300"}`,children:"Project (Tasks)"}),(0,t.jsx)("button",{onClick:()=>k(r.GoalType.CONSISTENCY_METRIC),className:`py-2 rounded-lg text-sm font-bold transition-all ${f===r.GoalType.CONSISTENCY_METRIC?"bg-white dark:bg-graphite-700 text-pacific-600 dark:text-white shadow-sm":"text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300"}`,children:"Habit Metric"})]})]}),f===r.GoalType.TASK_PROJECT?(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-2",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Action Plan (Subtasks)"}),(0,t.jsx)("textarea",{value:j,onChange:e=>v(e.target.value),onKeyDown:e=>{if("Tab"===e.key){e.preventDefault();let t=e.currentTarget.selectionStart,a=e.currentTarget.selectionEnd,r=e.currentTarget.value;v(r.substring(0,t)+"  "+r.substring(a)),requestAnimationFrame(()=>{e.currentTarget&&(e.currentTarget.selectionStart=e.currentTarget.selectionEnd=t+2)})}},rows:6,className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white leading-relaxed",placeholder:"- Research competitors - Analyze pricing (Indented with Tab) - Draft copy"}),(0,t.jsx)("p",{className:"text-[10px] text-graphite-400 mt-1 text-right",children:"Use Tab to indent sub-tasks"})]}):(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-2 p-4 border border-graphite-200 dark:border-graphite-700 rounded-xl bg-graphite-50 dark:bg-graphite-800/50",children:[(0,t.jsxs)("label",{className:"block text-xs font-bold text-pacific-500 uppercase mb-3 flex items-center gap-2",children:[(0,t.jsx)(d,{size:14})," Link Habit Source"]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-3 border-b border-graphite-200 dark:border-graphite-700",children:[(0,t.jsx)("button",{onClick:()=>C("current"),className:`pb-2 text-xs font-bold uppercase transition-colors border-b-2 ${"current"===w?"border-pacific-500 text-pacific-600 dark:text-pacific-400":"border-transparent text-graphite-400"}`,children:"Current Cycle"}),(0,t.jsx)("button",{onClick:()=>C("database"),className:`pb-2 text-xs font-bold uppercase transition-colors border-b-2 ${"database"===w?"border-pacific-500 text-pacific-600 dark:text-pacific-400":"border-transparent text-graphite-400"}`,children:"Database Search"})]}),"database"===w&&(0,t.jsxs)("div",{className:"relative mb-3",children:[(0,t.jsx)(o.Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400"}),(0,t.jsx)("input",{value:S,onChange:e=>T(e.target.value),className:"w-full bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-700 rounded-lg pl-9 pr-3 py-2 text-sm focus:outline-none focus:border-pacific-500",placeholder:"Search habit history..."})]}),(0,t.jsxs)("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:[M.map(e=>(0,t.jsxs)("button",{onClick:()=>N(e),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all flex justify-between items-center ${y?.name===e.name?"bg-pacific-500 text-white shadow-md":"hover:bg-graphite-200 dark:hover:bg-graphite-700 text-graphite-700 dark:text-graphite-300"}`,children:[(0,t.jsx)("span",{className:"font-medium truncate",children:e.name}),y?.name===e.name&&(0,t.jsx)(n.Check,{size:14})]},e.id)),0===M.length&&(0,t.jsx)("div",{className:"text-center py-4 text-xs text-graphite-400 italic",children:"No habits found."})]}),y&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-graphite-200 dark:border-graphite-700 flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-xs text-graphite-500",children:["Selected: ",(0,t.jsx)("span",{className:"font-bold text-graphite-900 dark:text-white",children:y.name})]}),(0,t.jsx)("button",{onClick:()=>N(null),className:"text-xs text-red-400 hover:text-red-500",children:"Clear"})]})]})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:l,className:"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-800 dark:hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(!g.trim())return;let e=f===r.GoalType.TASK_PROJECT?j.split("\n").filter(e=>e.trim().length>0):void 0;c({title:g,description:m,type:f,subtasks:e},y)},disabled:!g.trim()||f===r.GoalType.CONSISTENCY_METRIC&&!y,className:"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pacific-500 transition-colors",children:p?"Save Changes":"Create Goal"})]})]})})}],71841);let c=(0,l.default)("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);e.s(["Fingerprint",()=>c],98997)},14784,89703,e=>{"use strict";var t=e.i(18050),a=e.i(71645),r=e.i(73986),i=e.i(8442),s=e.i(83627),l=e.i(55711),d=e.i(98997),o=e.i(21218),n=e.i(7233),c=e.i(27612),p=e.i(65286),h=e.i(70956),x=e.i(37727),g=e.i(56909),b=e.i(20278),m=e.i(59607),u=e.i(87316),f=e.i(75254);let k=(0,f.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),j=(0,f.default)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),v=(0,f.default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var y=e.i(71841),N=e.i(7866),w=e.i(55436);let C=(0,f.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),S=(0,f.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var T=e.i(39616);let z=(0,f.default)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),M=(0,f.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var E=e.i(43531);let A=({isOpen:e,onClose:i,onSave:s,initialHabit:l,allHabits:d=[],onDeleteFromLibrary:o,onRenameCategory:n,onDeleteCategory:h})=>{let[b,m]=(0,a.useState)("create"),[u,f]=(0,a.useState)(!1),[k,j]=(0,a.useState)(""),[y,A]=(0,a.useState)(""),[_,D]=(0,a.useState)(r.HabitWeight.MEDIUM),[H,$]=(0,a.useState)(""),[P,F]=(0,a.useState)(null),[G,L]=(0,a.useState)(null),[O,I]=(0,a.useState)(""),[R,K]=(0,a.useState)(null);(0,a.useEffect)(()=>{l?(j(l.name),A(l.category),D(l.weight),m("create")):e&&!l&&"create"===b&&""===k&&(j(""),A(""),D(r.HabitWeight.MEDIUM)),f(!1)},[l,e]);let W=(0,a.useMemo)(()=>Array.from(new Set(d.map(e=>e.category).filter(Boolean))).sort(),[d]),U=(0,a.useMemo)(()=>{let e=new Map;return d.forEach(t=>{e.has(t.name)||e.set(t.name,t)}),Array.from(e.values()).filter(e=>e.name.toLowerCase().includes(H.toLowerCase())||e.category.toLowerCase().includes(H.toLowerCase()))},[d,H]);if(!e)return null;let q=async()=>{G&&O.trim()&&O!==G&&n&&(await n(G,O.trim()),y===G&&A(O.trim())),L(null),I("")},B=async e=>{R===e?(h&&(await h(e),y===e&&A("")),K(null)):(K(e),setTimeout(()=>K(null),3e3))};return(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:i,children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex-none border-b border-graphite-200 dark:border-graphite-800",children:[(0,t.jsxs)("div",{className:"p-6 pb-4 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Settings,{size:18,className:"text-graphite-500"})," Manage Categories"]}):"create"===b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.CheckCircle2,{size:18,className:"text-pacific-500"})," ",l?"Edit Habit":"Add Habit"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Library,{size:18,className:"text-bali-500"})," Habit Library"]})}),(0,t.jsx)("button",{onClick:i,className:"text-graphite-400 hover:text-white",children:(0,t.jsx)(x.X,{size:18})})]}),!l&&!u&&(0,t.jsxs)("div",{className:"px-6 flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>m("create"),className:`pb-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${"create"===b?"border-pacific-500 text-pacific-600 dark:text-pacific-400":"border-transparent text-graphite-400 hover:text-graphite-600 dark:hover:text-graphite-300"}`,children:"Create New"}),(0,t.jsx)("button",{onClick:()=>m("library"),className:`pb-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${"library"===b?"border-bali-500 text-bali-600 dark:text-bali-400":"border-transparent text-graphite-400 hover:text-graphite-600 dark:hover:text-graphite-300"}`,children:"From History"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:u?(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("button",{onClick:()=>f(!1),className:"text-xs font-bold text-graphite-500 hover:text-pacific-500 flex items-center gap-1",children:[(0,t.jsx)(M,{size:12})," Back to Form"]}),(0,t.jsxs)("span",{className:"text-[10px] uppercase text-graphite-400 font-bold",children:[W.length," Categories"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[W.map(e=>(0,t.jsx)("div",{className:"group flex items-center justify-between p-3 rounded-xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-800/50 hover:border-pacific-200 dark:hover:border-pacific-900 transition-all",children:G===e?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)("input",{value:O,onChange:e=>I(e.target.value),className:"flex-1 bg-graphite-50 dark:bg-graphite-900 border border-pacific-500 rounded-lg px-2 py-1 text-sm text-graphite-900 dark:text-white outline-none",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&q()}),(0,t.jsx)("button",{onClick:q,className:"p-1.5 bg-pacific-500 text-white rounded-lg",children:(0,t.jsx)(E.Check,{size:14})}),(0,t.jsx)("button",{onClick:()=>L(null),className:"p-1.5 text-graphite-400 hover:text-white",children:(0,t.jsx)(x.X,{size:14})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-graphite-700 dark:text-graphite-300",children:e}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>{L(e),I(e)},className:"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg",children:(0,t.jsx)(z,{size:14})}),"Uncategorized"!==e&&(0,t.jsxs)("button",{onClick:()=>B(e),className:`p-2 rounded-lg flex items-center gap-2 transition-all ${R===e?"bg-red-500 text-white w-24 justify-center":"text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[(0,t.jsx)(c.Trash2,{size:14})," ",R===e&&(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Confirm"})]})]})]})},e)),0===W.length&&(0,t.jsx)("div",{className:"text-center py-8 text-graphite-400 text-sm",children:"No categories defined yet."})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/30 flex gap-3 items-start",children:[(0,t.jsx)(v,{size:16,className:"text-blue-500 mt-0.5 shrink-0"}),(0,t.jsxs)("div",{className:"text-xs text-blue-700 dark:text-blue-300 leading-relaxed",children:[(0,t.jsx)("strong",{children:"Note:"}),' Renaming updates all habits history. Deleting moves associated habits to "Uncategorized".']})]})]}):"create"===b?(0,t.jsxs)("div",{className:"space-y-5 animate-in fade-in slide-in-from-left-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Habit Name"}),(0,t.jsx)("input",{value:k,onChange:e=>j(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white transition-all",placeholder:"e.g. Morning Run",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1.5",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase",children:"Category"}),(0,t.jsxs)("button",{onClick:()=>f(!0),className:"text-[10px] font-bold text-pacific-500 hover:text-pacific-600 flex items-center gap-1",children:[(0,t.jsx)(T.Settings,{size:10})," Manage"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(C,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400"}),(0,t.jsx)("input",{value:y,onChange:e=>A(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl pl-9 pr-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white transition-all",placeholder:"e.g. Health"})]}),W.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:W.slice(0,8).map(e=>(0,t.jsx)("button",{onClick:()=>A(e===y?"":e),className:`px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wide border transition-all ${y===e?"bg-pacific-500 text-white border-pacific-500":"bg-graphite-100 dark:bg-graphite-800 text-graphite-500 border-transparent hover:bg-pacific-50 dark:hover:bg-pacific-900/20 hover:text-pacific-600 dark:hover:text-pacific-400"}`,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Impact Weight"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[r.HabitWeight.LOW,r.HabitWeight.MEDIUM,r.HabitWeight.HIGH].map(e=>(0,t.jsx)("button",{onClick:()=>D(e),className:`py-2.5 text-xs font-bold rounded-xl border transition-all ${_===e?"bg-pacific-500 text-white border-pacific-500 shadow-md shadow-pacific-500/20":"bg-graphite-50 dark:bg-graphite-800 text-graphite-500 border-graphite-200 dark:border-graphite-700 hover:border-graphite-400"}`,children:e===r.HabitWeight.LOW?"Low (1)":e===r.HabitWeight.MEDIUM?"Medium (2)":"High (4)"},e))})]})]}):(0,t.jsxs)("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4",children:[(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)(w.Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400"}),(0,t.jsx)("input",{value:H,onChange:e=>$(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl pl-9 pr-4 py-2 text-sm focus:outline-none focus:border-bali-500 text-graphite-900 dark:text-white",placeholder:"Search history...",autoFocus:!0})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:U.length>0?U.map(e=>(0,t.jsxs)("div",{onClick:()=>{j(e.name),A(e.category),D(e.weight),m("create")},className:"group flex items-center justify-between p-3 rounded-xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-800/50 hover:border-bali-500 dark:hover:border-bali-500 cursor-pointer transition-all",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold text-graphite-900 dark:text-white group-hover:text-bali-600 dark:group-hover:text-bali-400 transition-colors",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium bg-graphite-100 dark:bg-graphite-900 text-graphite-500 px-2 py-0.5 rounded",children:e.category}),(0,t.jsx)("div",{className:"flex gap-0.5",children:[...Array(e.weight)].map((e,a)=>(0,t.jsx)("div",{className:"h-1 w-1 rounded-full bg-bali-400"},a))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:t=>{var a;return a=e.id,void(t.stopPropagation(),P===a?(o&&o(a),F(null)):(F(a),setTimeout(()=>F(null),3e3)))},className:`p-2 rounded-lg transition-all ${P===e.id?"bg-red-500 text-white":"text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 opacity-0 group-hover:opacity-100"}`,children:(0,t.jsx)(c.Trash2,{size:14})}),(0,t.jsx)(S,{size:16,className:"text-graphite-300 group-hover:text-bali-500 -translate-x-2 group-hover:translate-x-0 transition-all opacity-0 group-hover:opacity-100"})]})]},e.id)):(0,t.jsx)("div",{className:"text-center py-12 text-graphite-400 text-sm",children:"No matching habits found in history."})})]})}),(0,t.jsx)("div",{className:"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3 bg-white dark:bg-graphite-900 rounded-b-2xl",children:u?(0,t.jsx)("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-graphite-100 dark:bg-graphite-800 text-graphite-900 dark:text-white rounded-xl text-sm font-bold hover:bg-graphite-200 dark:hover:bg-graphite-700 transition-colors",children:"Done"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:i,className:"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-800 dark:hover:text-white transition-colors",children:"Cancel"}),"create"===b&&(0,t.jsxs)("button",{onClick:()=>{k.trim()&&y.trim()&&s({name:k,category:y,weight:_})},disabled:!k.trim(),className:"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pacific-500 transition-colors flex items-center gap-2",children:[(0,t.jsx)(g.Save,{size:14})," Save"]})]})})]})})};e.s(["HabitFormModal",0,A],89703);let _=(e,t)=>{if(!e)return"";let a=e.split("-").map(Number),r=new Date(a[0],a[1]-1,a[2]);r.setDate(r.getDate()+t);let i=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return`${i}-${s}-${l}`};e.s(["CycleEditorModal",0,({mode:e="edit",cycle:f,goals:N,habits:w,allHabits:C,suggestedSprintNumber:S,onClose:T,onSaveCycle:z,onManageGoal:M,onManageHabit:E,onCreate:D,onRenameCategory:H,onDeleteCategory:$,onDeleteHabitFromDB:P,maxCycles:F=6,versionStartDate:G,existingCycles:L})=>{let[O,I]=(0,a.useState)("strategy"),[R,K]=(0,a.useState)(S||1),[W,U]=(0,a.useState)(new Date().toISOString().split("T")[0]),[q,B]=(0,a.useState)(new Date(Date.now()+12096e5).toISOString().split("T")[0]),[J,X]=(0,a.useState)(!0),[Y,V]=(0,a.useState)(15),[Z,Q]=(0,a.useState)(["","",""]),[ee,et]=(0,a.useState)(""),[ea,er]=(0,a.useState)(""),[ei,es]=(0,a.useState)([]),[el,ed]=(0,a.useState)([]),[eo,en]=(0,a.useState)([]),[ec,ep]=(0,a.useState)([]),[eh,ex]=(0,a.useState)([]),[eg,eb]=(0,a.useState)([]),[em,eu]=(0,a.useState)([]),[ef,ek]=(0,a.useState)(""),[ej,ev]=(0,a.useState)(""),[ey,eN]=(0,a.useState)(""),[ew,eC]=(0,a.useState)(""),[eS,eT]=(0,a.useState)(null),[ez,eM]=(0,a.useState)(void 0),[eE,eA]=(0,a.useState)(!1),[e_,eD]=(0,a.useState)(void 0),[eH,e$]=(0,a.useState)(!1),[eP,eF]=(0,a.useState)(null);(0,a.useEffect)(()=>{i.supabaseService.getMantras().then(eu),"edit"===e&&f&&(Q(f.focus_priorities),et(f.problems),er(f.learning_focus),es(f.cch_list.find(e=>"Beliefs"===e.category)?.items||[]),ed(f.cch_list.find(e=>"Characteristics"===e.category)?.items||[]),en(f.cch_list.find(e=>"Skills"===e.category)?.items||[]),ep(f.mantras),K(f.sprint_number),U(f.start_date),B(f.end_date))},[e,f]),(0,a.useEffect)(()=>{(async()=>{let t=await i.supabaseService.getSystemSettings(),a=Math.floor(t.days/t.cycles);if(V(a),"create"===e&&G){let e=G;L&&L.length>0&&(e=_([...L].sort((e,t)=>new Date(t.end_date).getTime()-new Date(e.end_date).getTime())[0].end_date,1)),U(e),B(_(e,a-1))}})()},[e,G,L]),(0,a.useEffect)(()=>{"edit"===e&&(ex(N),eb(w))},[N,w,e]);let eG=async()=>{ew.trim()&&(await i.supabaseService.addMantra(ew),eu(e=>[...e,ew]),ep(e=>[...e,ew]),eC(""))},eL=async e=>{P?await P(e):E?E("delete",{id:e}):console.warn("Delete from library not fully supported in create mode without parent handler")},eO=(t,a)=>{if(eP!==t){eF(t),setTimeout(()=>eF(null),3e3);return}"create"===e?"goal"===a?ex(e=>e.filter(e=>e.id!==t)):eb(e=>e.filter(e=>e.id!==t)):("goal"===a&&M&&M("delete",{id:t}),"habit"===a&&E&&E("delete",{id:t})),eF(null)};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:T,children:(0,t.jsxs)("div",{className:"w-full max-w-4xl rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 border-b border-graphite-200 dark:border-graphite-800 flex justify-between items-center bg-graphite-50 dark:bg-graphite-950/50 rounded-t-2xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:["create"===e?(0,t.jsx)(k,{size:20,className:"text-pacific-500"}):(0,t.jsx)(s.Edit3,{size:20,className:"text-pacific-500"}),"create"===e?"Initialize New Cycle":"Cycle Editor"]}),(0,t.jsx)("div",{className:"text-xs text-graphite-500 mt-1 uppercase tracking-wider",children:"create"===e?"System Configuration":`Cycle ${f?.sprint_number} Configuration`})]}),(0,t.jsx)("div",{className:"flex bg-white dark:bg-graphite-800 p-1 rounded-xl border border-graphite-200 dark:border-graphite-700",children:[{id:"strategy",icon:(0,t.jsx)(b.Target,{size:14})},{id:"identity",icon:(0,t.jsx)(d.Fingerprint,{size:14})},{id:"mantras",icon:(0,t.jsx)(l.Brain,{size:14})},{id:"goals",icon:(0,t.jsx)(p.CheckCircle2,{size:14})},{id:"habits",icon:(0,t.jsx)(h.List,{size:14})}].map(e=>(0,t.jsxs)("button",{onClick:()=>I(e.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all ${O===e.id?"bg-pacific-500 text-white shadow-md":"text-graphite-500 hover:text-graphite-900 dark:hover:text-graphite-white hover:bg-graphite-50 dark:hover:bg-graphite-700"}`,children:[e.icon," ",e.id]},e.id))}),(0,t.jsx)("button",{onClick:T,type:"button",className:"text-graphite-400 hover:text-white transition-colors",children:(0,t.jsx)(x.X,{size:24})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 bg-graphite-50/50 dark:bg-graphite-900/50",children:["strategy"===O&&(0,t.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2",children:["create"===e&&(0,t.jsxs)("div",{className:"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-pacific-500 text-xs font-bold uppercase tracking-widest",children:[(0,t.jsx)(u.Calendar,{size:14})," Temporal Config"]}),(0,t.jsx)("div",{className:"text-[10px] font-bold text-pacific-600 dark:text-pacific-400 bg-pacific-50 dark:bg-pacific-900/20 px-2 py-1 rounded",children:"AUTO-SUGGESTED"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:W,onChange:e=>{let t=e.target.value;U(t),t&&Y>0&&B(_(t,Y-1))},className:"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:q,onChange:e=>B(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:["Cycle Number (1-",F,")"]}),(0,t.jsx)("input",{type:"number",min:"1",max:F,value:R,onChange:e=>{let t=Number(e.target.value);K(t),t>F?eT(`Maximum ${F} cycles allowed per version.`):eT(null)},className:`w-full bg-graphite-50 dark:bg-graphite-950 border rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500 ${eS?"border-red-500 ring-1 ring-red-500/20":"border-graphite-200 dark:border-graphite-700"}`}),eS&&(0,t.jsxs)("p",{className:"text-red-500 text-[10px] mt-1 font-bold flex items-center gap-1",children:[(0,t.jsx)(v,{size:10})," ",eS]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("button",{onClick:()=>X(!J),className:`w-full py-2.5 rounded-xl border flex items-center justify-center gap-2 text-sm font-bold transition-all ${J?"bg-pacific-500/10 border-pacific-500/50 text-pacific-600 dark:text-pacific-400":"bg-graphite-50 dark:bg-graphite-950 border-graphite-200 dark:border-graphite-700 text-graphite-500"}`,children:[(0,t.jsx)(j,{size:16})," ",J?"Status: Active":"Status: Inactive"]})})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-4",children:"Focus Priorities"}),(0,t.jsx)("div",{className:"space-y-3",children:Z.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-graphite-100 dark:bg-graphite-800 font-bold text-graphite-500 border border-graphite-200 dark:border-graphite-700",children:a+1}),(0,t.jsx)("input",{value:e,onChange:e=>{let t=[...Z];t[a]=e.target.value,Q(t)},className:"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 text-sm focus:outline-none focus:border-pacific-500 transition-colors",placeholder:`Priority ${a+1}`})]},a))})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-2",children:"Current Friction/Problems"}),(0,t.jsx)("textarea",{value:ee,onChange:e=>et(e.target.value),rows:3,className:"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl p-4 text-sm focus:outline-none focus:border-pacific-500 resize-none transition-colors",placeholder:"What is slowing you down?"})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-2",children:"Learning Focus"}),(0,t.jsx)("input",{value:ea,onChange:e=>er(e.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl p-4 text-sm focus:outline-none focus:border-pacific-500 transition-colors",placeholder:"One major skill to master..."})]})]}),"identity"===O&&(0,t.jsx)("div",{className:"space-y-8 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2",children:[{title:"Core Beliefs",items:ei,add:()=>{ef.trim()&&(es([...ei,ef.trim()]),ek(""))},val:ef,set:ek,icon:(0,t.jsx)(l.Brain,{size:18})},{title:"Characteristics",items:el,add:()=>{ej.trim()&&(ed([...el,ej.trim()]),ev(""))},val:ej,set:ev,icon:(0,t.jsx)(d.Fingerprint,{size:18})},{title:"Skills Acquisition",items:eo,add:()=>{ey.trim()&&(en([...eo,ey.trim()]),eN(""))},val:ey,set:eN,icon:(0,t.jsx)(o.Activity,{size:18})}].map((e,a)=>(0,t.jsxs)("div",{className:"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-graphite-900 dark:text-white flex items-center gap-2 mb-4",children:[e.icon," ",e.title]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.items.map((a,r)=>(0,t.jsxs)("span",{className:"bg-graphite-100 dark:bg-graphite-800 px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-2 border border-graphite-200 dark:border-graphite-700",children:[a,(0,t.jsx)("button",{onClick:()=>{"Core Beliefs"===e.title?es(ei.filter((e,t)=>t!==r)):"Characteristics"===e.title?ed(el.filter((e,t)=>t!==r)):en(eo.filter((e,t)=>t!==r))},className:"text-graphite-400 hover:text-red-500",children:(0,t.jsx)(x.X,{size:12})})]},r))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:e.val,onChange:t=>e.set(t.target.value),onKeyDown:t=>"Enter"===t.key&&e.add(),className:"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 transition-colors",placeholder:`Add ${e.title}...`}),(0,t.jsx)("button",{onClick:e.add,className:"p-2 bg-pacific-500 text-white rounded-xl hover:bg-pacific-600 transition-colors",children:(0,t.jsx)(n.Plus,{size:20})})]})]},a))}),"mantras"===O&&(0,t.jsxs)("div",{className:"space-y-4 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2 bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-3",children:"Select Active Mantras"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[400px] overflow-y-auto pr-2",children:em.map((e,a)=>(0,t.jsxs)("div",{onClick:()=>ep(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),className:`p-3 rounded-xl border cursor-pointer transition-all flex items-center justify-between ${ec.includes(e)?"bg-pacific-50 border-pacific-500 text-pacific-700 dark:bg-pacific-900/20 dark:text-pacific-300":"bg-graphite-50 dark:bg-graphite-950 border-transparent text-graphite-600 dark:text-graphite-400 hover:bg-graphite-100 dark:hover:bg-graphite-800"}`,children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e}),ec.includes(e)&&(0,t.jsx)(p.CheckCircle2,{size:16})]},a))})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-graphite-200 dark:border-graphite-800",children:[(0,t.jsx)("input",{value:ew,onChange:e=>eC(e.target.value),className:"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 transition-colors",placeholder:"New Mantra..."}),(0,t.jsx)("button",{onClick:eG,className:"px-4 bg-graphite-900 dark:bg-white text-white dark:text-graphite-900 rounded-xl font-bold text-xs uppercase tracking-wider",children:"ADD"})]})]}),"goals"===O&&(0,t.jsxs)("div",{className:"max-w-3xl mx-auto animate-in fade-in slide-in-from-right-2 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-graphite-500 uppercase tracking-widest",children:"Active Goals"}),(0,t.jsxs)("button",{onClick:()=>{eM(void 0),eA(!0)},className:"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white rounded-xl text-xs font-bold hover:bg-pacific-500 shadow-lg shadow-pacific-500/30 transition-colors",children:[(0,t.jsx)(n.Plus,{size:16})," Add Goal"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[eh.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-2xl flex justify-between items-center group hover:border-pacific-500/30 transition-all shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:[e.title,(0,t.jsx)("span",{className:`text-[10px] uppercase px-2 py-0.5 rounded border ${e.type===r.GoalType.TASK_PROJECT?"border-purple-200 text-purple-600 dark:border-purple-900 dark:text-purple-400":"border-bali-200 text-bali-600 dark:border-bali-900 dark:text-bali-400"}`,children:e.type===r.GoalType.TASK_PROJECT?"Project":"Metric"})]}),(0,t.jsx)("div",{className:"text-xs text-graphite-500 mt-1 line-clamp-1",children:e.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>{eM(e),eA(!0)},className:"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors",children:(0,t.jsx)(s.Edit3,{size:16})}),(0,t.jsxs)("button",{onClick:()=>eO(e.id,"goal"),className:`p-2 rounded-lg transition-all flex items-center gap-2 ${eP===e.id?"bg-red-500 text-white w-24 justify-center":"text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[(0,t.jsx)(c.Trash2,{size:16})," ",eP===e.id&&(0,t.jsx)("span",{className:"text-xs font-bold",children:"Confirm"})]})]})]},e.id)),0===eh.length&&(0,t.jsx)("div",{className:"text-center py-12 text-graphite-400 italic bg-graphite-50 dark:bg-graphite-950 rounded-2xl border border-dashed border-graphite-200 dark:border-graphite-800",children:"No goals defined."})]})]}),"habits"===O&&(0,t.jsxs)("div",{className:"max-w-3xl mx-auto animate-in fade-in slide-in-from-right-2 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-graphite-500 uppercase tracking-widest",children:"Cycle Habits"}),(0,t.jsxs)("button",{onClick:()=>{eD(void 0),e$(!0)},className:"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white rounded-xl text-xs font-bold hover:bg-pacific-500 shadow-lg shadow-pacific-500/30 transition-colors",children:[(0,t.jsx)(n.Plus,{size:16})," Add Habit"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[eg.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-2xl flex justify-between items-center group hover:border-pacific-500/30 transition-all shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:[e.name,e.linked_goal_id&&(0,t.jsxs)("span",{className:"text-[10px] uppercase px-2 py-0.5 rounded bg-pacific-50 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400 font-bold flex items-center gap-1",children:[(0,t.jsx)(m.AlertTriangle,{size:10})," Linked"]})]}),(0,t.jsxs)("div",{className:"text-xs text-graphite-500 mt-1 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"bg-graphite-100 dark:bg-graphite-800 px-2 py-0.5 rounded",children:e.category}),(0,t.jsxs)("span",{children:["Weight: ",e.weight]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>{eD(e),e$(!0)},className:"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors",children:(0,t.jsx)(s.Edit3,{size:16})}),(0,t.jsxs)("button",{onClick:()=>eO(e.id,"habit"),className:`p-2 rounded-lg transition-all flex items-center gap-2 ${eP===e.id?"bg-red-500 text-white w-24 justify-center":"text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[(0,t.jsx)(c.Trash2,{size:16})," ",eP===e.id&&(0,t.jsx)("span",{className:"text-xs font-bold",children:"Confirm"})]})]})]},e.id)),0===eg.length&&(0,t.jsx)("div",{className:"text-center py-12 text-graphite-400 italic bg-graphite-50 dark:bg-graphite-950 rounded-2xl border border-dashed border-graphite-200 dark:border-graphite-800",children:"No habits defined."})]})]})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3 bg-white dark:bg-graphite-900 rounded-b-2xl",children:[(0,t.jsx)("button",{onClick:T,className:"px-6 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors",children:"Close"}),(0,t.jsxs)("button",{onClick:()=>{if("create"===e&&(R<1||R>F)){eT(`Versions are limited to exactly ${F} cycles.`),I("strategy");return}let t={sprint_number:R,start_date:W,end_date:q,status:J?r.EntityStatus.ACTIVE:void 0,focus_priorities:Z.filter(e=>e.trim().length>0),problems:ee,learning_focus:ea,mantras:ec,cch_list:[{category:"Beliefs",items:ei},{category:"Characteristics",items:el},{category:"Skills",items:eo}]};"create"===e&&D?D(t,eh,eg):"edit"===e&&z&&f&&z({...f,...t})},className:"px-8 py-2 bg-graphite-900 dark:bg-white text-white dark:text-graphite-900 rounded-xl text-sm font-bold shadow-lg hover:opacity-90 transition-opacity flex items-center gap-2",children:["create"===e?(0,t.jsx)(k,{size:16}):(0,t.jsx)(g.Save,{size:16}),"create"===e?"Initialize Cycle":"Save Cycle Config"]})]}),(0,t.jsx)(y.GoalFormModal,{isOpen:eE,onClose:()=>eA(!1),onSave:(t,a)=>{let r={id:ez?.id||`temp-g-${Date.now()}`,...t,linkedHabit:a,subtasks:t.subtasks?.map(e=>({name:e,done:!1}))};"create"===e?ez?ex(e=>e.map(e=>e.id===ez.id?{...e,...r}:e)):ex(e=>[...e,r]):M&&M(ez?"update":"create",{...r,linkedHabit:a}),eA(!1)},initialGoal:ez,allHabits:C,currentCycleHabits:eg}),(0,t.jsx)(A,{isOpen:eH,onClose:()=>e$(!1),onSave:t=>{let a={id:e_?.id||`temp-h-${Date.now()}`,...t};"create"===e?e_?eb(e=>e.map(e=>e.id===e_.id?a:e)):eb(e=>[...e,a]):E&&E(e_?"update":"create",a),e$(!1)},initialHabit:e_,allHabits:C,onDeleteFromLibrary:eL,onRenameCategory:H,onDeleteCategory:$})]})})}],14784)}]);