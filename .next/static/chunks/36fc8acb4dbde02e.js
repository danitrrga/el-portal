(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let a=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],87316)},65286,e=>{"use strict";let a=(0,e.i(75254).default)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],65286)},83627,e=>{"use strict";let a=(0,e.i(75254).default)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);e.s(["Edit3",()=>a],83627)},43531,e=>{"use strict";let a=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},27612,55436,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612);let s=(0,a.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>s],55436)},55711,e=>{"use strict";let a=(0,e.i(75254).default)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);e.s(["Brain",()=>a],55711)},70956,e=>{"use strict";let a=(0,e.i(75254).default)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);e.s(["List",()=>a],70956)},22280,e=>{"use strict";var a=e.i(18050),t=e.i(71645),s=e.i(8442),i=e.i(73986),r=e.i(58041),l=e.i(27612),d=e.i(83627),c=e.i(37727),n=e.i(56909),o=e.i(71841),p=e.i(14784),h=e.i(89703);let x=({isOpen:e,onClose:s,type:r,data:l,onSave:d,categories:o})=>{let[p,h]=(0,t.useState)(l);if((0,t.useEffect)(()=>{h(l)},[l]),!e||!p)return null;let x=(e,a)=>{h(t=>({...t,[e]:a}))};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:s,children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 p-6 shadow-2xl border border-graphite-200 dark:border-graphite-800 animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-graphite-900 dark:text-white capitalize",children:["Edit ",r.slice(0,-1)]}),(0,a.jsx)("button",{onClick:s,children:(0,a.jsx)(c.X,{size:20,className:"text-graphite-400 hover:text-white"})})]}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:"versions"===r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-graphite-500",children:"Title"}),(0,a.jsx)("input",{className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm",value:p.title,onChange:e=>x("title",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-graphite-500",children:"Description"}),(0,a.jsx)("textarea",{className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm",value:p.description,onChange:e=>x("description",e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-graphite-500",children:"Start Date"}),(0,a.jsx)("input",{type:"date",className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm",value:p.start_date,onChange:e=>x("start_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-graphite-500",children:"End Date"}),(0,a.jsx)("input",{type:"date",className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm",value:p.end_date,onChange:e=>x("end_date",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-graphite-500",children:"Status"}),(0,a.jsxs)("select",{className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm",value:p.status,onChange:e=>x("status",e.target.value),children:[(0,a.jsx)("option",{value:i.EntityStatus.ACTIVE,children:"Active"}),(0,a.jsx)("option",{value:i.EntityStatus.ARCHIVED,children:"Archived"})]})]})]}):null}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>d(p),className:"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 flex items-center gap-2",children:[(0,a.jsx)(n.Save,{size:16})," Save Changes"]})]})]})})};e.s(["default",0,()=>{let[e,c]=(0,t.useState)([]),[n,g]=(0,t.useState)([]),[b,u]=(0,t.useState)([]),[y,m]=(0,t.useState)([]),[f,k]=(0,t.useState)("versions"),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(null),S=async()=>{try{let e=await s.supabaseService.getAllVersions(),a=await s.supabaseService.getAllCycles(),t=await s.supabaseService.getAllHabits(),i=await s.supabaseService.getAllGoals();c(e),g(a),u(t),m(i)}catch(e){console.error(e)}};(0,t.useEffect)(()=>{S()},[]),(0,t.useEffect)(()=>{j(null)},[f]);let C=async(e,a)=>{if(v!==e){j(e),setTimeout(()=>j(a=>a===e?null:a),3e3);return}try{switch(a){case"versions":await s.supabaseService.deleteVersion(e);break;case"cycles":await s.supabaseService.deleteCycle(e);break;case"habits":await s.supabaseService.deleteHabit(e);break;case"goals":await s.supabaseService.deleteGoal(e)}j(null),S()}catch(e){console.error("Delete failed",e),S()}},A=async e=>{let a=w?.type;if(a){switch(a){case"versions":await s.supabaseService.updateVersion(e);break;case"cycles":await s.supabaseService.updateCycle(e)}N(null),S()}},M=async(e,a)=>{if(w?.type!=="goals"||!w.data)return;let t=w.data,i=e.subtasks?.map(e=>{let a=e.match(/^(\s*)/),t=Math.floor((a?a[1]:"").replace(/\t/g,"  ").length/2);return{name:e.trim(),done:!1,level:t}}),r={...t,title:e.title,description:e.description,type:e.type,subtasks:i,linked_habit_id:a?.id};await s.supabaseService.updateGoal(r),N(null),S()},_=async e=>{if(w?.type!=="habits"||!w.data)return;let a={...w.data,name:e.name,category:e.category,weight:e.weight};await s.supabaseService.updateHabit(a),N(null),S()},H=async(e,a)=>{if(w?.data){if("delete"===e)await s.supabaseService.deleteGoal(a.id);else if("create"===e){let e={id:`g-${crypto.randomUUID()}`,cycle_id:w.data.id,title:a.title,description:a.description,type:a.type,subtasks:a.subtasks?.map(e=>({name:e.trim(),done:!1,level:0}))||[]};await s.supabaseService.addGoal(e)}else{let e=y.find(e=>e.id===a.id);if(e){let t={...e,...a};a.subtasks&&"string"==typeof a.subtasks[0]&&(t.subtasks=a.subtasks.map(e=>({name:e.trim(),done:!1,level:0}))),await s.supabaseService.updateGoal(t)}}S()}},T=async(e,a)=>{if(w?.data){if("delete"===e)await s.supabaseService.deleteHabit(a.id);else if("create"===e){let e={id:`h-${crypto.randomUUID()}`,cycle_id:w.data.id,name:a.name,category:a.category,weight:a.weight};await s.supabaseService.addHabit(e)}else{let e=b.find(e=>e.id===a.id);e&&await s.supabaseService.updateHabit({...e,...a})}S()}},E=Array.from(new Set(b.map(e=>e.category))).sort(),D=n.find(e=>e.status===i.EntityStatus.ACTIVE)||n[n.length-1],z=D?b.filter(e=>e.cycle_id===D.id):[];return(0,a.jsxs)("div",{className:"space-y-8 h-full flex flex-col",children:[(0,a.jsx)("header",{className:"flex items-end justify-between border-b border-graphite-200 dark:border-graphite-800 pb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xs font-bold uppercase tracking-widest text-graphite-500 mb-2",children:"System Records"}),(0,a.jsxs)("h1",{className:"text-3xl font-display font-medium text-graphite-900 dark:text-white flex items-center gap-3",children:[(0,a.jsx)(r.Database,{className:"text-graphite-400"}),"Database View"]})]})}),(0,a.jsx)("div",{className:"flex gap-4 border-b border-graphite-200 dark:border-graphite-800",children:["versions","cycles","habits","goals"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:`pb-3 text-sm font-bold uppercase tracking-wide transition-colors border-b-2 ${f===e?"border-pacific-500 text-pacific-700 dark:border-pacific-400 dark:text-pacific-400":"border-transparent text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300"}`,children:e},e))}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-lg shadow-sm",children:[(()=>{let t=[],s=[];switch(f){case"versions":t=["Number","Title","Status","Dates","Actions"],s=e.map(e=>({id:e.id,data:[(0,a.jsxs)("span",{className:"font-medium",children:["v",e.number,".0"]}),e.title,(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${e.status===i.EntityStatus.ACTIVE?"bg-bali-100 text-bali-700 dark:bg-bali-900/30 dark:text-bali-400":"bg-graphite-100 text-graphite-500 dark:bg-graphite-800"}`,children:e.status}),(0,a.jsxs)("span",{className:"text-xs font-mono text-graphite-500",children:[e.start_date," → ",e.end_date]})],original:e}));break;case"cycles":t=["Sprint #","Priorities","Version Link","Dates","Actions"],s=n.map(e=>({id:e.id,data:[`Cycle ${e.sprint_number}`,(0,a.jsx)("div",{className:"flex flex-col gap-1",children:e.focus_priorities.slice(0,2).map((e,t)=>(0,a.jsxs)("span",{className:"text-xs",children:["• ",e]},t))}),(0,a.jsx)("span",{className:"text-xs text-pacific-500 font-mono",children:e.version_id}),(0,a.jsxs)("span",{className:"text-xs font-mono text-graphite-500",children:[e.start_date," → ",e.end_date]})],original:e}));break;case"habits":t=["Name","Category","Weight","Cycle Link","Actions"],s=b.map(e=>({id:e.id,data:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-xs bg-graphite-100 dark:bg-graphite-800 px-2 py-1 rounded",children:e.category}),(0,a.jsx)("div",{className:"flex gap-0.5",children:[...Array(e.weight)].map((e,t)=>(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-pacific-500"},t))}),(0,a.jsx)("span",{className:"text-xs text-pacific-500 font-mono",children:e.cycle_id})],original:e}));break;case"goals":t=["Title","Type","Cycle Link","Linked Habit","Actions"],s=y.map(e=>({id:e.id,data:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:`text-[10px] font-bold uppercase px-2 py-1 rounded border ${e.type===i.GoalType.TASK_PROJECT?"border-purple-200 text-purple-600 dark:border-purple-900 dark:text-purple-400":"border-bali-200 text-bali-600 dark:border-bali-900 dark:text-bali-400"}`,children:e.type===i.GoalType.TASK_PROJECT?"Project":"Consistency"}),(0,a.jsx)("span",{className:"text-xs text-pacific-500 font-mono",children:e.cycle_id}),e.linked_habit_id?(0,a.jsxs)("span",{className:"text-xs font-mono text-graphite-400",children:[e.linked_habit_id.slice(0,8),"..."]}):(0,a.jsx)("span",{className:"text-xs text-graphite-300",children:"-"})],original:e}))}return(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-graphite-50 dark:bg-graphite-800/50 text-graphite-500 uppercase font-bold text-xs sticky top-0 backdrop-blur-sm",children:(0,a.jsx)("tr",{children:t.map((e,t)=>(0,a.jsx)("th",{className:"px-6 py-3",children:e},t))})}),(0,a.jsx)("tbody",{className:"divide-y divide-graphite-200 dark:divide-graphite-800",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-graphite-50 dark:hover:bg-graphite-800/30 transition-colors group",children:[e.data.map((e,t)=>(0,a.jsx)("td",{className:"px-6 py-4 text-graphite-700 dark:text-graphite-300 align-middle",children:e},t)),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>{N({type:f,data:e.original})},className:"p-1.5 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors",children:(0,a.jsx)(d.Edit3,{size:16})}),(0,a.jsxs)("button",{onClick:()=>C(e.id,f),className:`p-1.5 rounded-lg transition-all duration-200 flex items-center gap-2 ${v===e.id?"bg-red-500 text-white px-3 shadow-lg shadow-red-500/30 opacity-100":"text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[(0,a.jsx)(l.Trash2,{size:16}),v===e.id&&(0,a.jsx)("span",{className:"text-xs font-bold animate-in fade-in slide-in-from-left-1",children:"Confirm"})]})]})})]},e.id))})]})})(),("versions"===f&&0===e.length||"cycles"===f&&0===n.length||"habits"===f&&0===b.length||"goals"===f&&0===y.length)&&(0,a.jsx)("div",{className:"p-12 text-center text-graphite-400 italic",children:"No records found in database."})]}),w&&("goals"===w.type?(0,a.jsx)(o.GoalFormModal,{isOpen:!0,onClose:()=>N(null),onSave:M,initialGoal:w.data,allHabits:b,currentCycleHabits:z}):"cycles"===w.type?(0,a.jsx)(p.CycleEditorModal,{cycle:w.data,goals:y.filter(e=>e.cycle_id===w.data.id),habits:b.filter(e=>e.cycle_id===w.data.id),allHabits:b,onClose:()=>N(null),onSaveCycle:A,onManageGoal:H,onManageHabit:T,onRenameCategory:async(e,a)=>{for(let t of(await s.supabaseService.getAllHabits()).filter(a=>a.category===e))await s.supabaseService.updateHabit({...t,category:a});await S()},onDeleteCategory:async e=>{for(let a of(await s.supabaseService.getAllHabits()).filter(a=>a.category===e))await s.supabaseService.updateHabit({...a,category:"Uncategorized"});await S()}}):"habits"===w.type?(0,a.jsx)(h.HabitFormModal,{isOpen:!0,onClose:()=>N(null),onSave:_,initialHabit:w.data,allHabits:b,onDeleteFromLibrary:e=>C(e,"habits"),onRenameCategory:async(e,a)=>{for(let t of(await s.supabaseService.getAllHabits()).filter(a=>a.category===e))await s.supabaseService.updateHabit({...t,category:a});await S()},onDeleteCategory:async e=>{for(let a of(await s.supabaseService.getAllHabits()).filter(a=>a.category===e))await s.supabaseService.updateHabit({...a,category:"Uncategorized"});await S()}}):(0,a.jsx)(x,{isOpen:!!w,onClose:()=>N(null),type:w.type,data:w.data,onSave:A,categories:E}))]})}])}]);