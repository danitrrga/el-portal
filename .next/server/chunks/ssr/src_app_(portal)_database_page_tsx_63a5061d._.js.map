{"version":3,"sources":["../../../../src/app/%28portal%29/database/page.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { Version, Cycle, EntityStatus, Habit, Goal, HabitWeight, GoalType } from '@/types/types';\r\nimport { Database, Search, ArrowUpRight, Trash2, Edit3, X, Save } from 'lucide-react';\r\nimport { GoalFormModal } from '@/components/GoalFormModal';\r\nimport { CycleEditorModal } from '@/components/CycleEditorModal';\r\nimport { HabitFormModal } from '@/components/HabitFormModal';\r\n\r\ntype TabType = 'versions' | 'cycles' | 'habits' | 'goals';\r\n\r\nconst EditModal = ({ isOpen, onClose, type, data, onSave, categories }: {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    type: TabType;\r\n    data: any;\r\n    onSave: (updatedData: any) => void;\r\n    categories?: string[];\r\n}) => {\r\n    const [formData, setFormData] = useState(data);\r\n\r\n    useEffect(() => {\r\n        setFormData(data);\r\n    }, [data]);\r\n\r\n    if (!isOpen || !formData) return null;\r\n\r\n    const handleChange = (field: string, value: any) => {\r\n        setFormData((prev: any) => ({ ...prev, [field]: value }));\r\n    };\r\n\r\n    const renderFields = () => {\r\n        switch (type) {\r\n            case 'versions':\r\n                return (\r\n                    <>\r\n                        <div className=\"space-y-1\">\r\n                            <label className=\"text-xs font-bold uppercase text-graphite-500\">Title</label>\r\n                            <input className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm\"\r\n                                value={formData.title} onChange={e => handleChange('title', e.target.value)} />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <label className=\"text-xs font-bold uppercase text-graphite-500\">Description</label>\r\n                            <textarea className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm\"\r\n                                value={formData.description} onChange={e => handleChange('description', e.target.value)} rows={3} />\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs font-bold uppercase text-graphite-500\">Start Date</label>\r\n                                <input type=\"date\" className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm\"\r\n                                    value={formData.start_date} onChange={e => handleChange('start_date', e.target.value)} />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs font-bold uppercase text-graphite-500\">End Date</label>\r\n                                <input type=\"date\" className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm\"\r\n                                    value={formData.end_date} onChange={e => handleChange('end_date', e.target.value)} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <label className=\"text-xs font-bold uppercase text-graphite-500\">Status</label>\r\n                            <select className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-lg p-2 text-sm\"\r\n                                value={formData.status} onChange={e => handleChange('status', e.target.value)}>\r\n                                <option value={EntityStatus.ACTIVE}>Active</option>\r\n                                <option value={EntityStatus.ARCHIVED}>Archived</option>\r\n                            </select>\r\n                        </div>\r\n                    </>\r\n                );\r\n            case 'cycles':\r\n                // Handled by CycleEditorModal\r\n                return null;\r\n            case 'habits':\r\n                // Handled by HabitFormModal\r\n                return null;\r\n            case 'goals':\r\n                // Handled by GoalFormModal\r\n                return null;\r\n            default: return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n            <div className=\"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 p-6 shadow-2xl border border-graphite-200 dark:border-graphite-800 animate-in zoom-in-95 duration-200\" onClick={e => e.stopPropagation()}>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h2 className=\"text-lg font-bold text-graphite-900 dark:text-white capitalize\">Edit {type.slice(0, -1)}</h2>\r\n                    <button onClick={onClose}><X size={20} className=\"text-graphite-400 hover:text-white\" /></button>\r\n                </div>\r\n                <div className=\"space-y-4 mb-6\">\r\n                    {renderFields()}\r\n                </div>\r\n                <div className=\"flex justify-end gap-3\">\r\n                    <button onClick={onClose} className=\"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white\">Cancel</button>\r\n                    <button onClick={() => onSave(formData)} className=\"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 flex items-center gap-2\">\r\n                        <Save size={16} /> Save Changes\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst DatabasePage: React.FC = () => {\r\n    const [versions, setVersions] = useState<Version[]>([]);\r\n    const [cycles, setCycles] = useState<Cycle[]>([]);\r\n    const [habits, setHabits] = useState<Habit[]>([]);\r\n    const [goals, setGoals] = useState<Goal[]>([]);\r\n    const [activeTab, setActiveTab] = useState<TabType>('versions');\r\n    const [verifyDeleteId, setVerifyDeleteId] = useState<string | null>(null);\r\n\r\n    const [editingItem, setEditingItem] = useState<{ type: TabType; data: any } | null>(null);\r\n\r\n    const loadData = async () => {\r\n        try {\r\n            const v = await supabaseService.getAllVersions();\r\n            const c = await supabaseService.getAllCycles();\r\n            const h = await supabaseService.getAllHabits();\r\n            const g = await supabaseService.getAllGoals();\r\n\r\n            setVersions(v);\r\n            setCycles(c);\r\n            setHabits(h);\r\n            setGoals(g);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    useEffect(() => { loadData(); }, []);\r\n\r\n    // Reset delete verification when changing tabs\r\n    useEffect(() => {\r\n        setVerifyDeleteId(null);\r\n    }, [activeTab]);\r\n\r\n    const handleDelete = async (id: string, type: TabType) => {\r\n        // 1. Check if we are verifying this specific ID\r\n        if (verifyDeleteId !== id) {\r\n            setVerifyDeleteId(id);\r\n            // Auto-reset after 3s\r\n            setTimeout(() => setVerifyDeleteId((prev: string | null) => prev === id ? null : prev), 3000);\r\n            return;\r\n        }\r\n\r\n        // 2. Already verifying, perform delete\r\n        try {\r\n            switch (type) {\r\n                case 'versions': await supabaseService.deleteVersion(id); break;\r\n                case 'cycles': await supabaseService.deleteCycle(id); break;\r\n                case 'habits': await supabaseService.deleteHabit(id); break;\r\n                case 'goals': await supabaseService.deleteGoal(id); break;\r\n            }\r\n            setVerifyDeleteId(null);\r\n            loadData();\r\n        } catch (e) {\r\n            console.error(\"Delete failed\", e);\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    const handleEdit = (item: any) => {\r\n        setEditingItem({ type: activeTab, data: item });\r\n    };\r\n\r\n    const handleSaveEdit = async (updatedData: any) => {\r\n        const type = editingItem?.type;\r\n        if (!type) return;\r\n\r\n        switch (type) {\r\n            case 'versions': await supabaseService.updateVersion(updatedData); break;\r\n            case 'cycles': await supabaseService.updateCycle(updatedData); break;\r\n            // Habits and Goals are now handled by specific modals and handlers\r\n        }\r\n        setEditingItem(null);\r\n        loadData();\r\n    };\r\n\r\n    const handleGoalSave = async (goalData: { title: string; description: string; type: GoalType; subtasks?: string[] }, selectedHabit: Habit | null) => {\r\n        if (editingItem?.type !== 'goals' || !editingItem.data) return;\r\n        const originalGoal = editingItem.data as Goal;\r\n        const parsedSubtasks = goalData.subtasks?.map((rawName: string) => {\r\n            const match = rawName.match(/^(\\s*)/);\r\n            const leadingStr = match ? match[1] : '';\r\n            const normalizedIndent = leadingStr.replace(/\\t/g, '  ');\r\n            const level = Math.floor(normalizedIndent.length / 2);\r\n            return { name: rawName.trim(), done: false, level };\r\n        });\r\n\r\n        const updatedGoal: Goal = {\r\n            ...originalGoal,\r\n            title: goalData.title,\r\n            description: goalData.description,\r\n            type: goalData.type,\r\n            subtasks: parsedSubtasks,\r\n            linked_habit_id: selectedHabit?.id\r\n        };\r\n\r\n        await supabaseService.updateGoal(updatedGoal);\r\n        setEditingItem(null);\r\n        loadData();\r\n    };\r\n\r\n    const handleHabitSave = async (habitData: { name: string; category: string; weight: HabitWeight }) => {\r\n        if (editingItem?.type !== 'habits' || !editingItem.data) return;\r\n        const originalHabit = editingItem.data as Habit;\r\n        const updatedHabit: Habit = {\r\n            ...originalHabit,\r\n            name: habitData.name,\r\n            category: habitData.category,\r\n            weight: habitData.weight\r\n        };\r\n        await supabaseService.updateHabit(updatedHabit);\r\n        setEditingItem(null);\r\n        loadData();\r\n    };\r\n\r\n    const handleCycleManageGoal = async (action: 'create' | 'update' | 'delete', payload: any) => {\r\n        if (!editingItem?.data) return;\r\n        if (action === 'delete') {\r\n            await supabaseService.deleteGoal(payload.id);\r\n        } else {\r\n            // Simplified replication of Lab.tsx logic for Database view context\r\n            if (action === 'create') {\r\n                const newGoal: Goal = {\r\n                    id: `g-${crypto.randomUUID()}`,\r\n                    cycle_id: editingItem.data.id,\r\n                    title: payload.title,\r\n                    description: payload.description,\r\n                    type: payload.type,\r\n                    subtasks: payload.subtasks?.map((s: string) => ({ name: s.trim(), done: false, level: 0 })) || []\r\n                };\r\n                await supabaseService.addGoal(newGoal);\r\n            } else {\r\n                const originalGoal = goals.find((g: Goal) => g.id === payload.id);\r\n                if (originalGoal) {\r\n                    const updatedGoal = { ...originalGoal, ...payload };\r\n                    if (payload.subtasks && typeof payload.subtasks[0] === 'string') {\r\n                        updatedGoal.subtasks = payload.subtasks.map((s: string) => ({ name: s.trim(), done: false, level: 0 }));\r\n                    }\r\n                    await supabaseService.updateGoal(updatedGoal);\r\n                }\r\n            }\r\n        }\r\n        loadData();\r\n    };\r\n\r\n    const handleCycleManageHabit = async (action: 'create' | 'update' | 'delete', payload: any) => {\r\n        if (!editingItem?.data) return;\r\n        if (action === 'delete') {\r\n            await supabaseService.deleteHabit(payload.id);\r\n        } else if (action === 'create') {\r\n            const newHabit: Habit = {\r\n                id: `h-${crypto.randomUUID()}`,\r\n                cycle_id: editingItem.data.id,\r\n                name: payload.name,\r\n                category: payload.category,\r\n                weight: payload.weight\r\n            };\r\n            await supabaseService.addHabit(newHabit);\r\n        } else {\r\n            const originalHabit = habits.find((h: Habit) => h.id === payload.id);\r\n            if (originalHabit) {\r\n                await supabaseService.updateHabit({ ...originalHabit, ...payload });\r\n            }\r\n        }\r\n        loadData();\r\n    };\r\n\r\n    // Get unique categories for habits\r\n    const uniqueCategories = Array.from(new Set(habits.map((h: Habit) => h.category))).sort() as string[];\r\n\r\n    // Calculate current cycle habits for goal linking context\r\n    const activeCycle = cycles.find(c => c.status === EntityStatus.ACTIVE) || cycles[cycles.length - 1];\r\n    const currentCycleHabits = activeCycle ? habits.filter(h => h.cycle_id === activeCycle.id) : [];\r\n\r\n    const renderTable = () => {\r\n        let headers: string[] = [];\r\n        let rows: any[] = [];\r\n\r\n        switch (activeTab) {\r\n            case 'versions':\r\n                headers = ['Number', 'Title', 'Status', 'Dates', 'Actions'];\r\n                rows = versions.map((v: Version) => ({\r\n                    id: v.id,\r\n                    data: [\r\n                        <span className=\"font-medium\">v{v.number}.0</span>,\r\n                        v.title,\r\n                        <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${v.status === EntityStatus.ACTIVE ? 'bg-bali-100 text-bali-700 dark:bg-bali-900/30 dark:text-bali-400' : 'bg-graphite-100 text-graphite-500 dark:bg-graphite-800'}`}>{v.status}</span>,\r\n                        <span className=\"text-xs font-mono text-graphite-500\">{v.start_date} → {v.end_date}</span>\r\n                    ],\r\n                    original: v\r\n                }));\r\n                break;\r\n            case 'cycles':\r\n                headers = ['Sprint #', 'Priorities', 'Version Link', 'Dates', 'Actions'];\r\n                rows = cycles.map((c: Cycle) => ({\r\n                    id: c.id,\r\n                    data: [\r\n                        `Cycle ${c.sprint_number}`,\r\n                        <div className=\"flex flex-col gap-1\">{c.focus_priorities.slice(0, 2).map((p: string, i: number) => <span key={i} className=\"text-xs\">• {p}</span>)}</div>,\r\n                        <span className=\"text-xs text-pacific-500 font-mono\">{c.version_id}</span>,\r\n                        <span className=\"text-xs font-mono text-graphite-500\">{c.start_date} → {c.end_date}</span>\r\n                    ],\r\n                    original: c\r\n                }));\r\n                break;\r\n            case 'habits':\r\n                headers = ['Name', 'Category', 'Weight', 'Cycle Link', 'Actions'];\r\n                rows = habits.map((h: Habit) => ({\r\n                    id: h.id,\r\n                    data: [\r\n                        <span className=\"font-medium\">{h.name}</span>,\r\n                        <span className=\"text-xs bg-graphite-100 dark:bg-graphite-800 px-2 py-1 rounded\">{h.category}</span>,\r\n                        <div className=\"flex gap-0.5\">{[...Array(h.weight)].map((_: any, i: number) => <div key={i} className=\"h-1.5 w-1.5 rounded-full bg-pacific-500\" />)}</div>,\r\n                        <span className=\"text-xs text-pacific-500 font-mono\">{h.cycle_id}</span>\r\n                    ],\r\n                    original: h\r\n                }));\r\n                break;\r\n            case 'goals':\r\n                headers = ['Title', 'Type', 'Cycle Link', 'Linked Habit', 'Actions'];\r\n                rows = goals.map((g: Goal) => ({\r\n                    id: g.id,\r\n                    data: [\r\n                        <span className=\"font-medium\">{g.title}</span>,\r\n                        <span className={`text-[10px] font-bold uppercase px-2 py-1 rounded border ${g.type === GoalType.TASK_PROJECT ? 'border-purple-200 text-purple-600 dark:border-purple-900 dark:text-purple-400' : 'border-bali-200 text-bali-600 dark:border-bali-900 dark:text-bali-400'}`}>{g.type === GoalType.TASK_PROJECT ? 'Project' : 'Consistency'}</span>,\r\n                        <span className=\"text-xs text-pacific-500 font-mono\">{g.cycle_id}</span>,\r\n                        g.linked_habit_id ? <span className=\"text-xs font-mono text-graphite-400\">{g.linked_habit_id.slice(0, 8)}...</span> : <span className=\"text-xs text-graphite-300\">-</span>\r\n                    ],\r\n                    original: g\r\n                }));\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <table className=\"w-full text-left text-sm\">\r\n                <thead className=\"bg-graphite-50 dark:bg-graphite-800/50 text-graphite-500 uppercase font-bold text-xs sticky top-0 backdrop-blur-sm\">\r\n                    <tr>\r\n                        {headers.map((h, i) => <th key={i} className=\"px-6 py-3\">{h}</th>)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-graphite-200 dark:divide-graphite-800\">\r\n                    {rows.map(row => (\r\n                        <tr key={row.id} className=\"hover:bg-graphite-50 dark:hover:bg-graphite-800/30 transition-colors group\">\r\n                            {row.data.map((cell: any, i: number) => (\r\n                                <td key={i} className=\"px-6 py-4 text-graphite-700 dark:text-graphite-300 align-middle\">\r\n                                    {cell}\r\n                                </td>\r\n                            ))}\r\n                            <td className=\"px-6 py-4\">\r\n                                <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <button onClick={() => handleEdit(row.original)} className=\"p-1.5 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors\">\r\n                                        <Edit3 size={16} />\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleDelete(row.id, activeTab)}\r\n                                        className={`p-1.5 rounded-lg transition-all duration-200 flex items-center gap-2 ${verifyDeleteId === row.id\r\n                                            ? 'bg-red-500 text-white px-3 shadow-lg shadow-red-500/30 opacity-100'\r\n                                            : 'text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20'\r\n                                            }`}\r\n                                    >\r\n                                        <Trash2 size={16} />\r\n                                        {verifyDeleteId === row.id && (\r\n                                            <span className=\"text-xs font-bold animate-in fade-in slide-in-from-left-1\">Confirm</span>\r\n                                        )}\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 h-full flex flex-col\">\r\n            <header className=\"flex items-end justify-between border-b border-graphite-200 dark:border-graphite-800 pb-6\">\r\n                <div>\r\n                    <h2 className=\"text-xs font-bold uppercase tracking-widest text-graphite-500 mb-2\">\r\n                        System Records\r\n                    </h2>\r\n                    <h1 className=\"text-3xl font-display font-medium text-graphite-900 dark:text-white flex items-center gap-3\">\r\n                        <Database className=\"text-graphite-400\" />\r\n                        Database View\r\n                    </h1>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"flex gap-4 border-b border-graphite-200 dark:border-graphite-800\">\r\n                {(['versions', 'cycles', 'habits', 'goals'] as TabType[]).map(tab => (\r\n                    <button\r\n                        key={tab}\r\n                        onClick={() => setActiveTab(tab)}\r\n                        className={`pb-3 text-sm font-bold uppercase tracking-wide transition-colors border-b-2 ${activeTab === tab ? 'border-pacific-500 text-pacific-700 dark:border-pacific-400 dark:text-pacific-400' : 'border-transparent text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300'}`}\r\n                    >\r\n                        {tab}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-auto bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-lg shadow-sm\">\r\n                {renderTable()}\r\n                {(\r\n                    (activeTab === 'versions' && versions.length === 0) ||\r\n                    (activeTab === 'cycles' && cycles.length === 0) ||\r\n                    (activeTab === 'habits' && habits.length === 0) ||\r\n                    (activeTab === 'goals' && goals.length === 0)\r\n                ) && (\r\n                        <div className=\"p-12 text-center text-graphite-400 italic\">No records found in database.</div>\r\n                    )}\r\n            </div>\r\n\r\n            {editingItem && (\r\n                editingItem.type === 'goals' ? (\r\n                    <GoalFormModal\r\n                        isOpen={true}\r\n                        onClose={() => setEditingItem(null)}\r\n                        onSave={handleGoalSave}\r\n                        initialGoal={editingItem.data as Goal}\r\n                        allHabits={habits}\r\n                        currentCycleHabits={currentCycleHabits}\r\n                    />\r\n                ) : editingItem.type === 'cycles' ? (\r\n                    <CycleEditorModal\r\n                        cycle={editingItem.data as Cycle}\r\n                        goals={goals.filter((g: Goal) => g.cycle_id === editingItem.data.id)}\r\n                        habits={habits.filter((h: Habit) => h.cycle_id === editingItem.data.id)}\r\n                        allHabits={habits}\r\n                        onClose={() => setEditingItem(null)}\r\n                        onSaveCycle={handleSaveEdit}\r\n                        onManageGoal={handleCycleManageGoal}\r\n                        onManageHabit={handleCycleManageHabit}\r\n                        onRenameCategory={async (oldName: string, newName: string) => {\r\n                            const all = await supabaseService.getAllHabits();\r\n                            const targets = all.filter((h: Habit) => h.category === oldName);\r\n                            for (const h of targets) await supabaseService.updateHabit({ ...h, category: newName });\r\n                            await loadData();\r\n                        }}\r\n                        onDeleteCategory={async (catName: string) => {\r\n                            const all = await supabaseService.getAllHabits();\r\n                            const targets = all.filter((h: Habit) => h.category === catName);\r\n                            for (const h of targets) await supabaseService.updateHabit({ ...h, category: 'Uncategorized' });\r\n                            await loadData();\r\n                        }}\r\n                    />\r\n                ) : editingItem.type === 'habits' ? (\r\n                    <HabitFormModal\r\n                        isOpen={true}\r\n                        onClose={() => setEditingItem(null)}\r\n                        onSave={handleHabitSave}\r\n                        initialHabit={editingItem.data as Habit}\r\n                        allHabits={habits}\r\n                        onDeleteFromLibrary={(id: string) => handleDelete(id, 'habits')}\r\n                        onRenameCategory={async (oldName: string, newName: string) => {\r\n                            const all = await supabaseService.getAllHabits();\r\n                            const targets = all.filter((h: Habit) => h.category === oldName);\r\n                            for (const h of targets) await supabaseService.updateHabit({ ...h, category: newName });\r\n                            await loadData();\r\n                        }}\r\n                        onDeleteCategory={async (catName: string) => {\r\n                            const all = await supabaseService.getAllHabits();\r\n                            const targets = all.filter((h: Habit) => h.category === catName);\r\n                            for (const h of targets) await supabaseService.updateHabit({ ...h, category: 'Uncategorized' });\r\n                            await loadData();\r\n                        }}\r\n                    />\r\n                ) : (\r\n                    <EditModal\r\n                        isOpen={!!editingItem}\r\n                        onClose={() => setEditingItem(null)}\r\n                        type={editingItem.type}\r\n                        data={editingItem.data}\r\n                        onSave={handleSaveEdit}\r\n                        categories={uniqueCategories}\r\n                    />\r\n                )\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DatabasePage;\r\n"],"names":["EditModal","isOpen","onClose","type","data","onSave","categories","formData","setFormData","handleChange","field","value","prev","renderFields","className","title","onChange","e","target","description","rows","start_date","end_date","status","ACTIVE","ARCHIVED","onClick","stopPropagation","slice","size","DatabasePage","versions","setVersions","cycles","setCycles","habits","setHabits","goals","setGoals","activeTab","setActiveTab","verifyDeleteId","setVerifyDeleteId","editingItem","setEditingItem","loadData","v","getAllVersions","c","getAllCycles","h","getAllHabits","g","getAllGoals","err","console","error","handleDelete","id","setTimeout","deleteVersion","deleteCycle","deleteHabit","deleteGoal","handleEdit","item","handleSaveEdit","updatedData","updateVersion","updateCycle","handleGoalSave","goalData","selectedHabit","originalGoal","parsedSubtasks","subtasks","map","rawName","match","leadingStr","normalizedIndent","replace","level","Math","floor","length","name","trim","done","updatedGoal","linked_habit_id","updateGoal","handleHabitSave","habitData","originalHabit","updatedHabit","category","weight","updateHabit","handleCycleManageGoal","action","payload","newGoal","crypto","randomUUID","cycle_id","s","addGoal","find","handleCycleManageHabit","newHabit","addHabit","uniqueCategories","Array","from","Set","sort","activeCycle","currentCycleHabits","filter","renderTable","headers","number","original","sprint_number","focus_priorities","p","i","version_id","_","TASK_PROJECT","row","cell","tab","initialGoal","allHabits","cycle","onSaveCycle","onManageGoal","onManageHabit","onRenameCategory","oldName","newName","all","targets","onDeleteCategory","catName","initialHabit","onDeleteFromLibrary"],"mappings":"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"}