{"version":3,"sources":["../../../../src/app/%28portal%29/dashboard/page.tsx","../../../../node_modules/lucide-react/src/icons/book-open.ts","../../../../src/components/ProgressArc.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { Cycle, Goal, Habit, GoalType, HabitLog, Version } from '@/types/types';\r\nimport { Brain, Target, CheckCircle, ChevronDown, ChevronUp, Check, RefreshCw, TrendingUp, Plus, Calendar, Layers, Flame, Trophy, BookOpen, AlertTriangle } from 'lucide-react';\r\nimport dynamic from 'next/dynamic';\r\n\r\n// Dynamically import PerformanceChart with no SSR - Recharts doesn't work with SSR\r\nconst PerformanceChart = dynamic(\r\n  () => import('@/components/PerformanceChart').then(mod => ({ default: mod.PerformanceChart })),\r\n  {\r\n    ssr: false,\r\n    loading: () => (\r\n      <div className=\"h-full w-full flex items-center justify-center\">\r\n        <div className=\"animate-spin\">\r\n          <RefreshCw size={24} className=\"text-graphite-400\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n);\r\n\r\nimport { NewVersionModal } from '@/components/NewVersionModal';\r\nimport { ProgressArc } from '@/components/ProgressArc';\r\n\r\ntype ChartView = 'week' | '30d' | 'cycle';\r\n\r\ninterface DashboardData {\r\n  version: Version | null;\r\n  cycle: Cycle | null;\r\n  habits: Habit[];\r\n  todayLogs: HabitLog[];\r\n  habitStats: Record<string, { currentStreak: number; maxStreak: number }>;\r\n  goals: Goal[];\r\n}\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const [data, setData] = useState<DashboardData | null>(null);\r\n  const [history, setHistory] = useState<{ date: string; score: number }[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentScore, setCurrentScore] = useState(0);\r\n  const [togglingHabits, setTogglingHabits] = useState<Set<string>>(new Set());\r\n  const [chartView, setChartView] = useState<ChartView>('week');\r\n  const [expandedProjects, setExpandedProjects] = useState<Set<string>>(new Set());\r\n  const [showNewVersion, setShowNewVersion] = useState(false);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      await supabaseService.seedDefaultArchives();\r\n      const dashboardData = await supabaseService.getDashboardData();\r\n      const historyData = await supabaseService.getHistoryData();\r\n      setData(dashboardData);\r\n      setHistory(historyData.dailyScores);\r\n      console.log('Dashboard Data Loaded:', dashboardData);\r\n      console.log('History Data Loaded:', historyData.dailyScores);\r\n      setCurrentScore(supabaseService.calculateDailyScore(dashboardData.habits, dashboardData.todayLogs));\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { loadData(); }, []);\r\n\r\n  const handleToggleHabit = async (habitId: string, currentStatus: boolean) => {\r\n    if (!data) return;\r\n\r\n    // Prevent double-clicking while toggle is in progress\r\n    if (togglingHabits.has(habitId)) return;\r\n\r\n    const newStatus = !currentStatus;\r\n\r\n    // Mark this habit as being toggled\r\n    setTogglingHabits(prev => new Set(prev).add(habitId));\r\n\r\n    try {\r\n      // Optimistic UI update\r\n      const updatedLogs = newStatus\r\n        ? [...data.todayLogs, { id: 'temp', habit_id: habitId, date: '', status: true }]\r\n        : data.todayLogs.filter(l => l.habit_id !== habitId);\r\n\r\n      setData({ ...data, todayLogs: updatedLogs });\r\n      const newScore = supabaseService.calculateDailyScore(data.habits, updatedLogs);\r\n      setCurrentScore(newScore);\r\n\r\n      const todayStr = supabaseService.getLocalDateString();\r\n      setHistory(prev => prev.map(d => d.date === todayStr ? { ...d, score: newScore } : d));\r\n\r\n      // Perform database update\r\n      await supabaseService.toggleHabit(habitId, newStatus);\r\n\r\n      // Efficiently update only the affected data instead of full reload\r\n      const dashboardData = await supabaseService.getDashboardData();\r\n      setData(dashboardData);\r\n      setCurrentScore(supabaseService.calculateDailyScore(dashboardData.habits, dashboardData.todayLogs));\r\n\r\n    } catch (error) {\r\n      console.error('Error toggling habit:', error);\r\n      // Revert optimistic update on error\r\n      await loadData();\r\n    } finally {\r\n      // Remove from toggling set\r\n      setTogglingHabits(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(habitId);\r\n        return newSet;\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleProject = (id: string) => {\r\n    const newSet = new Set(expandedProjects);\r\n    if (newSet.has(id)) newSet.delete(id);\r\n    else newSet.add(id);\r\n    setExpandedProjects(newSet);\r\n  };\r\n\r\n  const handleToggleSubtask = async (goalId: string, index: number) => {\r\n    if (!data) return;\r\n    const goalIndex = data.goals.findIndex(g => g.id === goalId);\r\n    if (goalIndex === -1) return;\r\n    const goal = data.goals[goalIndex];\r\n    if (!goal.subtasks || !Array.isArray(goal.subtasks)) return;\r\n\r\n    const newSubtasks = [...goal.subtasks];\r\n    newSubtasks[index] = { ...newSubtasks[index], done: !newSubtasks[index].done };\r\n    const updatedGoal = { ...goal, subtasks: newSubtasks };\r\n    const newGoals = [...data.goals];\r\n    newGoals[goalIndex] = updatedGoal;\r\n    setData({ ...data, goals: newGoals });\r\n    await supabaseService.updateGoal(updatedGoal);\r\n  };\r\n\r\n  const handleCreateVersion = async (vData: { title: string; description: string; number: number; startDate: string }) => {\r\n    await supabaseService.createVersion(vData);\r\n    setShowNewVersion(false);\r\n    loadData();\r\n  };\r\n\r\n  if (loading || !data) return <div className=\"flex h-full items-center justify-center text-sm font-medium text-graphite-400\">Initializing Portal...</div>;\r\n\r\n  const getCycleProgress = () => {\r\n    if (!data.cycle) return { percent: 0, daysLeft: 0, totalDays: 30 };\r\n    const start = new Date(data.cycle.start_date).getTime();\r\n    const end = new Date(data.cycle.end_date).getTime();\r\n    const now = new Date().getTime();\r\n    const total = end - start;\r\n    const elapsed = now - start;\r\n    const percent = total > 0 ? Math.min(100, Math.max(0, (elapsed / total) * 100)) : 0;\r\n    const daysLeft = Math.max(0, Math.ceil((end - now) / (1000 * 60 * 60 * 24)));\r\n    const totalDays = Math.ceil(total / (1000 * 60 * 60 * 24));\r\n    return { percent, daysLeft, totalDays };\r\n  };\r\n  const cycleStats = getCycleProgress();\r\n\r\n  const formatDateShort = (dateStr: string) => {\r\n    if (!dateStr) return '';\r\n    const d = new Date(dateStr);\r\n    const month = d.toLocaleString('en-US', { month: 'short' }).toUpperCase();\r\n    const day = d.getDate().toString().padStart(2, '0');\r\n    return `${month} ${day}`;\r\n  };\r\n\r\n  const getChartData = () => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    if (chartView === 'week') {\r\n      const dayOfWeek = today.getDay();\r\n      const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;\r\n      const monday = new Date(today);\r\n      monday.setDate(today.getDate() + mondayOffset);\r\n\r\n      const weekDays = [];\r\n      for (let i = 0; i < 7; i++) {\r\n        const d = new Date(monday);\r\n        d.setDate(monday.getDate() + i);\r\n        weekDays.push(supabaseService.getLocalDateString(d));\r\n      }\r\n\r\n      return weekDays.map(dateStr => {\r\n        const existing = history.find(h => h.date === dateStr);\r\n        return existing || { date: dateStr, score: 0 };\r\n      });\r\n    }\r\n    else if (chartView === '30d') {\r\n      const sorted = [...history].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n      return sorted.slice(0, 30).reverse();\r\n    }\r\n    else {\r\n      // Cycle View\r\n      if (!data.cycle) return [...history].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).slice(0, 14).reverse();\r\n\r\n      const start = data.cycle.start_date;\r\n      const end = data.cycle.end_date;\r\n\r\n      const cycleData = history.filter(h => h.date >= start && h.date <= end);\r\n      return [...cycleData].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n    }\r\n  };\r\n\r\n  const chartData = getChartData();\r\n  const activeProjects = data.goals.filter(g => g.type === GoalType.TASK_PROJECT && g.cycle_id === data.cycle?.id);\r\n\r\n  const learningItems = data.cycle?.learning_focus\r\n    ? data.cycle.learning_focus.split(/[,\\n]/).map(s => s.trim()).filter(Boolean)\r\n    : [];\r\n\r\n  // Importance dots component\r\n  const ImportanceDots = ({ weight, isDone }: { weight: number; isDone: boolean }) => (\r\n    <div className=\"flex gap-0.5\" title={`Importance: ${weight}`}>\r\n      {[...Array(weight)].map((_, i) => (\r\n        <div\r\n          key={i}\r\n          className={`h-1.5 w-2.5 rounded-full transition-colors duration-300 ${isDone ? 'bg-bali-500' : 'bg-graphite-400 dark:bg-graphite-600'\r\n            }`}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-5 h-full\">\r\n\r\n      {/* Hero Header - Compact */}\r\n      <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-3 border-b border-graphite-200 dark:border-graphite-800 pb-4 flex-shrink-0\">\r\n        {data.version ? (\r\n          <div>\r\n            <div className=\"flex items-center gap-2 mb-1.5\">\r\n              <span className=\"inline-flex items-center rounded-md bg-pacific-500/10 border border-pacific-500/20 px-2.5 py-0.5 text-[10px] font-bold text-pacific-600 dark:text-pacific-400 uppercase tracking-wider\">\r\n                Version {data.version.number}.0\r\n              </span>\r\n              <span className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-wider\">Active</span>\r\n            </div>\r\n            <h1 className=\"text-2xl font-display font-bold text-graphite-900 dark:text-white tracking-tight leading-none\">\r\n              {data.version.title}\r\n            </h1>\r\n            <p className=\"mt-1.5 text-xs text-graphite-500 dark:text-graphite-400 max-w-2xl leading-snug line-clamp-1\">{data.version.description}</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col items-start gap-2\">\r\n            <div className=\"flex items-center gap-3 text-graphite-400\">\r\n              <div className=\"p-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg\"><Layers size={20} /></div>\r\n              <h1 className=\"text-lg font-bold text-graphite-900 dark:text-white\">System Standby</h1>\r\n            </div>\r\n            <button onClick={() => setShowNewVersion(true)} className=\"px-4 py-2 bg-pacific-600 text-white text-xs font-bold rounded-xl hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/20 flex items-center gap-2\">\r\n              <Plus size={14} /> Initialize Version 1.0\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {data.version && (\r\n          <div className=\"flex flex-col items-end\">\r\n            {data.cycle ? (\r\n              <div className=\"flex items-center gap-2 mb-1.5\">\r\n                <span className=\"h-2 w-2 rounded-full bg-pacific-500 animate-pulse\"></span>\r\n                <span className=\"text-[10px] font-bold uppercase text-graphite-500 dark:text-graphite-400 tracking-wider\">Cycle {data.cycle.sprint_number} Active</span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center gap-2 mb-1.5\">\r\n                <span className=\"h-2 w-2 rounded-full bg-red-500\"></span>\r\n                <span className=\"text-[10px] font-bold uppercase text-graphite-500 dark:text-graphite-400 tracking-wider\">No Active Cycle</span>\r\n              </div>\r\n            )}\r\n            <div className=\"flex items-center gap-2.5 text-[11px] font-mono font-medium text-graphite-500\">\r\n              <span>{formatDateShort(data.cycle?.start_date || '')}</span>\r\n              <span className=\"text-graphite-300 dark:text-graphite-600\">â†’</span>\r\n              <span className=\"text-pacific-500 font-bold\">{formatDateShort(data.cycle?.end_date || '')}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* MAIN GRID: 4-column layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-5 flex-shrink-0\">\r\n\r\n        {/* Col 1: Habit Tracker - 4 columns */}\r\n        <div className=\"lg:col-span-4 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-4 shadow-sm\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-[10px] font-bold text-graphite-500 uppercase tracking-widest flex items-center gap-1.5\">\r\n              <Calendar size={12} /> HABIT TRACKER\r\n            </h3>\r\n            <span className=\"text-[10px] font-mono text-graphite-400\">{data.todayLogs.filter(l => l.status).length}/{data.habits.length}</span>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {data.habits.map((habit) => {\r\n              const isDone = data.todayLogs.some(l => l.habit_id === habit.id && l.status);\r\n              const stats = data.habitStats[habit.id] || { currentStreak: 0, maxStreak: 0 };\r\n              const isToggling = togglingHabits.has(habit.id);\r\n              return (\r\n                <div\r\n                  key={habit.id}\r\n                  onClick={() => !isToggling && handleToggleHabit(habit.id, isDone)}\r\n                  className={`group relative rounded-xl p-3 transition-all duration-300 border\r\n                      ${isToggling ? 'cursor-wait opacity-60' : 'cursor-pointer'}\r\n                      ${isDone\r\n                      ? 'bg-bali-500/10 border-bali-500/30'\r\n                      : 'bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50 hover:shadow-sm'\r\n                    }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between gap-2\">\r\n                    <div className=\"flex items-center gap-2.5 min-w-0\">\r\n                      <div className={`h-5 w-5 flex-shrink-0 rounded-md flex items-center justify-center transition-all duration-300 border ${isDone\r\n                        ? 'bg-bali-500 border-bali-500 text-white shadow-sm shadow-bali-500/30'\r\n                        : 'bg-transparent border-graphite-300 dark:border-graphite-600 text-transparent group-hover:border-pacific-400'\r\n                        }`}>\r\n                        <Check size={12} strokeWidth={3} />\r\n                      </div>\r\n                      <span className={`text-sm font-semibold transition-colors truncate ${isDone ? 'text-bali-600 dark:text-bali-400 line-through decoration-bali-500/30' : 'text-graphite-700 dark:text-graphite-200'}`}>\r\n                        {habit.name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3 flex-shrink-0\">\r\n                      {/* Importance Dots */}\r\n                      <ImportanceDots weight={habit.weight} isDone={isDone} />\r\n                      {/* Streak indicators */}\r\n                      <div className=\"flex items-center gap-2 opacity-70\">\r\n                        <div className=\"flex items-center gap-0.5\" title=\"Current Streak\">\r\n                          <Flame size={11} className={stats.currentStreak > 0 ? \"text-orange-500\" : \"text-graphite-400\"} />\r\n                          <span className={`text-[10px] font-bold ${stats.currentStreak > 0 ? \"text-graphite-600 dark:text-graphite-300\" : \"text-graphite-400\"}`}>{stats.currentStreak}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-0.5\" title=\"Best Streak\">\r\n                          <Trophy size={11} className={stats.maxStreak > 0 ? \"text-yellow-500\" : \"text-graphite-400\"} />\r\n                          <span className={`text-[10px] font-bold ${stats.maxStreak > 0 ? \"text-graphite-600 dark:text-graphite-300\" : \"text-graphite-400\"}`}>{stats.maxStreak}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            {data.habits.length === 0 && (\r\n              <div className=\"text-center py-8 text-xs text-graphite-400 italic\">No habits defined for this cycle.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 2: Arc Cards STACKED VERTICALLY - 2 columns */}\r\n        <div className=\"lg:col-span-2 flex flex-col gap-4\">\r\n          {/* Efficiency Arc - Square */}\r\n          <div className=\"aspect-square rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm flex items-center justify-center\">\r\n            <ProgressArc\r\n              value={currentScore}\r\n              max={100}\r\n              label=\"Efficiency\"\r\n              color=\"pacific\"\r\n              size=\"sm\"\r\n            />\r\n          </div>\r\n          {/* Cycle Arc - Square */}\r\n          <div className=\"aspect-square rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm flex items-center justify-center\">\r\n            <ProgressArc\r\n              value={cycleStats.daysLeft}\r\n              max={cycleStats.totalDays}\r\n              label={`Cycle ${data.cycle?.sprint_number || '-'}`}\r\n              sublabel=\"Days Left\"\r\n              color=\"bali\"\r\n              size=\"sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 3: Cycle Goals - 3 columns */}\r\n        <div className=\"lg:col-span-3 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-4 shadow-sm\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-[10px] font-bold text-graphite-500 uppercase tracking-widest flex items-center gap-1.5\">\r\n              <Target size={12} /> CYCLE GOALS\r\n            </h3>\r\n          </div>\r\n          <div className=\"space-y-2.5\">\r\n            {activeProjects.map((project) => {\r\n              const isExpanded = expandedProjects.has(project.id);\r\n              const subtasks = project.subtasks || [];\r\n              const completed = subtasks.filter(t => t.done).length;\r\n              const total = subtasks.length;\r\n              const progress = total > 0 ? (completed / total) * 100 : 0;\r\n              const isDone = total > 0 && completed === total;\r\n\r\n              return (\r\n                <div\r\n                  key={project.id}\r\n                  className={`group relative rounded-xl border transition-all duration-300 overflow-hidden ${isExpanded || isDone\r\n                    ? 'bg-bali-500/10 border-bali-500/30'\r\n                    : 'bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50'\r\n                    }`}\r\n                >\r\n                  {/* Progress bar at top edge */}\r\n                  <div className=\"absolute top-0 left-0 right-0 h-1 bg-graphite-100 dark:bg-graphite-800/50\">\r\n                    <div className={`h-full transition-all duration-500 ${isDone ? 'bg-bali-500' : 'bg-pacific-500'}`} style={{ width: `${progress}%` }} />\r\n                  </div>\r\n\r\n                  <div className=\"p-3 pt-3.5\">\r\n                    <div className=\"flex items-center justify-between gap-2\">\r\n                      <h3 className={`text-xs font-bold leading-tight flex-1 ${isDone ? 'text-bali-600 dark:text-bali-400 line-through' : 'text-graphite-900 dark:text-white'}`}>\r\n                        {project.title}\r\n                      </h3>\r\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <span className=\"text-[10px] font-mono font-bold text-graphite-400\">{Math.round(progress)}%</span>\r\n                        <button\r\n                          onClick={() => toggleProject(project.id)}\r\n                          className=\"p-1 rounded-md hover:bg-graphite-100 dark:hover:bg-graphite-700 transition-colors\"\r\n                        >\r\n                          {isExpanded ? <ChevronUp size={14} className=\"text-graphite-400\" /> : <ChevronDown size={14} className=\"text-graphite-400\" />}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Collapsible subtasks */}\r\n                    {isExpanded && (\r\n                      <div className=\"pt-2.5 border-t border-graphite-100 dark:border-graphite-700 space-y-2 mt-2.5\">\r\n                        {subtasks.length > 0 ? subtasks.map((task, i) => (\r\n                          <div key={i} className=\"flex items-start gap-2\">\r\n                            <button\r\n                              onClick={() => handleToggleSubtask(project.id, i)}\r\n                              className={`mt-0.5 h-4 w-4 rounded border flex items-center justify-center transition-all flex-shrink-0 ${task.done\r\n                                ? 'bg-pacific-500 border-pacific-500 text-white'\r\n                                : 'border-graphite-300 dark:border-graphite-600 hover:border-pacific-400'\r\n                                }`}\r\n                            >\r\n                              {task.done && <Check size={10} strokeWidth={3} />}\r\n                            </button>\r\n                            <span\r\n                              className={`text-xs leading-snug cursor-pointer ${task.done ? 'text-graphite-400 line-through' : 'text-graphite-600 dark:text-graphite-300'}`}\r\n                              onClick={() => handleToggleSubtask(project.id, i)}\r\n                            >\r\n                              {task.name}\r\n                            </span>\r\n                          </div>\r\n                        )) : (\r\n                          <div className=\"text-center py-2 text-[10px] text-graphite-400 italic\">No subtasks defined</div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            {activeProjects.length === 0 && (\r\n              <div className=\"text-center py-8 text-xs text-graphite-400 italic\">No cycle goals defined.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 4: Focus Cards - 3 columns */}\r\n        <div className=\"lg:col-span-3 flex flex-col gap-3\">\r\n\r\n          {/* Learning Focus */}\r\n          <div className=\"rounded-xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2.5\">\r\n              <BookOpen size={13} className=\"text-pacific-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500\">Learning Focus</h3>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              {learningItems.length > 0 ? learningItems.map((item, i) => (\r\n                <span key={i} className=\"inline-flex items-center px-2.5 py-1 rounded-lg bg-pacific-500/10 border border-pacific-500/20 text-[11px] font-medium text-pacific-600 dark:text-pacific-400\">\r\n                  {item}\r\n                </span>\r\n              )) : (\r\n                <span className=\"text-[10px] text-graphite-400 italic\">Not defined</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Focus Priorities */}\r\n          <div className=\"rounded-xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2.5\">\r\n              <Target size={13} className=\"text-bali-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500\">Focus Priorities</h3>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {data.cycle?.focus_priorities?.map((p, i) => (\r\n                <div key={i} className=\"flex items-start gap-2.5\">\r\n                  <span className=\"flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-md bg-bali-500/10 text-[10px] font-bold text-bali-500\">{i + 1}</span>\r\n                  <span className=\"text-xs font-medium text-graphite-700 dark:text-graphite-300 leading-snug\">{p}</span>\r\n                </div>\r\n              ))}\r\n              {!data.cycle?.focus_priorities?.length && <div className=\"text-[10px] text-graphite-400 italic\">Not defined</div>}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Current Friction */}\r\n          <div className=\"rounded-xl bg-red-50 dark:bg-red-900/10 border border-red-200/50 dark:border-red-900/30 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2\">\r\n              <AlertTriangle size={13} className=\"text-red-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-red-500 dark:text-red-400\">Friction</h3>\r\n            </div>\r\n            {data.cycle?.problems ? (\r\n              <p className=\"text-xs italic text-red-700 dark:text-red-300/80 leading-relaxed\">\"{data.cycle.problems}\"</p>\r\n            ) : (\r\n              <p className=\"text-[10px] text-graphite-400 italic\">No friction defined</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* BOTTOM: Progress Chart - Full Width, Taller, Flex to Fill */}\r\n      <div className=\"rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-6 shadow-sm flex-1 min-h-[350px] flex flex-col\">\r\n        <div className=\"flex items-center justify-between mb-4 flex-shrink-0\">\r\n          <span className=\"text-[11px] font-bold uppercase text-graphite-500 flex items-center gap-2\">\r\n            <TrendingUp size={14} /> Progress Chart\r\n          </span>\r\n          <div className=\"flex gap-1 bg-graphite-100 dark:bg-graphite-800 p-1 rounded-xl\">\r\n            {(['week', '30d', 'cycle'] as ChartView[]).map((view) => (\r\n              <button\r\n                key={view}\r\n                onClick={() => setChartView(view)}\r\n                className={`px-3 py-1 text-[10px] font-bold rounded-lg transition-all ${chartView === view\r\n                  ? 'bg-white dark:bg-graphite-700 text-pacific-600 dark:text-pacific-400 shadow-sm'\r\n                  : 'text-graphite-400 hover:text-graphite-600 dark:hover:text-graphite-200'\r\n                  }`}\r\n              >\r\n                {view === 'week' ? 'WEEK' : view === '30d' ? '30 DAYS' : 'CYCLE'}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ensure this div has a height and flex-basis */}\r\n        <div className=\"flex-1 min-h-[300px] w-full relative\">\r\n          <PerformanceChart\r\n            data={chartData}\r\n            className=\"h-full w-full absolute inset-0\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {showNewVersion && (\r\n        <NewVersionModal\r\n          onClose={() => setShowNewVersion(false)}\r\n          onCreate={handleCreateVersion}\r\n          suggestedNumber={1}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAzaDZhNCA0IDAgMCAxIDQgNHYxNGEzIDMgMCAwIDAtMy0zSDJ6IiAvPgogIDxwYXRoIGQ9Ik0yMiAzaC02YTQgNCAwIDAgMC00IDR2MTRhMyAzIDAgMCAxIDMtM2g3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('BookOpen', [\n  ['path', { d: 'M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z', key: 'vv98re' }],\n  ['path', { d: 'M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z', key: '1cyq3y' }],\n]);\n\nexport default BookOpen;\n","import React from 'react';\r\n\r\ninterface ProgressArcProps {\r\n    value: number;\r\n    max: number;\r\n    label: string;\r\n    sublabel?: string;\r\n    color?: 'pacific' | 'bali';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const ProgressArc: React.FC<ProgressArcProps> = ({\r\n    value,\r\n    max,\r\n    label,\r\n    sublabel,\r\n    color = 'pacific',\r\n    size = 'md'\r\n}) => {\r\n    const percentage = max > 0 ? Math.min(100, Math.max(0, (value / max) * 100)) : 0;\r\n\r\n    // Arc configuration (270 degree arc)\r\n    const radius = size === 'sm' ? 36 : 44;\r\n    const strokeWidth = size === 'sm' ? 6 : 8;\r\n    const circumference = 2 * Math.PI * radius;\r\n    const arcLength = circumference * 0.75; // 270 degrees\r\n    const offset = arcLength * (1 - percentage / 100);\r\n\r\n    const colorClass = color === 'pacific'\r\n        ? 'text-pacific-500'\r\n        : 'text-bali-500';\r\n\r\n    const glowClass = color === 'pacific'\r\n        ? 'drop-shadow-[0_0_8px_rgba(14,165,233,0.4)]'\r\n        : 'drop-shadow-[0_0_8px_rgba(16,185,129,0.4)]';\r\n\r\n    const svgSize = size === 'sm' ? 100 : 120;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center\">\r\n            <div className=\"relative\" style={{ width: svgSize, height: svgSize * 0.75 }}>\r\n                <svg\r\n                    className=\"transform\"\r\n                    viewBox={`0 0 ${svgSize} ${svgSize * 0.85}`}\r\n                    style={{ width: '100%', height: '100%' }}\r\n                >\r\n                    {/* Background Arc */}\r\n                    <circle\r\n                        cx={svgSize / 2}\r\n                        cy={svgSize / 2}\r\n                        r={radius}\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth={strokeWidth}\r\n                        fill=\"transparent\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={`${arcLength} ${circumference}`}\r\n                        strokeDashoffset={0}\r\n                        className=\"text-graphite-100 dark:text-graphite-800\"\r\n                        transform={`rotate(135 ${svgSize / 2} ${svgSize / 2})`}\r\n                    />\r\n\r\n                    {/* Value Arc */}\r\n                    <circle\r\n                        cx={svgSize / 2}\r\n                        cy={svgSize / 2}\r\n                        r={radius}\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth={strokeWidth}\r\n                        fill=\"transparent\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={`${arcLength} ${circumference}`}\r\n                        strokeDashoffset={offset}\r\n                        className={`${colorClass} ${glowClass} transition-all duration-700 ease-out`}\r\n                        transform={`rotate(135 ${svgSize / 2} ${svgSize / 2})`}\r\n                    />\r\n                </svg>\r\n\r\n                {/* Center Value */}\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center\" style={{ paddingTop: size === 'sm' ? '8px' : '12px' }}>\r\n                    <span className={`font-display font-bold text-graphite-900 dark:text-white tracking-tight ${size === 'sm' ? 'text-2xl' : 'text-3xl'}`}>\r\n                        {typeof value === 'number' && value % 1 === 0 ? value : Math.round(value)}\r\n                        {label.includes('%') ? '' : ''}\r\n                    </span>\r\n                    {sublabel && (\r\n                        <span className=\"text-[8px] font-bold uppercase text-graphite-400 mt-0.5\">\r\n                            {sublabel}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Label Below */}\r\n            <div className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500 mt-1 text-center\">\r\n                {label}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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","ignoreList":[1]}