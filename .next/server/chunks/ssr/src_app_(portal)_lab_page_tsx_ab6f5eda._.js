module.exports=[17369,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(24129),e=a.i(11366),f=a.i(50429),g=a.i(11269),h=a.i(15618),i=a.i(80208),j=a.i(33508),k=a.i(17545),l=a.i(90669),m=a.i(50522),n=a.i(41675),o=a.i(5784),p=a.i(68976),q=a.i(14548),r=a.i(81560),s=a.i(33441),t=a.i(79257),u=a.i(67552),v=a.i(70106);let w=(0,v.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x=(0,v.default)("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]),y=(0,v.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var z=a.i(77156),A=a.i(41379),B=a.i(46201),C=a.i(60283),D=a.i(94391);let E=({cycle:a,isActive:d,onClose:e,onSave:f})=>{let[g,h]=(0,c.useState)(a.start_date),[i,k]=(0,c.useState)(a.end_date),[l,m]=(0,c.useState)(d);return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:e,children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white dark:bg-graphite-900 p-6 shadow-2xl border border-graphite-200 dark:border-graphite-800 animate-in zoom-in-95 duration-200",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{size:18,className:"text-pacific-500"})," Cycle Settings"]}),(0,b.jsx)("button",{onClick:e,type:"button",children:(0,b.jsx)(j.X,{size:18,className:"text-graphite-400 hover:text-white"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:g,onChange:a=>h(a.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-graphite-500 uppercase mb-1.5",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:i,onChange:a=>k(a.target.value),className:"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500"})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsxs)("label",{className:`flex items-center gap-3 p-3 rounded-xl border transition-colors cursor-pointer ${l?"bg-pacific-50 dark:bg-pacific-900/10 border-pacific-500/50":"bg-graphite-50 dark:bg-graphite-800 border-graphite-200 dark:border-graphite-700 hover:border-graphite-400"}`,children:[(0,b.jsx)("div",{className:`h-5 w-5 rounded-full border flex items-center justify-center transition-colors ${l?"bg-pacific-500 border-pacific-500":"border-graphite-400"}`,children:l&&(0,b.jsx)(s.Check,{size:12,className:"text-white"})}),(0,b.jsx)("input",{type:"checkbox",checked:l,onChange:a=>!d&&m(a.target.checked),className:"hidden",disabled:d}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-bold text-graphite-900 dark:text-white",children:"Active Status"}),(0,b.jsx)("div",{className:"text-xs text-graphite-500",children:d?"Currently the active cycle":"Set as current active cycle"})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-6 mt-2 border-t border-graphite-200 dark:border-graphite-800",children:[(0,b.jsx)("button",{onClick:e,type:"button",className:"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>f(a.id,g,i,l),type:"button",className:"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 hover:bg-pacific-500 transition-colors flex items-center gap-2",children:[(0,b.jsx)(q.Save,{size:14})," Save Changes"]})]})]})})},F=({isOpen:a,onClose:d,onSelect:f,currentCycleHabits:g,allHabits:h})=>{let[i,k]=(0,c.useState)("current"),[l,m]=(0,c.useState)("");if(!a)return null;let n=Array.from(new Map(h.map(a=>[a.name,a])).values()),o=("current"===i?g:n).filter(a=>a.name.toLowerCase().includes(l.toLowerCase()));return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4",onClick:d,children:(0,b.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[80vh]",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"p-6 border-b border-graphite-200 dark:border-graphite-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2",children:[(0,b.jsx)(t.Link,{size:18,className:"text-pacific-500"})," Link Habit"]}),(0,b.jsx)("button",{onClick:d,className:"text-graphite-400 hover:text-graphite-600 dark:hover:text-white",children:(0,b.jsx)(j.X,{size:18})})]}),(0,b.jsxs)("div",{className:"flex gap-2 p-1 bg-graphite-100 dark:bg-graphite-800 rounded-lg mb-4",children:[(0,b.jsx)("button",{onClick:()=>k("current"),className:`flex-1 py-1.5 text-xs font-bold uppercase rounded-md transition-all ${"current"===i?"bg-white dark:bg-graphite-700 text-graphite-900 dark:text-white shadow-sm":"text-graphite-500"}`,children:"Current Cycle"}),(0,b.jsx)("button",{onClick:()=>k("database"),className:`flex-1 py-1.5 text-xs font-bold uppercase rounded-md transition-all ${"database"===i?"bg-white dark:bg-graphite-700 text-graphite-900 dark:text-white shadow-sm":"text-graphite-500"}`,children:"Database"})]}),(0,b.jsx)("input",{value:l,onChange:a=>m(a.target.value),placeholder:"Search habits...",className:"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:o.length>0?o.map(a=>(0,b.jsxs)("button",{onClick:()=>f(a),className:"w-full text-left p-4 rounded-xl border border-graphite-200 dark:border-graphite-800 hover:border-pacific-500 dark:hover:border-pacific-500 bg-white dark:bg-graphite-800/50 hover:bg-pacific-50 dark:hover:bg-pacific-900/10 transition-all group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,b.jsx)("span",{className:"font-semibold text-graphite-900 dark:text-white group-hover:text-pacific-600 dark:group-hover:text-pacific-400 transition-colors",children:a.name}),"database"===i&&(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase text-graphite-400 bg-graphite-100 dark:bg-graphite-800 px-2 py-0.5 rounded",children:"Import"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-graphite-500",children:[(0,b.jsx)("span",{children:a.category}),(0,b.jsx)("span",{className:"text-graphite-300",children:"•"}),(0,b.jsx)("span",{className:a.weight===e.HabitWeight.HIGH?"text-pacific-500 font-bold":"",children:a.weight===e.HabitWeight.HIGH?"High Priority":a.weight===e.HabitWeight.MEDIUM?"Medium":"Low"})]})]},a.id)):(0,b.jsx)("div",{className:"text-center py-8 text-graphite-400 text-sm",children:"No habits found."})})]})})};a.s(["default",0,()=>{let[a,q]=(0,c.useState)(null),[v,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)(""),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(new Set),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)(null),[an,ao]=(0,c.useState)(6),ap=async()=>{try{let a=await d.supabaseService.getLabData();q(a);let b=await d.supabaseService.getAllHabits();Y(b);let c=await d.supabaseService.getSystemSettings();ao(c.cycles),a.activeCycleId&&!af&&ag(a.activeCycleId),G(!1)}catch(a){console.error(a),G(!1)}};(0,c.useEffect)(()=>{ap()},[]);let aq=async a=>{await d.supabaseService.createVersion(a),I(!1),ap()},ar=async(a,b,c)=>{await d.supabaseService.createCycle(a,b,c),K(!1),ap()},as=async a=>{await d.supabaseService.updateCycle(a),M(null),ap()},at=async(b,c)=>{b.preventDefault(),b.stopPropagation();try{if(!a)return;let b=a.cycles.find(a=>a.id===c);if(!b)return;let f=(b.status||e.EntityStatus.ACTIVE)===e.EntityStatus.ARCHIVED?e.EntityStatus.ACTIVE:e.EntityStatus.ARCHIVED,g=a.cycles.map(a=>a.id===c?{...a,status:f}:a);q({...a,cycles:g}),await d.supabaseService.updateCycle({...b,status:f}),await ap()}catch(a){console.error("Archive failed",a),ap()}},au=async(a,b)=>{if(a.preventDefault(),a.stopPropagation(),al!==b){am(b),setTimeout(()=>am(a=>a===b?null:a),3e3);return}try{q(a=>a?{...a,cycles:a.cycles.filter(a=>a.id!==b)}:null),af===b&&ag(null),await d.supabaseService.deleteCycle(b),await ap(),am(null)}catch(a){ap()}},av=async(b,c,e,f)=>{if(!a)return;let g=a.cycles.find(a=>a.id===b);if(g){let a={...g,start_date:c,end_date:e};await d.supabaseService.updateCycle(a)}f&&a.activeCycleId!==b&&await d.supabaseService.setCycleActive(b),O(null),ap()},aw=async(a,b)=>{if(!R)return;let c=`g-${crypto.randomUUID()}`,f={id:c,cycle_id:R,title:a.title,description:a.description,type:a.type};if(a.type===e.GoalType.TASK_PROJECT)f.subtasks=a.subtasks?.map(a=>{let b=a.match(/^(\s*)/),c=Math.floor((b?b[1]:"").replace(/\t/g,"  ").length/2);return{name:a.trim(),done:!1,level:c}})||[];else if(a.type===e.GoalType.CONSISTENCY_METRIC&&b){let a=b.id;if(b.cycle_id!==R){let e=`h-${crypto.randomUUID()}`,f={...b,id:e,cycle_id:R,linked_goal_id:c};await d.supabaseService.addHabit(f),a=e}else{let a={...b,linked_goal_id:c};await d.supabaseService.updateHabit(a)}f.linked_habit_id=a,f.current_streak=0}await d.supabaseService.addGoal(f),Q(!1),ap()},ax=async a=>{await d.supabaseService.deleteGoal(a),ap()},ay=async b=>{if(!a||!V)return;let c=b.cycle_id===a.activeCycleId,e=b.id;if(!c&&a.activeCycleId){let c={id:`h-${crypto.randomUUID()}`,cycle_id:a.activeCycleId,name:b.name,category:b.category,weight:b.weight,linked_goal_id:V};await d.supabaseService.addHabit(c),e=c.id}else{let a={...b,linked_goal_id:V};await d.supabaseService.updateHabit(a)}let f=a.goals.find(a=>a.id===V);if(f){let a={...f,linked_habit_id:e};await d.supabaseService.updateGoal(a)}U(!1),W(null),ap()},az=async(a,b)=>{if(!a.subtasks)return;let c=[...a.subtasks];c[b].done=!c[b].done;let e={...a,subtasks:c};await d.supabaseService.updateGoal(e),ap()},aA=async(a,b)=>{if(!a.subtasks)return;let c=a.subtasks.filter((a,c)=>c!==b),e={...a,subtasks:c};await d.supabaseService.updateGoal(e),ap()},aB=(a,b,c)=>{$({goalId:a,index:b}),aa(c)},aC=async(a,b)=>{if(!a.subtasks)return;let c=[...a.subtasks];c[b].name=_;let e={...a,subtasks:c};await d.supabaseService.updateGoal(e),$(null),aa(""),ap()},aD=async a=>{if(!ad.trim())return;let b=a.subtasks?[...a.subtasks]:[];b.push({name:ad,done:!1,level:0});let c={...a,subtasks:b};await d.supabaseService.updateGoal(c),ac(null),ae(""),ap()},aE=async(b,c)=>{if(L)if("delete"===b)await ax(c.id);else{let f={title:c.title,description:c.description,type:c.type,subtasks:c.subtasks};if("create"===b){let a=`g-${crypto.randomUUID()}`,b={id:a,cycle_id:L.id,title:f.title,description:f.description,type:f.type};if(f.type===e.GoalType.TASK_PROJECT)b.subtasks=c.subtasks?.map(a=>{let b=a.match(/^(\s*)/),c=Math.floor((b?b[1]:"").replace(/\t/g,"  ").length/2);return{name:a.trim(),done:!1,level:c}})||[];else if(f.type===e.GoalType.CONSISTENCY_METRIC&&c.linkedHabit){let e=c.linkedHabit.id;if(c.linkedHabit.cycle_id!==L.id){let b=`h-${crypto.randomUUID()}`,f={...c.linkedHabit,id:b,cycle_id:L.id,linked_goal_id:a};await d.supabaseService.addHabit(f),e=b}else{let b={...c.linkedHabit,linked_goal_id:a};await d.supabaseService.updateHabit(b)}b.linked_habit_id=e,b.current_streak=0}await d.supabaseService.addGoal(b)}else{let b=a?.goals.find(a=>a.id===c.id);if(!b)return;let g=b.subtasks;f.type===e.GoalType.TASK_PROJECT&&c.subtasks&&(g=c.subtasks.map(a=>{let b=a.match(/^(\s*)/),c=Math.floor((b?b[1]:"").replace(/\t/g,"  ").length/2);return{name:a.trim(),done:!1,level:c}}));let h={...b,title:f.title,description:f.description,type:f.type,subtasks:g,linked_habit_id:c.linkedHabit?.id};await d.supabaseService.updateGoal(h)}await ap()}},aF=async(b,c)=>{if(L){if("delete"===b)await d.supabaseService.deleteHabit(c.id);else if("create"===b){let a={id:`h-${crypto.randomUUID()}`,cycle_id:L.id,name:c.name,category:c.category,weight:c.weight};await d.supabaseService.addHabit(a)}else{let b={...a?.habits.find(a=>a.id===c.id),name:c.name,category:c.category,weight:c.weight};await d.supabaseService.updateHabit(b)}await ap()}},aG=async a=>{await d.supabaseService.deleteHabit(a),Y(await d.supabaseService.getAllHabits()),await ap()};if(v||!a)return(0,b.jsx)("div",{className:"flex h-full items-center justify-center font-medium text-graphite-400",children:"Loading Lab Environment..."});let aH=a.habits.filter(b=>b.cycle_id===a.activeCycleId),aI=a.cycles.some(a=>a.status===e.EntityStatus.ARCHIVED),aJ=a.cycles.filter(a=>aj||a.status!==e.EntityStatus.ARCHIVED);return(0,b.jsxs)("div",{className:"pb-10",children:[(0,b.jsxs)("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8",children:[a.version?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center justify-center rounded bg-pacific-500/10 border border-pacific-500/20 px-2 py-0.5 text-[10px] font-bold text-pacific-600 dark:text-pacific-400 uppercase tracking-wider",children:"Current Version"}),(0,b.jsxs)("span",{className:"text-pacific-500 font-mono font-bold text-sm",children:["v",a.version.number,".0"]})]}),(0,b.jsx)("h1",{className:"text-4xl font-display font-bold text-graphite-900 dark:text-white tracking-tight",children:a.version.title}),(0,b.jsxs)("p",{className:"text-graphite-500 italic mt-1",children:['"',a.version.description,'"']})]}):(0,b.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-graphite-400",children:[(0,b.jsx)("div",{className:"p-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg",children:(0,b.jsx)(k.Layers,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-graphite-900 dark:text-white",children:"System Standby"}),(0,b.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide",children:"No Active Version"})]})]}),(0,b.jsx)("p",{className:"text-sm text-graphite-500 max-w-md",children:"The system is currently dormant. Initialize the first Version to begin tracking cycles and habits."}),(0,b.jsxs)("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-pacific-600 text-white text-sm font-bold rounded-xl hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/20 flex items-center gap-2",children:[(0,b.jsx)(h.Plus,{size:16})," Initialize Version 1.0"]})]}),a.version&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-right mr-4 hidden md:block",children:[(0,b.jsxs)("div",{className:"text-[10px] font-bold text-graphite-400 uppercase tracking-widest flex items-center justify-end gap-2",children:[(0,b.jsx)(n.Calendar,{size:12})," Timeline"]}),(0,b.jsxs)("div",{className:"font-mono text-sm text-graphite-600 dark:text-graphite-300",children:[a.version.start_date," — ",a.version.end_date]})]}),(0,b.jsxs)("button",{onClick:()=>I(!0),type:"button",className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 text-sm font-bold hover:border-pacific-500 transition-colors",children:[(0,b.jsx)(h.Plus,{size:16})," New Version"]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("h3",{className:"text-xs font-bold text-graphite-400 uppercase tracking-widest flex items-center gap-2",children:[(0,b.jsx)(k.Layers,{size:14})," Cycles Log"]}),aI&&(0,b.jsxs)("button",{onClick:()=>ak(!aj),type:"button",className:"text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded bg-graphite-100 dark:bg-graphite-800 text-graphite-500 hover:text-pacific-500 transition-colors flex items-center gap-1",children:[aj?(0,b.jsx)(A.EyeOff,{size:12}):(0,b.jsx)(z.Eye,{size:12})," ",aj?"Hide Archived":"Show Archived"]})]}),a.version&&a.cycles.length<an&&(0,b.jsx)("button",{onClick:()=>K(!0),type:"button",className:"text-pacific-600 hover:text-pacific-500 p-2 rounded-lg bg-pacific-50 dark:bg-pacific-900/10",children:(0,b.jsx)(h.Plus,{size:20})})]}),aJ.map(c=>{let d=c.id===a.activeCycleId,k=c.status===e.EntityStatus.ARCHIVED,q=a.goals.filter(a=>a.cycle_id===c.id),v=af===c.id,z="text-graphite-900 dark:text-white",A="text-graphite-400 dark:text-graphite-500";return(0,b.jsxs)("div",{className:`rounded-3xl border transition-all duration-300 overflow-hidden bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-[#262629] transition-all duration-300 ${k?"opacity-70 grayscale border-dashed":!d&&!v?"opacity-60 hover:opacity-100":"opacity-100"}`,children:[(0,b.jsxs)("div",{onClick:a=>{a.target.closest("button")||ag(v?null:c.id)},className:`group/header p-6 border-b flex items-center justify-between cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${d?"border-graphite-200 dark:border-graphite-800":"border-graphite-100 dark:border-graphite-800"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[v?(0,b.jsx)(o.ChevronDown,{className:"text-pacific-500"}):(0,b.jsx)(m.ChevronRight,{className:"text-graphite-400"}),(0,b.jsxs)("h2",{className:`text-xl font-bold ${z} ${k?"line-through decoration-graphite-400":""}`,children:["Cycle ",c.sprint_number]}),(0,b.jsx)("div",{className:"flex items-center gap-4 relative z-10",onClick:a=>a.stopPropagation(),children:d?(0,b.jsxs)("button",{onClick:()=>O(c),type:"button",className:"px-3 py-1 rounded-lg bg-pacific-500/10 text-pacific-600 dark:text-pacific-400 border border-pacific-500/20 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 hover:bg-pacific-500/20 transition-colors",children:["Active ",(0,b.jsx)(n.Calendar,{size:12,className:"pointer-events-none"})]}):k?(0,b.jsxs)("span",{className:"px-3 py-1 rounded-lg bg-graphite-100 dark:bg-graphite-800 text-graphite-500 border border-graphite-200 dark:border-graphite-700 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,b.jsx)(y,{size:10})," Archived"]}):(0,b.jsxs)("button",{onClick:()=>O(c),type:"button",className:"px-3 py-1 rounded-lg bg-transparent text-graphite-400 border border-graphite-200 dark:border-graphite-700 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 hover:bg-graphite-100 dark:hover:bg-graphite-800 hover:text-graphite-600 dark:hover:text-graphite-300 transition-colors",children:["Configure ",(0,b.jsx)(n.Calendar,{size:12,className:"pointer-events-none"})]})})]}),(0,b.jsx)("div",{className:"flex items-center justify-end",children:(0,b.jsxs)("div",{className:`font-mono text-sm ${A} transition-all duration-300`,children:[c.start_date," — ",c.end_date]})})]}),v&&(0,b.jsxs)("div",{className:"p-8 grid grid-cols-1 lg:grid-cols-2 gap-12 animate-in slide-in-from-top-4 duration-300",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:`text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 ${d?"text-graphite-500":"text-graphite-500 dark:text-graphite-400"}`,children:[(0,b.jsx)(f.Target,{size:14})," Priorities"]}),(0,b.jsx)("div",{className:"space-y-3",children:c.focus_priorities.map((a,c)=>(0,b.jsxs)("div",{className:`flex items-center gap-4 p-3 rounded-xl border ${d?"bg-white/5 border-white/10":"bg-graphite-50 dark:bg-graphite-800 border-graphite-200 dark:border-graphite-700"}`,children:[(0,b.jsxs)("span",{className:"text-pacific-500 font-mono text-xs font-bold",children:["0",c+1,"."]}),(0,b.jsx)("span",{className:`font-medium ${z}`,children:a})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:`text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 ${d?"text-graphite-500":"text-graphite-500 dark:text-graphite-400"}`,children:[(0,b.jsx)(l.Activity,{size:14})," Identity Kernel"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:c.cch_list.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`text-[10px] font-bold mb-2 uppercase ${d?"text-graphite-500":"text-graphite-600 dark:text-graphite-400"}`,children:a.category}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.items.map((a,c)=>(0,b.jsx)("span",{className:`text-xs border px-2 py-1 rounded-md ${d?"text-graphite-400 border-graphite-700":"text-graphite-400 dark:text-graphite-500 border-graphite-200 dark:border-graphite-700"}`,children:a},c))})]},c))})]}),(0,b.jsxs)("div",{className:`p-6 rounded-2xl border ${d?"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-900/30":"bg-white dark:bg-graphite-800/50 border-red-100 dark:border-red-900/30 shadow-sm"}`,children:[(0,b.jsxs)("h4",{className:"text-[10px] font-bold text-red-500 dark:text-red-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[(0,b.jsx)(i.AlertTriangle,{size:12})," Friction"]}),(0,b.jsxs)("p",{className:`text-sm italic ${d?"text-graphite-700 dark:text-red-100/80":"text-graphite-600 dark:text-graphite-400"}`,children:['"',c.problems,'"']})]}),(0,b.jsxs)("div",{className:"pt-6 border-t border-graphite-200 dark:border-graphite-800 flex flex-wrap items-center gap-3 relative z-10",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("button",{onClick:()=>M(c),type:"button",className:"flex items-center gap-2 px-4 py-2 bg-graphite-100 dark:bg-graphite-800 text-graphite-600 dark:text-graphite-300 rounded-xl text-sm font-bold hover:bg-graphite-200 dark:hover:bg-graphite-700 transition-colors",children:[(0,b.jsx)(p.Edit3,{size:16,className:"pointer-events-none"})," Edit Content"]}),(0,b.jsx)("button",{onClick:a=>at(a,c.id),type:"button",className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all border ${k?"bg-bali-50 dark:bg-bali-900/20 text-bali-600 dark:text-bali-400 border-bali-200 dark:border-bali-800":"bg-graphite-50 dark:bg-graphite-900/50 text-graphite-500 hover:text-pacific-600 dark:hover:text-pacific-400 border-transparent hover:border-pacific-200 dark:hover:border-pacific-800"}`,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{size:16,className:"pointer-events-none"})," Restore"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{size:16,className:"pointer-events-none"})," Archive"]})}),(0,b.jsxs)("button",{onClick:a=>au(a,c.id),type:"button",className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all duration-200 ${al===c.id?"bg-red-500 text-white border-red-500 shadow-lg shadow-red-500/30 scale-105":"bg-graphite-50 dark:bg-graphite-900/50 text-graphite-400 hover:text-red-500 border border-transparent hover:border-red-200 dark:hover:border-red-900/30"}`,children:[(0,b.jsx)(r.Trash2,{size:16,className:"pointer-events-none"}),al===c.id?"Confirm Delete?":"Delete"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h4",{className:`text-xs font-bold uppercase tracking-widest flex items-center gap-2 ${d?"text-graphite-500":"text-graphite-500 dark:text-graphite-400"}`,children:[(0,b.jsx)(g.CheckCircle2,{size:14})," Goals & Objectives"]}),(0,b.jsx)("button",{onClick:()=>{S(c.id),Q(!0)},type:"button",className:"text-[10px] font-bold text-pacific-400 hover:text-white flex items-center gap-1",children:"+ ADD GOAL"})]}),(0,b.jsx)("div",{className:"space-y-4",children:q.map(a=>{let c=aH.find(b=>b.id===a.linked_habit_id),d=a.type===e.GoalType.TASK_PROJECT,f=ah.has(a.id),g=0,k=!1;if(a.type===e.GoalType.TASK_PROJECT){let b=a.subtasks?.length||0,c=a.subtasks?.filter(a=>a.done).length||0;b>0&&(g=c/b*100,k=!0)}else a.type===e.GoalType.CONSISTENCY_METRIC&&(g=Math.min(100,100*(1-Math.exp(-.061*(a.current_streak||0)))),k=!0);return(0,b.jsxs)("div",{onClick:d?()=>{var b;let c;return b=a.id,void((c=new Set(ah)).has(b)?c.delete(b):c.add(b),ai(c))}:void 0,className:`group relative p-5 rounded-2xl border transition-all overflow-hidden bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/30 ${d?"cursor-pointer":""}`,children:[k&&(0,b.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-graphite-200 dark:bg-black/20",children:(0,b.jsx)("div",{className:`h-full transition-all duration-500 ${g>=100?"bg-bali-500":"bg-pacific-500"}`,style:{width:`${g}%`}})}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:`font-bold text-lg ${z}`,children:a.title}),(0,b.jsx)("p",{className:`text-sm leading-relaxed mt-1 ${A}`,children:a.description})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,b.jsx)("div",{className:"text-graphite-400 group-hover:text-pacific-500 transition-colors",children:f?(0,b.jsx)(o.ChevronDown,{size:16}):(0,b.jsx)(u.ChevronUp,{size:16})}),(0,b.jsx)("div",{className:"text-xs font-bold text-graphite-500 uppercase tracking-wider",children:a.type===e.GoalType.CONSISTENCY_METRIC?"Consistency":"Project"})]})]}),a.type===e.GoalType.CONSISTENCY_METRIC&&(0,b.jsx)("div",{className:"mt-4 pl-1",onClick:a=>a.stopPropagation(),children:(0,b.jsxs)("button",{onClick:()=>{W(a.id),U(!0)},type:"button",className:"flex items-center gap-3 px-3 py-2 rounded-lg border transition-all group/habit w-full sm:w-auto bg-white dark:bg-graphite-900 border-graphite-200 dark:border-graphite-700",children:[(0,b.jsx)("div",{className:"p-1.5 rounded-md bg-pacific-50 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400",children:(0,b.jsx)(l.Activity,{size:14})}),(0,b.jsxs)("div",{className:"flex flex-col items-start",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold text-graphite-400 uppercase tracking-wider",children:"Linked Habit"}),c?(0,b.jsx)("span",{className:`text-xs font-bold ${z}`,children:c.name}):(0,b.jsx)("span",{className:"text-xs font-bold text-red-400",children:"Select Habit Source"})]}),c?(0,b.jsx)(t.Link,{size:12,className:"ml-2 text-graphite-400 group-hover/habit:text-pacific-500 transition-colors opacity-0 group-hover/habit:opacity-100"}):(0,b.jsx)(i.AlertTriangle,{size:12,className:"ml-2 text-red-400"})]})}),a.type===e.GoalType.TASK_PROJECT&&!f&&(0,b.jsxs)("div",{className:"mt-4 pl-1 animate-in slide-in-from-top-1 fade-in duration-200",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"space-y-2 mb-3",children:a.subtasks?.map((c,d)=>(0,b.jsxs)("div",{className:`flex items-center gap-3 text-sm group/task min-h-[28px] ${A}`,style:{paddingLeft:`${1.5*(c.level||0)}rem`},children:[(c.level||0)>0&&(0,b.jsx)(x,{size:12,className:"text-graphite-500 dark:text-graphite-600 flex-shrink-0"}),Z?.goalId===a.id&&Z.index===d?(0,b.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,b.jsx)("input",{value:_,onChange:a=>aa(a.target.value),className:"flex-1 bg-graphite-900 dark:bg-white border border-pacific-500 rounded px-2 py-1 text-white dark:text-graphite-900 text-sm focus:outline-none",autoFocus:!0,onKeyDown:b=>{"Enter"===b.key&&aC(a,d),"Escape"===b.key&&$(null)}}),(0,b.jsx)("button",{onClick:()=>aC(a,d),className:"text-pacific-500 hover:text-white",children:(0,b.jsx)(s.Check,{size:16})}),(0,b.jsx)("button",{onClick:()=>$(null),className:"text-red-500 hover:text-white",children:(0,b.jsx)(j.X,{size:16})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>az(a,d),type:"button",className:`h-4 w-4 flex-shrink-0 rounded border flex items-center justify-center transition-all ${c.done?"bg-pacific-500 border-pacific-500 text-white":"border-graphite-600 dark:border-graphite-400 hover:border-pacific-500"}`,children:c.done&&(0,b.jsx)(s.Check,{size:10})}),(0,b.jsx)("span",{className:`flex-1 transition-all ${c.done?"line-through opacity-50":""}`,onDoubleClick:()=>aB(a.id,d,c.name),children:c.name}),(0,b.jsxs)("div",{className:"opacity-0 group-hover/task:opacity-100 flex items-center gap-2 transition-opacity",children:[(0,b.jsx)("button",{onClick:()=>aB(a.id,d,c.name),className:"text-graphite-500 hover:text-pacific-400",children:(0,b.jsx)(p.Edit3,{size:12})}),(0,b.jsx)("button",{onClick:()=>aA(a,d),className:"text-graphite-500 hover:text-red-500",children:(0,b.jsx)(r.Trash2,{size:12})})]})]})]},d))}),ab===a.id?(0,b.jsxs)("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[(0,b.jsx)("input",{value:ad,onChange:a=>ae(a.target.value),className:"flex-1 bg-graphite-900 dark:bg-white border border-graphite-600 dark:border-graphite-300 rounded px-2 py-1 text-white dark:text-graphite-900 text-sm focus:outline-none focus:border-pacific-500",placeholder:"New item...",autoFocus:!0,onKeyDown:b=>{"Enter"===b.key&&aD(a),"Escape"===b.key&&(ac(null),ae(""))}}),(0,b.jsx)("button",{onClick:()=>aD(a),className:"p-1 bg-pacific-600 text-white rounded hover:bg-pacific-500",children:(0,b.jsx)(h.Plus,{size:14})}),(0,b.jsx)("button",{onClick:()=>{ac(null),ae("")},className:"p-1 text-graphite-500 hover:text-white",children:(0,b.jsx)(j.X,{size:14})})]}):(0,b.jsxs)("button",{onClick:()=>ac(a.id),className:"text-[10px] font-bold text-graphite-500 hover:text-pacific-400 flex items-center gap-1 transition-colors mt-2",children:[(0,b.jsx)(h.Plus,{size:12})," ADD ITEM"]})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),ax(a.id)},className:"absolute bottom-4 right-4 text-graphite-600 dark:text-graphite-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-2",children:(0,b.jsx)(r.Trash2,{size:16})})]},a.id)})})]})]})]},c.id)}),!a.version&&0===aJ.length&&(0,b.jsx)("div",{className:"text-center py-12 text-graphite-400 text-sm",children:"System Empty. Initialize a version to proceed."}),a.version&&!aI&&0===aJ.length&&(0,b.jsx)("div",{className:"text-center py-12 text-graphite-400 text-sm",children:"No cycles found. Start by creating a new version or cycle."}),aI&&0===aJ.length&&(0,b.jsx)("div",{className:"text-center py-12 text-graphite-400 text-sm",children:'All cycles are archived. Click "Show Archived" to view them.'})]}),H&&(0,b.jsx)(D.NewVersionModal,{onClose:()=>I(!1),onCreate:aq,suggestedNumber:(a.version?.number||0)+1}),J&&(0,b.jsx)(C.CycleEditorModal,{mode:"create",goals:[],habits:[],allHabits:X,suggestedSprintNumber:a.cycles.length+1,onClose:()=>K(!1),onCreate:ar,onDeleteHabitFromDB:aG,maxCycles:an,versionStartDate:a.version?.start_date,existingCycles:a.cycles}),L&&(0,b.jsx)(C.CycleEditorModal,{mode:"edit",cycle:L,goals:a.goals.filter(a=>a.cycle_id===L.id),habits:a.habits.filter(a=>a.cycle_id===L.id),allHabits:X,onClose:()=>M(null),onSaveCycle:as,onManageGoal:aE,onManageHabit:aF,onRenameCategory:async(a,b)=>{for(let c of(await d.supabaseService.getAllHabits()).filter(b=>b.category===a))await d.supabaseService.updateHabit({...c,category:b});await ap()},onDeleteCategory:async a=>{for(let b of(await d.supabaseService.getAllHabits()).filter(b=>b.category===a))await d.supabaseService.updateHabit({...b,category:"Uncategorized"});await ap()},onDeleteHabitFromDB:aG,maxCycles:an}),N&&(0,b.jsx)(E,{cycle:N,isActive:a.activeCycleId===N.id,onClose:()=>O(null),onSave:av}),P&&(0,b.jsx)(B.GoalFormModal,{isOpen:P,onClose:()=>Q(!1),onSave:aw,currentCycleHabits:a.habits.filter(a=>a.cycle_id===R),allHabits:X}),(0,b.jsx)(F,{isOpen:T,onClose:()=>U(!1),onSelect:ay,currentCycleHabits:aH,allHabits:X})]})}],17369)}];

//# sourceMappingURL=src_app_%28portal%29_lab_page_tsx_ab6f5eda._.js.map