{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/PerformanceChart.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\ninterface PerformanceChartProps {\r\n    data: Array<{\r\n        date: string;\r\n        score: number;\r\n        details?: Array<{ habit: { name: string }; done: boolean }>;\r\n        [key: string]: any\r\n    }>;\r\n    className?: string;\r\n    showGrid?: boolean;\r\n    color?: string;\r\n    onDataSelect?: (data: any) => void;\r\n}\r\n\r\nconst CustomTooltip = ({ active, payload, label }: any) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload;\r\n        const completedHabits = data.details?.filter((d: any) => d.done) || [];\r\n\r\n        return (\r\n            <div className=\"bg-graphite-900/90 backdrop-blur-md border border-white/10 p-3 rounded-xl shadow-2xl min-w-[150px] animate-in fade-in zoom-in-95 duration-200\">\r\n                <div className=\"flex justify-between items-start mb-2 border-b border-white/10 pb-2\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-graphite-400 font-bold uppercase tracking-wider\">\r\n                            {new Date(label).toLocaleDateString('en-US', { month: 'short', day: 'numeric', weekday: 'short' })}\r\n                        </p>\r\n                        <p className=\"text-xl font-bold text-white flex items-center gap-1 leading-none mt-1\">\r\n                            {payload[0].value}%\r\n                        </p>\r\n                    </div>\r\n                    <div className={`w-2 h-2 rounded-full mt-1 ${payload[0].value >= 80 ? 'bg-bali-500' : 'bg-pacific-500'}`}></div>\r\n                </div>\r\n\r\n                <div className=\"space-y-1.5\">\r\n                    {completedHabits.length > 0 ? (\r\n                        <>\r\n                            {completedHabits.slice(0, 4).map((detail: any, i: number) => (\r\n                                <div key={i} className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-1 h-1 rounded-full bg-white/50 shrink-0\"></div>\r\n                                    <span className=\"text-[9px] text-graphite-300 font-medium truncate max-w-[120px]\">\r\n                                        {detail.habit.name}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                            {completedHabits.length > 4 && (\r\n                                <p className=\"text-[9px] text-graphite-500 pl-3 italic\">\r\n                                    + {completedHabits.length - 4} more\r\n                                </p>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <p className=\"text-[9px] text-graphite-500 italic\">No habits recorded.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\n// Custom X-axis tick formatter\r\nconst formatXAxisLabel = (dateStr: string) => {\r\n    if (!dateStr) return '';\r\n    const d = new Date(dateStr);\r\n    const day = d.getDate();\r\n    const weekday = d.toLocaleDateString('en-US', { weekday: 'short' }).slice(0, 2).toUpperCase();\r\n    return `${weekday}`;\r\n};\r\n\r\nexport const PerformanceChart: React.FC<PerformanceChartProps> = ({\r\n    data,\r\n    className = \"h-64 w-full\",\r\n    showGrid = true,\r\n    color = \"#0ea5e9\",\r\n    onDataSelect\r\n}) => {\r\n    return (\r\n        <div className={`select-none ${className}`}>\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <AreaChart\r\n                    data={data}\r\n                    margin={{ top: 10, right: 10, left: 5, bottom: 20 }}\r\n                    onClick={(e) => {\r\n                        if (onDataSelect && e && e.activePayload && e.activePayload[0]) {\r\n                            onDataSelect(e.activePayload[0].payload);\r\n                        }\r\n                    }}\r\n                >\r\n                    <defs>\r\n                        <linearGradient id=\"colorScore\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                            <stop offset=\"5%\" stopColor={color} stopOpacity={0.25} />\r\n                            <stop offset=\"95%\" stopColor={color} stopOpacity={0} />\r\n                        </linearGradient>\r\n                    </defs>\r\n\r\n                    {showGrid && (\r\n                        <CartesianGrid\r\n                            strokeDasharray=\"3 3\"\r\n                            stroke=\"#52525b\"\r\n                            opacity={0.3}\r\n                            vertical={false}\r\n                        />\r\n                    )}\r\n\r\n                    <XAxis\r\n                        dataKey=\"date\"\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#a1a1aa', fontSize: 10, fontWeight: 600, fontFamily: 'monospace' }}\r\n                        tickFormatter={formatXAxisLabel}\r\n                        interval={0}\r\n                        dy={10}\r\n                    />\r\n\r\n                    <YAxis\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#a1a1aa', fontSize: 12, fontWeight: 600, fontFamily: 'monospace' }}\r\n                        domain={[0, 100]}\r\n                        ticks={[0, 50, 100]}\r\n                        width={45}\r\n                        interval={0}\r\n                        dx={-5}\r\n                    />\r\n\r\n                    <Tooltip\r\n                        content={<CustomTooltip />}\r\n                        cursor={{ stroke: color, strokeWidth: 1, strokeDasharray: '4 4', opacity: 0.5 }}\r\n                    />\r\n\r\n                    <Area\r\n                        type=\"monotone\"\r\n                        dataKey=\"score\"\r\n                        stroke={color}\r\n                        strokeWidth={2.5}\r\n                        fillOpacity={1}\r\n                        fill=\"url(#colorScore)\"\r\n                        activeDot={{ r: 6, strokeWidth: 2, fill: '#fff', stroke: color }}\r\n                        animationDuration={800}\r\n                    />\r\n                </AreaChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n};\r\n"],"names":["CustomTooltip","active","payload","label","length","data","completedHabits","details","filter","d","done","className","Date","toLocaleDateString","month","day","weekday","value","slice","map","detail","i","habit","name","formatXAxisLabel","dateStr","getDate","toUpperCase","PerformanceChart","showGrid","color","onDataSelect","width","height","margin","top","right","left","bottom","onClick","e","activePayload","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","strokeDasharray","stroke","opacity","vertical","dataKey","axisLine","tickLine","tick","fill","fontSize","fontWeight","fontFamily","tickFormatter","interval","dy","domain","ticks","dx","content","cursor","strokeWidth","type","fillOpacity","activeDot","r","animationDuration"],"mappings":"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"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/history/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { CalendarDays, TrendingUp, BarChart3, ChevronDown, CheckCircle2, XCircle, Calendar, RefreshCw, MousePointerClick, Flame, Trophy } from 'lucide-react';\r\nimport { Habit, Cycle } from '@/types/types';\r\nimport { PerformanceChart } from '@/components/PerformanceChart';\r\n\r\ntype TimeRange = '15d' | '30d' | '90d' | 'cycle';\r\n\r\ninterface DayData {\r\n    date: string;\r\n    score: number;\r\n    details: { habit: Habit; done: boolean }[];\r\n}\r\n\r\nconst HistoryPage: React.FC = () => {\r\n    const [rawData, setRawData] = useState<DayData[]>([]);\r\n    const [cycles, setCycles] = useState<Cycle[]>([]);\r\n    const [habitStats, setHabitStats] = useState<Record<string, { currentStreak: number; maxStreak: number }>>({});\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Controls\r\n    const [timeRange, setTimeRange] = useState<TimeRange>('15d');\r\n    const [selectedCycleId, setSelectedCycleId] = useState<string | null>(null);\r\n\r\n    // Interactive Selection\r\n    const [selectedDate, setSelectedDate] = useState<string | null>(null);\r\n    const [hoverDate, setHoverDate] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        supabaseService.getHistoryData().then((res: any) => {\r\n            setRawData(res.dailyScores);\r\n            setCycles(res.cycles);\r\n            setHabitStats(res.habitStats);\r\n            if (res.cycles.length > 0) setSelectedCycleId(res.cycles[0].id);\r\n\r\n            // Default select today\r\n            const today = new Date().toISOString().split('T')[0];\r\n            setSelectedDate(today);\r\n\r\n            setLoading(false);\r\n        });\r\n    }, []);\r\n\r\n    // Filter Data based on controls\r\n    const displayData = useMemo(() => {\r\n        let filtered = [...rawData];\r\n\r\n        if (timeRange === 'cycle' && selectedCycleId) {\r\n            const cycle = cycles.find((c: Cycle) => c.id === selectedCycleId);\r\n            if (cycle) {\r\n                filtered = filtered.filter((d: DayData) => d.date >= cycle.start_date && d.date <= cycle.end_date);\r\n            }\r\n        } else {\r\n            // Date based ranges\r\n            const daysToTake = timeRange === '15d' ? 15 : timeRange === '30d' ? 30 : 90;\r\n            filtered = filtered.slice(-daysToTake);\r\n        }\r\n        return filtered;\r\n    }, [rawData, timeRange, selectedCycleId, cycles]);\r\n\r\n    // Derived Stats\r\n    const averageScore = displayData.length > 0\r\n        ? Math.round(displayData.reduce((acc: number, curr: DayData) => acc + curr.score, 0) / displayData.length)\r\n        : 0;\r\n\r\n    const perfectDays = displayData.filter(d => d.score === 100).length;\r\n\r\n    // Selected Day Details\r\n    const selectedDayDetails = useMemo(() => {\r\n        if (!selectedDate) return null;\r\n        return rawData.find(d => d.date === selectedDate) || null;\r\n    }, [selectedDate, rawData]);\r\n\r\n    // Format helpers\r\n    const formatDate = (dateStr: string) => {\r\n        const d = new Date(dateStr);\r\n        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    };\r\n\r\n    if (loading) return <div className=\"flex h-full items-center justify-center font-medium text-graphite-400\">Loading Temporal Records...</div>;\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col gap-6\">\r\n            {/* Header & Controls */}\r\n            <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-2 border-b border-graphite-200 dark:border-graphite-800\">\r\n                <div>\r\n                    <h2 className=\"text-xs font-bold uppercase tracking-widest text-graphite-500 mb-2 flex items-center gap-2\">\r\n                        <BarChart3 size={14} /> Performance Analytics\r\n                    </h2>\r\n                    <h1 className=\"text-3xl font-display font-bold text-graphite-900 dark:text-white\">\r\n                        Temporal Records\r\n                    </h1>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4\">\r\n                    {/* Cycle Selector (Only visible if 'cycle' mode) */}\r\n                    {timeRange === 'cycle' && (\r\n                        <div className=\"relative\">\r\n                            <select\r\n                                value={selectedCycleId || ''}\r\n                                onChange={(e: React.ChangeEvent<HTMLSelectElement>) => setSelectedCycleId(e.target.value)}\r\n                                className=\"appearance-none bg-white dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 pr-10 text-sm font-bold text-graphite-700 dark:text-graphite-200 focus:outline-none focus:border-pacific-500\"\r\n                            >\r\n                                {cycles.map((c: Cycle) => (\r\n                                    <option key={c.id} value={c.id}>Cycle {c.sprint_number}</option>\r\n                                ))}\r\n                            </select>\r\n                            <ChevronDown size={16} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-graphite-400 pointer-events-none\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Range Toggles */}\r\n                    <div className=\"flex bg-white dark:bg-graphite-900 p-1 rounded-xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                        {(['15d', '30d', '90d', 'cycle'] as TimeRange[]).map(range => (\r\n                            <button\r\n                                key={range}\r\n                                onClick={() => setTimeRange(range)}\r\n                                className={`px-4 py-1.5 rounded-lg text-xs font-bold uppercase transition-all ${timeRange === range\r\n                                    ? 'bg-graphite-900 text-white dark:bg-white dark:text-graphite-900 shadow-md'\r\n                                    : 'text-graphite-500 hover:text-graphite-900 dark:hover:text-white'\r\n                                    }`}\r\n                            >\r\n                                {range === 'cycle' ? 'Cycle' : range.toUpperCase()}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Main Content Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1 min-h-0\">\r\n\r\n                {/* LEFT: Chart Area */}\r\n                <div className=\"lg:col-span-8 flex flex-col gap-6\">\r\n\r\n                    {/* Stats Row */}\r\n                    <div className=\"grid grid-cols-3 gap-4\">\r\n                        <div className=\"p-5 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                            <div className=\"text-xs font-bold text-graphite-400 uppercase tracking-wider mb-1\">Avg Score</div>\r\n                            <div className=\"text-3xl font-bold text-pacific-600 dark:text-pacific-400\">{averageScore}%</div>\r\n                        </div>\r\n                        <div className=\"p-5 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                            <div className=\"text-xs font-bold text-graphite-400 uppercase tracking-wider mb-1\">Perfect Days</div>\r\n                            <div className=\"text-3xl font-bold text-bali-500\">{perfectDays}</div>\r\n                        </div>\r\n                        <div className=\"p-5 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                            <div className=\"text-xs font-bold text-graphite-400 uppercase tracking-wider mb-1\">Data Points</div>\r\n                            <div className=\"text-3xl font-bold text-graphite-700 dark:text-graphite-200\">{displayData.length}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chart Container */}\r\n                    <div className=\"rounded-3xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-6 shadow-sm flex flex-col\">\r\n                        <div className=\"mb-6 flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-2 text-pacific-500\">\r\n                                <TrendingUp size={20} />\r\n                                <h3 className=\"font-bold text-graphite-900 dark:text-white\">Performance Trajectory</h3>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-4 text-xs font-mono text-graphite-400\">\r\n                                <span>{displayData.length > 0 ? `${formatDate(displayData[0].date)} — ${formatDate(displayData[displayData.length - 1].date)}` : ''}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <PerformanceChart\r\n                            data={displayData}\r\n                            className=\"h-64 w-full\"\r\n                            onDataSelect={(item: any) => setSelectedDate(item.date)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* RIGHT: Day Inspector Panel */}\r\n                <div className=\"lg:col-span-4 flex flex-col h-full min-h-[400px]\">\r\n                    <div className=\"flex-1 rounded-3xl bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-800 p-1 shadow-inner flex flex-col\">\r\n                        {selectedDayDetails ? (\r\n                            <div className=\"flex flex-col h-full bg-white dark:bg-graphite-900 rounded-[20px] shadow-sm overflow-hidden animate-in slide-in-from-right-4 duration-300\">\r\n                                {/* Inspector Header */}\r\n                                <div className=\"p-6 border-b border-graphite-100 dark:border-graphite-800 bg-graphite-50/50 dark:bg-graphite-900\">\r\n                                    <div className=\"flex items-center justify-between mb-4\">\r\n                                        <span className=\"text-xs font-bold uppercase tracking-widest text-graphite-400 flex items-center gap-2\">\r\n                                            <Calendar size={14} /> Day Inspector\r\n                                        </span>\r\n                                        {selectedDayDetails.score >= 90 && (\r\n                                            <span className=\"px-2 py-0.5 rounded bg-bali-100 dark:bg-bali-900/30 text-bali-600 dark:text-bali-400 text-[10px] font-bold uppercase\">\r\n                                                Elite Performance\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-baseline justify-between\">\r\n                                        <h2 className=\"text-2xl font-display font-bold text-graphite-900 dark:text-white\">\r\n                                            {new Date(selectedDayDetails.date).toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}\r\n                                        </h2>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"text-3xl font-bold text-pacific-600 dark:text-pacific-400\">{selectedDayDetails.score}%</div>\r\n                                            <div className=\"text-[10px] text-graphite-400 font-bold uppercase\">Daily Score</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Inspector Content: Habits List */}\r\n                                <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n                                    {selectedDayDetails.details.map((detail: { habit: Habit; done: boolean }, idx: number) => {\r\n                                        const stats = habitStats[detail.habit.id] || { currentStreak: 0, maxStreak: 0 };\r\n                                        return (\r\n                                            <div key={idx} className=\"flex items-center justify-between group\">\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className={`h-8 w-8 rounded-full flex items-center justify-center transition-colors ${detail.done\r\n                                                        ? 'bg-bali-100 text-bali-600 dark:bg-bali-900/20 dark:text-bali-400'\r\n                                                        : 'bg-red-100 text-red-500 dark:bg-red-900/20 dark:text-red-400'\r\n                                                        }`}>\r\n                                                        {detail.done ? <CheckCircle2 size={16} /> : <XCircle size={16} />}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <div className={`text-sm font-medium ${detail.done ? 'text-graphite-900 dark:text-white' : 'text-graphite-500 dark:text-graphite-400'}`}>\r\n                                                            {detail.habit.name}\r\n                                                        </div>\r\n                                                        <div className=\"flex items-center gap-3 mt-0.5\">\r\n                                                            <div className=\"text-[10px] text-graphite-400 uppercase tracking-wide\">\r\n                                                                {detail.habit.category} • Weight: {detail.habit.weight}\r\n                                                            </div>\r\n                                                            <div className=\"h-3 w-[1px] bg-graphite-200 dark:bg-graphite-700\"></div>\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <div className=\"flex items-center gap-0.5\" title=\"Current Streak\">\r\n                                                                    <Flame size={10} className={stats.currentStreak > 0 ? \"text-orange-500\" : \"text-graphite-300 dark:text-graphite-600\"} />\r\n                                                                    <span className={`text-[10px] font-bold ${stats.currentStreak > 0 ? \"text-graphite-600 dark:text-graphite-400\" : \"text-graphite-300 dark:text-graphite-600\"}`}>{stats.currentStreak}</span>\r\n                                                                </div>\r\n                                                                <div className=\"flex items-center gap-0.5\" title=\"Max Streak\">\r\n                                                                    <Trophy size={10} className={stats.maxStreak > 0 ? \"text-yellow-600\" : \"text-graphite-300 dark:text-graphite-600\"} />\r\n                                                                    <span className=\"text-[10px] font-bold text-graphite-300 dark:text-graphite-600\">{stats.maxStreak}</span>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className={`text-xs font-bold ${detail.done ? 'text-bali-500' : 'text-red-500 opacity-0 group-hover:opacity-100 transition-opacity'}`}>\r\n                                                    {detail.done ? '+PTS' : 'MISS'}\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex-1 flex flex-col items-center justify-center text-graphite-400 p-8 text-center\">\r\n                                <MousePointerClick size={32} className=\"mb-4 opacity-20\" />\r\n                                <p className=\"text-sm font-medium\">Click on the timeline to inspect detailed logs for that day.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HistoryPage;\r\n"],"names":["HistoryPage","rawData","setRawData","cycles","setCycles","habitStats","setHabitStats","loading","setLoading","timeRange","setTimeRange","selectedCycleId","setSelectedCycleId","selectedDate","setSelectedDate","hoverDate","setHoverDate","getHistoryData","then","res","dailyScores","length","id","today","Date","toISOString","split","displayData","filtered","cycle","find","c","filter","d","date","start_date","end_date","daysToTake","slice","averageScore","Math","round","reduce","acc","curr","score","perfectDays","selectedDayDetails","formatDate","dateStr","toLocaleDateString","month","day","className","size","value","onChange","e","target","map","sprint_number","range","onClick","toUpperCase","data","onDataSelect","item","weekday","details","detail","idx","stats","habit","currentStreak","maxStreak","done","name","category","weight","title"],"mappings":"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"}}]
}