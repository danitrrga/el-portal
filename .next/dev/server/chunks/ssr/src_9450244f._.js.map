{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/GoalFormModal.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { Goal, GoalType, Habit } from '@/types/types';\nimport { CheckCircle2, X, Link as LinkIcon, Search, Check } from 'lucide-react';\n\ninterface GoalFormModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (\n        goal: { title: string; description: string; type: GoalType; subtasks?: string[] },\n        selectedHabit: Habit | null\n    ) => void;\n    initialGoal?: Goal;\n    currentCycleHabits: Habit[];\n    allHabits: Habit[];\n}\n\nexport const GoalFormModal: React.FC<GoalFormModalProps> = ({\n    isOpen, onClose, onSave, initialGoal, currentCycleHabits, allHabits\n}) => {\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [type, setType] = useState<GoalType>(GoalType.TASK_PROJECT);\n    const [subtasks, setSubtasks] = useState('');\n    const [selectedHabit, setSelectedHabit] = useState<Habit | null>(null);\n    const [habitTab, setHabitTab] = useState<'current' | 'database'>('current');\n    const [habitSearch, setHabitSearch] = useState('');\n\n    useEffect(() => {\n        if (initialGoal) {\n            setTitle(initialGoal.title);\n            setDescription(initialGoal.description);\n            setType(initialGoal.type);\n            // Convert subtasks array to string with indentation preservation\n            if (initialGoal.subtasks) {\n                setSubtasks(initialGoal.subtasks.map(t => {\n                    const indent = \"  \".repeat(t.level || 0);\n                    return `${indent}${t.name}`;\n                }).join('\\n'));\n            } else {\n                setSubtasks('');\n            }\n            // Link habit if ID exists\n            if (initialGoal.linked_habit_id) {\n                const found = allHabits.find(h => h.id === initialGoal.linked_habit_id);\n                if (found) setSelectedHabit(found);\n            }\n        } else {\n            // Reset for Add Mode\n            setTitle('');\n            setDescription('');\n            setType(GoalType.TASK_PROJECT);\n            setSubtasks('');\n            setSelectedHabit(null);\n        }\n    }, [initialGoal, isOpen]);\n\n    if (!isOpen) return null;\n\n    const uniqueDbHabits = Array.from(new Map(allHabits.map(h => [h.name, h])).values());\n    const displayHabits = habitTab === 'current' ? currentCycleHabits : uniqueDbHabits;\n    const filteredHabits = displayHabits.filter(h => h.name.toLowerCase().includes(habitSearch.toLowerCase()));\n\n    const handleSave = () => {\n        if (!title.trim()) return;\n        const subtaskList = type === GoalType.TASK_PROJECT ? subtasks.split('\\n').filter(s => s.trim().length > 0) : undefined;\n        onSave({ title, description, type, subtasks: subtaskList }, selectedHabit);\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n        if (e.key === 'Tab') {\n            e.preventDefault();\n            const start = e.currentTarget.selectionStart;\n            const end = e.currentTarget.selectionEnd;\n            const value = e.currentTarget.value;\n            const indent = \"  \";\n            const newValue = value.substring(0, start) + indent + value.substring(end);\n            setSubtasks(newValue);\n            requestAnimationFrame(() => {\n                if (e.currentTarget) {\n                    e.currentTarget.selectionStart = e.currentTarget.selectionEnd = start + indent.length;\n                }\n            });\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\n            <div className=\"w-full max-w-xl rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[90vh]\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"p-6 border-b border-graphite-200 dark:border-graphite-800 flex justify-between items-center\">\n                    <h2 className=\"text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\n                        <CheckCircle2 size={20} className=\"text-pacific-500\" />\n                        {initialGoal ? 'Edit Goal' : 'Add New Goal'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-graphite-400 hover:text-white\"><X size={20} /></button>\n                </div>\n                <div className=\"p-6 overflow-y-auto space-y-5\">\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Goal Title</label>\n                            <input value={title} onChange={e => setTitle(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white\" placeholder=\"e.g. Launch Marketing Campaign\" autoFocus />\n                        </div>\n                        <div>\n                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Description</label>\n                            <textarea value={description} onChange={e => setDescription(e.target.value)} rows={2} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white resize-none\" placeholder=\"What is the objective?\" />\n                        </div>\n                    </div>\n                    <div>\n                        <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-2\">Goal Type</label>\n                        <div className=\"grid grid-cols-2 gap-2 p-1 bg-graphite-100 dark:bg-graphite-800 rounded-xl\">\n                            <button onClick={() => setType(GoalType.TASK_PROJECT)} className={`py-2 rounded-lg text-sm font-bold transition-all ${type === GoalType.TASK_PROJECT ? 'bg-white dark:bg-graphite-700 text-pacific-600 dark:text-white shadow-sm' : 'text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300'}`}>Project (Tasks)</button>\n                            <button onClick={() => setType(GoalType.CONSISTENCY_METRIC)} className={`py-2 rounded-lg text-sm font-bold transition-all ${type === GoalType.CONSISTENCY_METRIC ? 'bg-white dark:bg-graphite-700 text-pacific-600 dark:text-white shadow-sm' : 'text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300'}`}>Habit Metric</button>\n                        </div>\n                    </div>\n                    {type === GoalType.TASK_PROJECT ? (\n                        <div className=\"animate-in fade-in slide-in-from-top-2\">\n                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Action Plan (Subtasks)</label>\n                            <textarea value={subtasks} onChange={e => setSubtasks(e.target.value)} onKeyDown={handleKeyDown} rows={6} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white leading-relaxed\" placeholder=\"- Research competitors&#10;  - Analyze pricing (Indented with Tab)&#10;- Draft copy\" />\n                            <p className=\"text-[10px] text-graphite-400 mt-1 text-right\">Use Tab to indent sub-tasks</p>\n                        </div>\n                    ) : (\n                        <div className=\"animate-in fade-in slide-in-from-top-2 p-4 border border-graphite-200 dark:border-graphite-700 rounded-xl bg-graphite-50 dark:bg-graphite-800/50\">\n                            <label className=\"block text-xs font-bold text-pacific-500 uppercase mb-3 flex items-center gap-2\"><LinkIcon size={14} /> Link Habit Source</label>\n                            <div className=\"flex gap-4 mb-3 border-b border-graphite-200 dark:border-graphite-700\">\n                                <button onClick={() => setHabitTab('current')} className={`pb-2 text-xs font-bold uppercase transition-colors border-b-2 ${habitTab === 'current' ? 'border-pacific-500 text-pacific-600 dark:text-pacific-400' : 'border-transparent text-graphite-400'}`}>Current Cycle</button>\n                                <button onClick={() => setHabitTab('database')} className={`pb-2 text-xs font-bold uppercase transition-colors border-b-2 ${habitTab === 'database' ? 'border-pacific-500 text-pacific-600 dark:text-pacific-400' : 'border-transparent text-graphite-400'}`}>Database Search</button>\n                            </div>\n                            {habitTab === 'database' && (\n                                <div className=\"relative mb-3\">\n                                    <Search size={14} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400\" />\n                                    <input value={habitSearch} onChange={e => setHabitSearch(e.target.value)} className=\"w-full bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-700 rounded-lg pl-9 pr-3 py-2 text-sm focus:outline-none focus:border-pacific-500\" placeholder=\"Search habit history...\" />\n                                </div>\n                            )}\n                            <div className=\"max-h-40 overflow-y-auto space-y-1 pr-1\">\n                                {filteredHabits.map(h => (\n                                    <button key={h.id} onClick={() => setSelectedHabit(h)} className={`w-full text-left px-3 py-2 rounded-lg text-sm transition-all flex justify-between items-center ${selectedHabit?.name === h.name ? 'bg-pacific-500 text-white shadow-md' : 'hover:bg-graphite-200 dark:hover:bg-graphite-700 text-graphite-700 dark:text-graphite-300'}`}>\n                                        <span className=\"font-medium truncate\">{h.name}</span>\n                                        {selectedHabit?.name === h.name && <Check size={14} />}\n                                    </button>\n                                ))}\n                                {filteredHabits.length === 0 && <div className=\"text-center py-4 text-xs text-graphite-400 italic\">No habits found.</div>}\n                            </div>\n                            {selectedHabit && (\n                                <div className=\"mt-3 pt-3 border-t border-graphite-200 dark:border-graphite-700 flex items-center justify-between\">\n                                    <span className=\"text-xs text-graphite-500\">Selected: <span className=\"font-bold text-graphite-900 dark:text-white\">{selectedHabit.name}</span></span>\n                                    <button onClick={() => setSelectedHabit(null)} className=\"text-xs text-red-400 hover:text-red-500\">Clear</button>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </div>\n                <div className=\"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3\">\n                    <button onClick={onClose} className=\"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-800 dark:hover:text-white transition-colors\">Cancel</button>\n                    <button onClick={handleSave} disabled={!title.trim() || (type === GoalType.CONSISTENCY_METRIC && !selectedHabit)} className=\"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pacific-500 transition-colors\">\n                        {initialGoal ? 'Save Changes' : 'Create Goal'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/HabitFormModal.tsx"],"sourcesContent":["\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Habit, HabitWeight } from '@/types/types';\nimport { CheckCircle2, X, Save, Library, Plus, Search, Tag, Trash2, ArrowRight, Settings, Edit2, ArrowLeft, AlertCircle, Check } from 'lucide-react';\n\ninterface HabitFormModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (habitData: { name: string; category: string; weight: HabitWeight }) => void;\n    initialHabit?: Habit;\n    allHabits?: Habit[];\n    onDeleteFromLibrary?: (habitId: string) => void;\n    onRenameCategory?: (oldName: string, newName: string) => Promise<void>;\n    onDeleteCategory?: (categoryName: string) => Promise<void>;\n}\n\nexport const HabitFormModal: React.FC<HabitFormModalProps> = ({\n    isOpen, onClose, onSave, initialHabit, allHabits = [], onDeleteFromLibrary, onRenameCategory, onDeleteCategory\n}) => {\n    const [activeTab, setActiveTab] = useState<'create' | 'library'>('create');\n    const [isManagingCats, setIsManagingCats] = useState(false);\n\n    // Form State\n    const [name, setName] = useState('');\n    const [category, setCategory] = useState('');\n    const [weight, setWeight] = useState<HabitWeight>(HabitWeight.MEDIUM);\n\n    // Library State\n    const [librarySearch, setLibrarySearch] = useState('');\n    const [verifyDeleteId, setVerifyDeleteId] = useState<string | null>(null);\n\n    // Category Manager State\n    const [editingCatName, setEditingCatName] = useState<string | null>(null);\n    const [tempCatName, setTempCatName] = useState('');\n    const [verifyDeleteCat, setVerifyDeleteCat] = useState<string | null>(null);\n\n    useEffect(() => {\n        if (initialHabit) {\n            setName(initialHabit.name);\n            setCategory(initialHabit.category);\n            setWeight(initialHabit.weight);\n            setActiveTab('create');\n        } else {\n            // Reset only if opening for new habit\n            if (isOpen && !initialHabit && activeTab === 'create' && name === '') {\n                setName('');\n                setCategory('');\n                setWeight(HabitWeight.MEDIUM);\n            }\n        }\n        setIsManagingCats(false);\n    }, [initialHabit, isOpen]);\n\n    // Smart Category Derivation\n    const uniqueCategories = useMemo(() => {\n        const cats = new Set(allHabits.map(h => h.category).filter(Boolean));\n        return Array.from(cats).sort();\n    }, [allHabits]);\n\n    // Smart Library Derivation\n    const libraryItems = useMemo(() => {\n        const unique = new Map<string, Habit>();\n        allHabits.forEach(h => {\n            if (!unique.has(h.name)) {\n                unique.set(h.name, h);\n            }\n        });\n        return Array.from(unique.values()).filter(h =>\n            h.name.toLowerCase().includes(librarySearch.toLowerCase()) ||\n            h.category.toLowerCase().includes(librarySearch.toLowerCase())\n        );\n    }, [allHabits, librarySearch]);\n\n    if (!isOpen) return null;\n\n    const handleSave = () => {\n        if (!name.trim() || !category.trim()) return;\n        onSave({ name, category, weight });\n    };\n\n    const handleImportFromLibrary = (habit: Habit) => {\n        setName(habit.name);\n        setCategory(habit.category);\n        setWeight(habit.weight);\n        setActiveTab('create');\n    };\n\n    const handleDeleteClick = (e: React.MouseEvent, id: string) => {\n        e.stopPropagation();\n        if (verifyDeleteId === id) {\n            if (onDeleteFromLibrary) onDeleteFromLibrary(id);\n            setVerifyDeleteId(null);\n        } else {\n            setVerifyDeleteId(id);\n            setTimeout(() => setVerifyDeleteId(null), 3000);\n        }\n    };\n\n    // --- Category Manager Handlers ---\n    const startEditCategory = (cat: string) => {\n        setEditingCatName(cat);\n        setTempCatName(cat);\n    };\n\n    const saveEditCategory = async () => {\n        if (editingCatName && tempCatName.trim() && tempCatName !== editingCatName) {\n            if (onRenameCategory) {\n                await onRenameCategory(editingCatName, tempCatName.trim());\n                // If the current form category matched the edited one, update it too\n                if (category === editingCatName) setCategory(tempCatName.trim());\n            }\n        }\n        setEditingCatName(null);\n        setTempCatName('');\n    };\n\n    const deleteCategory = async (cat: string) => {\n        if (verifyDeleteCat === cat) {\n            if (onDeleteCategory) {\n                await onDeleteCategory(cat);\n                // If form selected this category, clear it\n                if (category === cat) setCategory('');\n            }\n            setVerifyDeleteCat(null);\n        } else {\n            setVerifyDeleteCat(cat);\n            setTimeout(() => setVerifyDeleteCat(null), 3000);\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\n            <div className=\"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[85vh]\" onClick={(e) => e.stopPropagation()}>\n\n                {/* Header & Tabs */}\n                <div className=\"flex-none border-b border-graphite-200 dark:border-graphite-800\">\n                    <div className=\"p-6 pb-4 flex justify-between items-center\">\n                        <h2 className=\"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\n                            {isManagingCats ? (\n                                <><Settings size={18} className=\"text-graphite-500\" /> Manage Categories</>\n                            ) : activeTab === 'create' ? (\n                                <><CheckCircle2 size={18} className=\"text-pacific-500\" /> {initialHabit ? 'Edit Habit' : 'Add Habit'}</>\n                            ) : (\n                                <><Library size={18} className=\"text-bali-500\" /> Habit Library</>\n                            )}\n                        </h2>\n                        <button onClick={onClose} className=\"text-graphite-400 hover:text-white\"><X size={18} /></button>\n                    </div>\n\n                    {!initialHabit && !isManagingCats && (\n                        <div className=\"px-6 flex gap-4\">\n                            <button\n                                onClick={() => setActiveTab('create')}\n                                className={`pb-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${activeTab === 'create' ? 'border-pacific-500 text-pacific-600 dark:text-pacific-400' : 'border-transparent text-graphite-400 hover:text-graphite-600 dark:hover:text-graphite-300'}`}\n                            >\n                                Create New\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('library')}\n                                className={`pb-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${activeTab === 'library' ? 'border-bali-500 text-bali-600 dark:text-bali-400' : 'border-transparent text-graphite-400 hover:text-graphite-600 dark:hover:text-graphite-300'}`}\n                            >\n                                From History\n                            </button>\n                        </div>\n                    )}\n                </div>\n\n                {/* Content Area */}\n                <div className=\"flex-1 overflow-y-auto p-6\">\n                    {isManagingCats ? (\n                        <div className=\"animate-in fade-in slide-in-from-right-4 space-y-4\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                                <button onClick={() => setIsManagingCats(false)} className=\"text-xs font-bold text-graphite-500 hover:text-pacific-500 flex items-center gap-1\">\n                                    <ArrowLeft size={12} /> Back to Form\n                                </button>\n                                <span className=\"text-[10px] uppercase text-graphite-400 font-bold\">{uniqueCategories.length} Categories</span>\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                {uniqueCategories.map(cat => (\n                                    <div key={cat} className=\"group flex items-center justify-between p-3 rounded-xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-800/50 hover:border-pacific-200 dark:hover:border-pacific-900 transition-all\">\n                                        {editingCatName === cat ? (\n                                            <div className=\"flex items-center gap-2 flex-1\">\n                                                <input\n                                                    value={tempCatName}\n                                                    onChange={e => setTempCatName(e.target.value)}\n                                                    className=\"flex-1 bg-graphite-50 dark:bg-graphite-900 border border-pacific-500 rounded-lg px-2 py-1 text-sm text-graphite-900 dark:text-white outline-none\"\n                                                    autoFocus\n                                                    onKeyDown={e => e.key === 'Enter' && saveEditCategory()}\n                                                />\n                                                <button onClick={saveEditCategory} className=\"p-1.5 bg-pacific-500 text-white rounded-lg\"><Check size={14} /></button>\n                                                <button onClick={() => setEditingCatName(null)} className=\"p-1.5 text-graphite-400 hover:text-white\"><X size={14} /></button>\n                                            </div>\n                                        ) : (\n                                            <>\n                                                <span className=\"text-sm font-medium text-graphite-700 dark:text-graphite-300\">{cat}</span>\n                                                <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                                    <button onClick={() => startEditCategory(cat)} className=\"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg\"><Edit2 size={14} /></button>\n                                                    {cat !== 'Uncategorized' && (\n                                                        <button\n                                                            onClick={() => deleteCategory(cat)}\n                                                            className={`p-2 rounded-lg flex items-center gap-2 transition-all ${verifyDeleteCat === cat ? 'bg-red-500 text-white w-24 justify-center' : 'text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20'}`}\n                                                        >\n                                                            <Trash2 size={14} /> {verifyDeleteCat === cat && <span className=\"text-[10px] font-bold\">Confirm</span>}\n                                                        </button>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n                                    </div>\n                                ))}\n                                {uniqueCategories.length === 0 && <div className=\"text-center py-8 text-graphite-400 text-sm\">No categories defined yet.</div>}\n                            </div>\n\n                            <div className=\"p-3 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/30 flex gap-3 items-start\">\n                                <AlertCircle size={16} className=\"text-blue-500 mt-0.5 shrink-0\" />\n                                <div className=\"text-xs text-blue-700 dark:text-blue-300 leading-relaxed\">\n                                    <strong>Note:</strong> Renaming updates all habits history. Deleting moves associated habits to \"Uncategorized\".\n                                </div>\n                            </div>\n                        </div>\n                    ) : activeTab === 'create' ? (\n                        <div className=\"space-y-5 animate-in fade-in slide-in-from-left-4\">\n                            <div>\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Habit Name</label>\n                                <input value={name} onChange={e => setName(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white transition-all\" placeholder=\"e.g. Morning Run\" autoFocus />\n                            </div>\n\n                            <div>\n                                <div className=\"flex justify-between items-center mb-1.5\">\n                                    <label className=\"block text-xs font-bold text-graphite-500 uppercase\">Category</label>\n                                    <button onClick={() => setIsManagingCats(true)} className=\"text-[10px] font-bold text-pacific-500 hover:text-pacific-600 flex items-center gap-1\"><Settings size={10} /> Manage</button>\n                                </div>\n                                <div className=\"relative\">\n                                    <Tag size={14} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400\" />\n                                    <input value={category} onChange={e => setCategory(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl pl-9 pr-4 py-3 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white transition-all\" placeholder=\"e.g. Health\" />\n                                </div>\n                                {/* Category Chips */}\n                                {uniqueCategories.length > 0 && (\n                                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                                        {uniqueCategories.slice(0, 8).map(cat => (\n                                            <button\n                                                key={cat}\n                                                onClick={() => setCategory(cat === category ? '' : cat)}\n                                                className={`px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wide border transition-all ${category === cat ? 'bg-pacific-500 text-white border-pacific-500' : 'bg-graphite-100 dark:bg-graphite-800 text-graphite-500 border-transparent hover:bg-pacific-50 dark:hover:bg-pacific-900/20 hover:text-pacific-600 dark:hover:text-pacific-400'}`}\n                                            >\n                                                {cat}\n                                            </button>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n\n                            <div>\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Impact Weight</label>\n                                <div className=\"grid grid-cols-3 gap-2\">\n                                    {[HabitWeight.LOW, HabitWeight.MEDIUM, HabitWeight.HIGH].map((w) => (\n                                        <button\n                                            key={w}\n                                            onClick={() => setWeight(w)}\n                                            className={`py-2.5 text-xs font-bold rounded-xl border transition-all ${weight === w ? 'bg-pacific-500 text-white border-pacific-500 shadow-md shadow-pacific-500/20' : 'bg-graphite-50 dark:bg-graphite-800 text-graphite-500 border-graphite-200 dark:border-graphite-700 hover:border-graphite-400'}`}\n                                        >\n                                            {w === HabitWeight.LOW ? 'Low (1)' : w === HabitWeight.MEDIUM ? 'Medium (2)' : 'High (4)'}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex flex-col h-full animate-in fade-in slide-in-from-right-4\">\n                            <div className=\"relative mb-4\">\n                                <Search size={14} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400\" />\n                                <input\n                                    value={librarySearch}\n                                    onChange={e => setLibrarySearch(e.target.value)}\n                                    className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl pl-9 pr-4 py-2 text-sm focus:outline-none focus:border-bali-500 text-graphite-900 dark:text-white\"\n                                    placeholder=\"Search history...\"\n                                    autoFocus\n                                />\n                            </div>\n                            <div className=\"flex-1 overflow-y-auto space-y-2 pr-1\">\n                                {libraryItems.length > 0 ? libraryItems.map(habit => (\n                                    <div key={habit.id} onClick={() => handleImportFromLibrary(habit)} className=\"group flex items-center justify-between p-3 rounded-xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-800/50 hover:border-bali-500 dark:hover:border-bali-500 cursor-pointer transition-all\">\n                                        <div>\n                                            <div className=\"text-sm font-bold text-graphite-900 dark:text-white group-hover:text-bali-600 dark:group-hover:text-bali-400 transition-colors\">{habit.name}</div>\n                                            <div className=\"flex items-center gap-2 mt-1\">\n                                                <span className=\"text-[10px] font-medium bg-graphite-100 dark:bg-graphite-900 text-graphite-500 px-2 py-0.5 rounded\">{habit.category}</span>\n                                                <div className=\"flex gap-0.5\">{[...Array(habit.weight)].map((_, i) => <div key={i} className=\"h-1 w-1 rounded-full bg-bali-400\" />)}</div>\n                                            </div>\n                                        </div>\n                                        <div className=\"flex items-center gap-2\">\n                                            <button\n                                                onClick={(e) => handleDeleteClick(e, habit.id)}\n                                                className={`p-2 rounded-lg transition-all ${verifyDeleteId === habit.id ? 'bg-red-500 text-white' : 'text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 opacity-0 group-hover:opacity-100'}`}\n                                            >\n                                                <Trash2 size={14} />\n                                            </button>\n                                            <ArrowRight size={16} className=\"text-graphite-300 group-hover:text-bali-500 -translate-x-2 group-hover:translate-x-0 transition-all opacity-0 group-hover:opacity-100\" />\n                                        </div>\n                                    </div>\n                                )) : (\n                                    <div className=\"text-center py-12 text-graphite-400 text-sm\">No matching habits found in history.</div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer */}\n                <div className=\"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3 bg-white dark:bg-graphite-900 rounded-b-2xl\">\n                    {!isManagingCats ? (\n                        <>\n                            <button onClick={onClose} className=\"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-800 dark:hover:text-white transition-colors\">Cancel</button>\n                            {activeTab === 'create' && (\n                                <button onClick={handleSave} disabled={!name.trim()} className=\"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pacific-500 transition-colors flex items-center gap-2\">\n                                    <Save size={14} /> Save\n                                </button>\n                            )}\n                        </>\n                    ) : (\n                        <button onClick={() => setIsManagingCats(false)} className=\"px-6 py-2 bg-graphite-100 dark:bg-graphite-800 text-graphite-900 dark:text-white rounded-xl text-sm font-bold hover:bg-graphite-200 dark:hover:bg-graphite-700 transition-colors\">\n                            Done\n                        </button>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAaO,MAAM,iBAAgD,CAAC,EAC1D,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,YAAY,EAAE,EAAE,mBAAmB,EAAE,gBAAgB,EAAE,gBAAgB,EACjH;IACG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAuB;IACjE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,aAAa;IACb,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAc,oIAAW,CAAC,MAAM;IAEpE,gBAAgB;IAChB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IAEpE,yBAAyB;IACzB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAgB;IAEtE,IAAA,kNAAS,EAAC;QACN,IAAI,cAAc;YACd,QAAQ,aAAa,IAAI;YACzB,YAAY,aAAa,QAAQ;YACjC,UAAU,aAAa,MAAM;YAC7B,aAAa;QACjB,OAAO;YACH,sCAAsC;YACtC,IAAI,UAAU,CAAC,gBAAgB,cAAc,YAAY,SAAS,IAAI;gBAClE,QAAQ;gBACR,YAAY;gBACZ,UAAU,oIAAW,CAAC,MAAM;YAChC;QACJ;QACA,kBAAkB;IACtB,GAAG;QAAC;QAAc;KAAO;IAEzB,4BAA4B;IAC5B,MAAM,mBAAmB,IAAA,gNAAO,EAAC;QAC7B,MAAM,OAAO,IAAI,IAAI,UAAU,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,EAAE,MAAM,CAAC;QAC3D,OAAO,MAAM,IAAI,CAAC,MAAM,IAAI;IAChC,GAAG;QAAC;KAAU;IAEd,2BAA2B;IAC3B,MAAM,eAAe,IAAA,gNAAO,EAAC;QACzB,MAAM,SAAS,IAAI;QACnB,UAAU,OAAO,CAAC,CAAA;YACd,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,IAAI,GAAG;gBACrB,OAAO,GAAG,CAAC,EAAE,IAAI,EAAE;YACvB;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM,CAAC,CAAA,IACtC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,cAAc,WAAW,OACvD,EAAE,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,cAAc,WAAW;IAEnE,GAAG;QAAC;QAAW;KAAc;IAE7B,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,aAAa;QACf,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,SAAS,IAAI,IAAI;QACtC,OAAO;YAAE;YAAM;YAAU;QAAO;IACpC;IAEA,MAAM,0BAA0B,CAAC;QAC7B,QAAQ,MAAM,IAAI;QAClB,YAAY,MAAM,QAAQ;QAC1B,UAAU,MAAM,MAAM;QACtB,aAAa;IACjB;IAEA,MAAM,oBAAoB,CAAC,GAAqB;QAC5C,EAAE,eAAe;QACjB,IAAI,mBAAmB,IAAI;YACvB,IAAI,qBAAqB,oBAAoB;YAC7C,kBAAkB;QACtB,OAAO;YACH,kBAAkB;YAClB,WAAW,IAAM,kBAAkB,OAAO;QAC9C;IACJ;IAEA,oCAAoC;IACpC,MAAM,oBAAoB,CAAC;QACvB,kBAAkB;QAClB,eAAe;IACnB;IAEA,MAAM,mBAAmB;QACrB,IAAI,kBAAkB,YAAY,IAAI,MAAM,gBAAgB,gBAAgB;YACxE,IAAI,kBAAkB;gBAClB,MAAM,iBAAiB,gBAAgB,YAAY,IAAI;gBACvD,qEAAqE;gBACrE,IAAI,aAAa,gBAAgB,YAAY,YAAY,IAAI;YACjE;QACJ;QACA,kBAAkB;QAClB,eAAe;IACnB;IAEA,MAAM,iBAAiB,OAAO;QAC1B,IAAI,oBAAoB,KAAK;YACzB,IAAI,kBAAkB;gBAClB,MAAM,iBAAiB;gBACvB,2CAA2C;gBAC3C,IAAI,aAAa,KAAK,YAAY;YACtC;YACA,mBAAmB;QACvB,OAAO;YACH,mBAAmB;YACnB,WAAW,IAAM,mBAAmB,OAAO;QAC/C;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;QAAgG,SAAS;kBACpH,cAAA,8OAAC;YAAI,WAAU;YAAyL,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAGrO,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CACT,+BACG;;0DAAE,8OAAC,sNAAQ;gDAAC,MAAM;gDAAI,WAAU;;;;;;4CAAsB;;uDACtD,cAAc,yBACd;;0DAAE,8OAAC,0OAAY;gDAAC,MAAM;gDAAI,WAAU;;;;;;4CAAqB;4CAAE,eAAe,eAAe;;qEAEzF;;0DAAE,8OAAC,mNAAO;gDAAC,MAAM;gDAAI,WAAU;;;;;;4CAAkB;;;;;;;;8CAGzD,8OAAC;oCAAO,SAAS;oCAAS,WAAU;8CAAqC,cAAA,8OAAC,iMAAC;wCAAC,MAAM;;;;;;;;;;;;;;;;;wBAGrF,CAAC,gBAAgB,CAAC,gCACf,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCACG,SAAS,IAAM,aAAa;oCAC5B,WAAW,CAAC,6EAA6E,EAAE,cAAc,WAAW,8DAA8D,6FAA6F;8CAClR;;;;;;8CAGD,8OAAC;oCACG,SAAS,IAAM,aAAa;oCAC5B,WAAW,CAAC,6EAA6E,EAAE,cAAc,YAAY,qDAAqD,6FAA6F;8CAC1Q;;;;;;;;;;;;;;;;;;8BAQb,8OAAC;oBAAI,WAAU;8BACV,+BACG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAO,SAAS,IAAM,kBAAkB;wCAAQ,WAAU;;0DACvD,8OAAC,6NAAS;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAE3B,8OAAC;wCAAK,WAAU;;4CAAqD,iBAAiB,MAAM;4CAAC;;;;;;;;;;;;;0CAGjG,8OAAC;gCAAI,WAAU;;oCACV,iBAAiB,GAAG,CAAC,CAAA,oBAClB,8OAAC;4CAAc,WAAU;sDACpB,mBAAmB,oBAChB,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDACG,OAAO;wDACP,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;wDAC5C,WAAU;wDACV,SAAS;wDACT,WAAW,CAAA,IAAK,EAAE,GAAG,KAAK,WAAW;;;;;;kEAEzC,8OAAC;wDAAO,SAAS;wDAAkB,WAAU;kEAA6C,cAAA,8OAAC,6MAAK;4DAAC,MAAM;;;;;;;;;;;kEACvG,8OAAC;wDAAO,SAAS,IAAM,kBAAkB;wDAAO,WAAU;kEAA2C,cAAA,8OAAC,iMAAC;4DAAC,MAAM;;;;;;;;;;;;;;;;yGAGlH;;kEACI,8OAAC;wDAAK,WAAU;kEAAgE;;;;;;kEAChF,8OAAC;wDAAI,WAAU;;0EACX,8OAAC;gEAAO,SAAS,IAAM,kBAAkB;gEAAM,WAAU;0EAA2G,cAAA,8OAAC,2MAAK;oEAAC,MAAM;;;;;;;;;;;4DAChL,QAAQ,iCACL,8OAAC;gEACG,SAAS,IAAM,eAAe;gEAC9B,WAAW,CAAC,sDAAsD,EAAE,oBAAoB,MAAM,8CAA8C,iFAAiF;;kFAE7N,8OAAC,oNAAM;wEAAC,MAAM;;;;;;oEAAM;oEAAE,oBAAoB,qBAAO,8OAAC;wEAAK,WAAU;kFAAwB;;;;;;;;;;;;;;;;;;;;2CAvBvG;;;;;oCA+Bb,iBAAiB,MAAM,KAAK,mBAAK,8OAAC;wCAAI,WAAU;kDAA6C;;;;;;;;;;;;0CAGlG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,mOAAW;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDACjC,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;0DAAO;;;;;;4CAAc;;;;;;;;;;;;;;;;;;mEAIlC,cAAc,yBACd,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;;kDACG,8OAAC;wCAAM,WAAU;kDAA6D;;;;;;kDAC9E,8OAAC;wCAAM,OAAO;wCAAM,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;wCAAG,WAAU;wCAA2N,aAAY;wCAAmB,SAAS;;;;;;;;;;;;0CAG7U,8OAAC;;kDACG,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAM,WAAU;0DAAsD;;;;;;0DACvE,8OAAC;gDAAO,SAAS,IAAM,kBAAkB;gDAAO,WAAU;;kEAAwF,8OAAC,sNAAQ;wDAAC,MAAM;;;;;;oDAAM;;;;;;;;;;;;;kDAE5K,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,uMAAG;gDAAC,MAAM;gDAAI,WAAU;;;;;;0DACzB,8OAAC;gDAAM,OAAO;gDAAU,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;gDAAG,WAAU;gDAAgO,aAAY;;;;;;;;;;;;oCAG7T,iBAAiB,MAAM,GAAG,mBACvB,8OAAC;wCAAI,WAAU;kDACV,iBAAiB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA,oBAC9B,8OAAC;gDAEG,SAAS,IAAM,YAAY,QAAQ,WAAW,KAAK;gDACnD,WAAW,CAAC,2FAA2F,EAAE,aAAa,MAAM,iDAAiD,iLAAiL;0DAE7V;+CAJI;;;;;;;;;;;;;;;;0CAWzB,8OAAC;;kDACG,8OAAC;wCAAM,WAAU;kDAA6D;;;;;;kDAC9E,8OAAC;wCAAI,WAAU;kDACV;4CAAC,oIAAW,CAAC,GAAG;4CAAE,oIAAW,CAAC,MAAM;4CAAE,oIAAW,CAAC,IAAI;yCAAC,CAAC,GAAG,CAAC,CAAC,kBAC1D,8OAAC;gDAEG,SAAS,IAAM,UAAU;gDACzB,WAAW,CAAC,0DAA0D,EAAE,WAAW,IAAI,iFAAiF,gIAAgI;0DAEvS,MAAM,oIAAW,CAAC,GAAG,GAAG,YAAY,MAAM,oIAAW,CAAC,MAAM,GAAG,eAAe;+CAJ1E;;;;;;;;;;;;;;;;;;;;;iFAWzB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,gNAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC5B,8OAAC;wCACG,OAAO;wCACP,UAAU,CAAA,IAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;wCACV,aAAY;wCACZ,SAAS;;;;;;;;;;;;0CAGjB,8OAAC;gCAAI,WAAU;0CACV,aAAa,MAAM,GAAG,IAAI,aAAa,GAAG,CAAC,CAAA,sBACxC,8OAAC;wCAAmB,SAAS,IAAM,wBAAwB;wCAAQ,WAAU;;0DACzE,8OAAC;;kEACG,8OAAC;wDAAI,WAAU;kEAAkI,MAAM,IAAI;;;;;;kEAC3J,8OAAC;wDAAI,WAAU;;0EACX,8OAAC;gEAAK,WAAU;0EAAsG,MAAM,QAAQ;;;;;;0EACpI,8OAAC;gEAAI,WAAU;0EAAgB;uEAAI,MAAM,MAAM,MAAM;iEAAE,CAAC,GAAG,CAAC,CAAC,GAAG,kBAAM,8OAAC;wEAAY,WAAU;uEAAb;;;;;;;;;;;;;;;;;;;;;;0DAGxF,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDACG,SAAS,CAAC,IAAM,kBAAkB,GAAG,MAAM,EAAE;wDAC7C,WAAW,CAAC,8BAA8B,EAAE,mBAAmB,MAAM,EAAE,GAAG,0BAA0B,mHAAmH;kEAEvN,cAAA,8OAAC,oNAAM;4DAAC,MAAM;;;;;;;;;;;kEAElB,8OAAC,gOAAU;wDAAC,MAAM;wDAAI,WAAU;;;;;;;;;;;;;uCAf9B,MAAM,EAAE;;;;kGAmBlB,8OAAC;oCAAI,WAAU;8CAA8C;;;;;;;;;;;;;;;;;;;;;;8BAQjF,8OAAC;oBAAI,WAAU;8BACV,CAAC,+BACE;;0CACI,8OAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAgH;;;;;;4BACnJ,cAAc,0BACX,8OAAC;gCAAO,SAAS;gCAAY,UAAU,CAAC,KAAK,IAAI;gCAAI,WAAU;;kDAC3D,8OAAC,0MAAI;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;qDAK9B,8OAAC;wBAAO,SAAS,IAAM,kBAAkB;wBAAQ,WAAU;kCAAmL;;;;;;;;;;;;;;;;;;;;;;AAQtQ"}},
    {"offset": {"line": 1321, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/CycleEditorModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Cycle, Goal, Habit, GoalType, EntityStatus, CCHItem } from '@/types/types';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { Edit3, Brain, Fingerprint, Activity, Plus, Trash2, CheckCircle2, List, X, Save, Target, AlertTriangle, Calendar, Rocket, Power, AlertCircle } from 'lucide-react';\r\nimport { GoalFormModal } from './GoalFormModal';\r\nimport { HabitFormModal } from './HabitFormModal';\r\n\r\ninterface CycleEditorModalProps {\r\n    mode?: 'create' | 'edit';\r\n    cycle?: Cycle; // Optional, undefined in 'create' mode\r\n    goals: Goal[];\r\n    habits: Habit[];\r\n    allHabits: Habit[];\r\n    suggestedSprintNumber?: number; // For create mode auto-fill\r\n    onClose: () => void;\r\n    // Handler for 'edit' mode (atomic updates)\r\n    onSaveCycle?: (cycle: Cycle) => void;\r\n    onManageGoal?: (action: 'create' | 'update' | 'delete', goal: any) => void;\r\n    onManageHabit?: (action: 'create' | 'update' | 'delete', habit: any) => void;\r\n    // Handler for 'create' mode (bulk save)\r\n    onCreate?: (cycleData: any, goals: any[], habits: any[]) => void;\r\n    // Category Handlers\r\n    onRenameCategory?: (oldName: string, newName: string) => Promise<void>;\r\n    onDeleteCategory?: (categoryName: string) => Promise<void>;\r\n    // Explicit Handler for deleting habits from the library (database)\r\n    onDeleteHabitFromDB?: (habitId: string) => Promise<void>;\r\n    // Dynamic Cycle Limit\r\n    maxCycles?: number;\r\n    // Context for Smart Scheduling\r\n    versionStartDate?: string;\r\n    existingCycles?: Cycle[];\r\n}\r\n\r\n// Helper for safe date arithmetic without timezone issues\r\nconst addDaysToDate = (dateStr: string, days: number): string => {\r\n    if (!dateStr) return '';\r\n    const parts = dateStr.split('-').map(Number);\r\n    // Create date in local time (Year, Month Index, Day)\r\n    const date = new Date(parts[0], parts[1] - 1, parts[2]);\r\n    date.setDate(date.getDate() + days);\r\n\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n};\r\n\r\nexport const CycleEditorModal: React.FC<CycleEditorModalProps> = ({\r\n    mode = 'edit', cycle, goals, habits, allHabits, suggestedSprintNumber, onClose, onSaveCycle, onManageGoal, onManageHabit, onCreate, onRenameCategory, onDeleteCategory, onDeleteHabitFromDB, maxCycles = 6, versionStartDate, existingCycles\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'strategy' | 'identity' | 'mantras' | 'goals' | 'habits'>('strategy');\r\n\r\n    // --- Cycle Config State (Create Mode) ---\r\n    const [sprintNumber, setSprintNumber] = useState(suggestedSprintNumber || 1);\r\n    const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [endDate, setEndDate] = useState(new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]);\r\n    const [isActive, setIsActive] = useState(true);\r\n    const [cycleDuration, setCycleDuration] = useState(15); // Default, updated by DB\r\n\r\n    // --- Cycle Content State ---\r\n    const [priorities, setPriorities] = useState<string[]>(['', '', '']);\r\n    const [problems, setProblems] = useState('');\r\n    const [learning, setLearning] = useState('');\r\n    const [beliefs, setBeliefs] = useState<string[]>([]);\r\n    const [characteristics, setCharacteristics] = useState<string[]>([]);\r\n    const [skills, setSkills] = useState<string[]>([]);\r\n    const [selectedMantras, setSelectedMantras] = useState<string[]>([]);\r\n\r\n    // --- Local Lists State (Buffer for Create Mode) ---\r\n    // In 'create' mode, we manipulate these arrays. In 'edit' mode, we use the props `goals` and `habits` but might optimistic update these for UI.\r\n    const [localGoals, setLocalGoals] = useState<Goal[]>([]);\r\n    const [localHabits, setLocalHabits] = useState<Habit[]>([]);\r\n\r\n    // --- Helper State ---\r\n    const [allMantras, setAllMantras] = useState<string[]>([]);\r\n    const [tempBelief, setTempBelief] = useState('');\r\n    const [tempChar, setTempChar] = useState('');\r\n    const [tempSkill, setTempSkill] = useState('');\r\n    const [newMantra, setNewMantra] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // --- Sub-Modals State ---\r\n    const [editingGoal, setEditingGoal] = useState<Goal | undefined>(undefined);\r\n    const [isGoalModalOpen, setIsGoalModalOpen] = useState(false);\r\n    const [editingHabit, setEditingHabit] = useState<Habit | undefined>(undefined);\r\n    const [isHabitModalOpen, setIsHabitModalOpen] = useState(false);\r\n    const [verifyDeleteId, setVerifyDeleteId] = useState<string | null>(null);\r\n\r\n    // Initialization\r\n    useEffect(() => {\r\n        supabaseService.getMantras().then(setAllMantras);\r\n\r\n        if (mode === 'edit' && cycle) {\r\n            setPriorities(cycle.focus_priorities);\r\n            setProblems(cycle.problems);\r\n            setLearning(cycle.learning_focus);\r\n            setBeliefs(cycle.cch_list.find(c => c.category === 'Beliefs')?.items || []);\r\n            setCharacteristics(cycle.cch_list.find(c => c.category === 'Characteristics')?.items || []);\r\n            setSkills(cycle.cch_list.find(c => c.category === 'Skills')?.items || []);\r\n            setSelectedMantras(cycle.mantras);\r\n            setSprintNumber(cycle.sprint_number);\r\n            setStartDate(cycle.start_date);\r\n            setEndDate(cycle.end_date);\r\n        }\r\n    }, [mode, cycle]);\r\n\r\n    // Smart Scheduling Logic\r\n    useEffect(() => {\r\n        const initScheduling = async () => {\r\n            // 1. Fetch System Settings\r\n            const settings = await supabaseService.getSystemSettings();\r\n            const duration = Math.floor(settings.days / settings.cycles);\r\n            setCycleDuration(duration);\r\n\r\n            // 2. Auto-Suggest Dates (Only in Create Mode)\r\n            if (mode === 'create' && versionStartDate) {\r\n                let suggestedStart = versionStartDate;\r\n\r\n                // If cycles exist, start after the last one\r\n                if (existingCycles && existingCycles.length > 0) {\r\n                    // Sort by end date descending\r\n                    const sorted = [...existingCycles].sort((a, b) => new Date(b.end_date).getTime() - new Date(a.end_date).getTime());\r\n                    const lastCycle = sorted[0];\r\n                    suggestedStart = addDaysToDate(lastCycle.end_date, 1);\r\n                }\r\n\r\n                setStartDate(suggestedStart);\r\n                setEndDate(addDaysToDate(suggestedStart, duration - 1));\r\n            }\r\n        };\r\n        initScheduling();\r\n    }, [mode, versionStartDate, existingCycles]);\r\n\r\n    // Sync local state with props in Edit mode\r\n    useEffect(() => {\r\n        if (mode === 'edit') {\r\n            setLocalGoals(goals);\r\n            setLocalHabits(habits);\r\n        }\r\n    }, [goals, habits, mode]);\r\n\r\n    // -- Cycle Logic Handlers --\r\n    const handleAddMantra = async () => { if (newMantra.trim()) { await supabaseService.addMantra(newMantra); setAllMantras(prev => [...prev, newMantra]); setSelectedMantras(prev => [...prev, newMantra]); setNewMantra(''); } };\r\n    const handleAddBelief = () => { if (tempBelief.trim()) { setBeliefs([...beliefs, tempBelief.trim()]); setTempBelief(''); } };\r\n    const handleAddChar = () => { if (tempChar.trim()) { setCharacteristics([...characteristics, tempChar.trim()]); setTempChar(''); } };\r\n    const handleAddSkill = () => { if (tempSkill.trim()) { setSkills([...skills, tempSkill.trim()]); setTempSkill(''); } };\r\n\r\n    const handleManualStartDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newStart = e.target.value;\r\n        setStartDate(newStart);\r\n        if (newStart && cycleDuration > 0) {\r\n            setEndDate(addDaysToDate(newStart, cycleDuration - 1));\r\n        }\r\n    };\r\n\r\n    // -- Main Save Handler --\r\n    const handleFinalSave = () => {\r\n        // Validate Constraints\r\n        if (mode === 'create' && (sprintNumber < 1 || sprintNumber > maxCycles)) {\r\n            setError(`Versions are limited to exactly ${maxCycles} cycles.`);\r\n            setActiveTab('strategy');\r\n            return;\r\n        }\r\n\r\n        const cycleData = {\r\n            sprint_number: sprintNumber,\r\n            start_date: startDate,\r\n            end_date: endDate,\r\n            status: isActive ? EntityStatus.ACTIVE : undefined, // Only relevant for create usually\r\n            focus_priorities: priorities.filter(p => p.trim().length > 0),\r\n            problems,\r\n            learning_focus: learning,\r\n            mantras: selectedMantras,\r\n            cch_list: [\r\n                { category: 'Beliefs', items: beliefs },\r\n                { category: 'Characteristics', items: characteristics },\r\n                { category: 'Skills', items: skills }\r\n            ] as CCHItem[]\r\n        };\r\n\r\n        if (mode === 'create' && onCreate) {\r\n            onCreate(cycleData, localGoals, localHabits);\r\n        } else if (mode === 'edit' && onSaveCycle && cycle) {\r\n            // In edit mode, goals/habits are handled atomically by other handlers. We just save the cycle config.\r\n            onSaveCycle({ ...cycle, ...cycleData });\r\n        }\r\n    };\r\n\r\n    // -- Goal/Habit Wrapper Handlers --\r\n\r\n    const handleGoalSaveWrapper = (goalData: any, selectedHabit: any) => {\r\n        // goalData from modal: { title, description, type, subtasks (string[]) }\r\n        const newGoalObj = {\r\n            id: editingGoal?.id || `temp-g-${Date.now()}`,\r\n            ...goalData,\r\n            // If it's consistency, we need to store the habit data structure temporarily for the parent to process\r\n            linkedHabit: selectedHabit,\r\n            // In create mode, subtasks come as strings from modal, we format them for preview\r\n            subtasks: goalData.subtasks?.map((s: string) => ({ name: s, done: false }))\r\n        };\r\n\r\n        if (mode === 'create') {\r\n            if (editingGoal) {\r\n                setLocalGoals(prev => prev.map(g => g.id === editingGoal.id ? { ...g, ...newGoalObj } : g));\r\n            } else {\r\n                setLocalGoals(prev => [...prev, newGoalObj]);\r\n            }\r\n        } else {\r\n            // Edit Mode: Immediate DB Action\r\n            if (onManageGoal) {\r\n                const action = editingGoal ? 'update' : 'create';\r\n                onManageGoal(action, { ...newGoalObj, linkedHabit: selectedHabit });\r\n            }\r\n        }\r\n        setIsGoalModalOpen(false);\r\n    };\r\n\r\n    const handleHabitSaveWrapper = (habitData: any) => {\r\n        const newHabitObj = {\r\n            id: editingHabit?.id || `temp-h-${Date.now()}`,\r\n            ...habitData\r\n        };\r\n\r\n        if (mode === 'create') {\r\n            if (editingHabit) {\r\n                setLocalHabits(prev => prev.map(h => h.id === editingHabit.id ? newHabitObj : h));\r\n            } else {\r\n                setLocalHabits(prev => [...prev, newHabitObj]);\r\n            }\r\n        } else {\r\n            if (onManageHabit) {\r\n                const action = editingHabit ? 'update' : 'create';\r\n                onManageHabit(action, newHabitObj);\r\n            }\r\n        }\r\n        setIsHabitModalOpen(false);\r\n    };\r\n\r\n    // Handle deleting a habit from the library/history view in the modal\r\n    const handleDeleteFromLibrary = async (habitId: string) => {\r\n        if (onDeleteHabitFromDB) {\r\n            await onDeleteHabitFromDB(habitId);\r\n        } else if (onManageHabit) {\r\n            onManageHabit('delete', { id: habitId });\r\n        } else {\r\n            console.warn(\"Delete from library not fully supported in create mode without parent handler\");\r\n        }\r\n    };\r\n\r\n    const handleDeleteItem = (id: string, type: 'goal' | 'habit') => {\r\n        if (verifyDeleteId !== id) {\r\n            setVerifyDeleteId(id);\r\n            setTimeout(() => setVerifyDeleteId(null), 3000);\r\n            return;\r\n        }\r\n\r\n        if (mode === 'create') {\r\n            if (type === 'goal') setLocalGoals(prev => prev.filter(g => g.id !== id));\r\n            else setLocalHabits(prev => prev.filter(h => h.id !== id));\r\n        } else {\r\n            if (type === 'goal' && onManageGoal) onManageGoal('delete', { id });\r\n            if (type === 'habit' && onManageHabit) onManageHabit('delete', { id });\r\n        }\r\n        setVerifyDeleteId(null);\r\n    };\r\n\r\n    // Open Handlers\r\n    const openAddGoal = () => { setEditingGoal(undefined); setIsGoalModalOpen(true); };\r\n    const openEditGoal = (g: Goal) => { setEditingGoal(g); setIsGoalModalOpen(true); };\r\n    const openAddHabit = () => { setEditingHabit(undefined); setIsHabitModalOpen(true); };\r\n    const openEditHabit = (h: Habit) => { setEditingHabit(h); setIsHabitModalOpen(true); };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n            <div className=\"w-full max-w-4xl rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col h-[85vh]\" onClick={e => e.stopPropagation()}>\r\n\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-graphite-200 dark:border-graphite-800 flex justify-between items-center bg-graphite-50 dark:bg-graphite-950/50 rounded-t-2xl\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n                            {mode === 'create' ? <Rocket size={20} className=\"text-pacific-500\" /> : <Edit3 size={20} className=\"text-pacific-500\" />}\r\n                            {mode === 'create' ? 'Initialize New Cycle' : 'Cycle Editor'}\r\n                        </h2>\r\n                        <div className=\"text-xs text-graphite-500 mt-1 uppercase tracking-wider\">\r\n                            {mode === 'create' ? 'System Configuration' : `Cycle ${cycle?.sprint_number} Configuration`}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"flex bg-white dark:bg-graphite-800 p-1 rounded-xl border border-graphite-200 dark:border-graphite-700\">\r\n                        {[\r\n                            { id: 'strategy', icon: <Target size={14} /> },\r\n                            { id: 'identity', icon: <Fingerprint size={14} /> },\r\n                            { id: 'mantras', icon: <Brain size={14} /> },\r\n                            { id: 'goals', icon: <CheckCircle2 size={14} /> },\r\n                            { id: 'habits', icon: <List size={14} /> }\r\n                        ].map(tab => (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id as any)}\r\n                                className={`flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all ${activeTab === tab.id\r\n                                    ? 'bg-pacific-500 text-white shadow-md'\r\n                                    : 'text-graphite-500 hover:text-graphite-900 dark:hover:text-graphite-white hover:bg-graphite-50 dark:hover:bg-graphite-700'\r\n                                    }`}\r\n                            >\r\n                                {tab.icon} {tab.id}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <button onClick={onClose} type=\"button\" className=\"text-graphite-400 hover:text-white transition-colors\"><X size={24} /></button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-8 bg-graphite-50/50 dark:bg-graphite-900/50\">\r\n                    {/* STRATEGY TAB */}\r\n                    {activeTab === 'strategy' && (\r\n                        <div className=\"space-y-6 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2\">\r\n\r\n                            {/* CREATE MODE: Configuration Fields */}\r\n                            {mode === 'create' && (\r\n                                <div className=\"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm space-y-4\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-2 text-pacific-500 text-xs font-bold uppercase tracking-widest\">\r\n                                            <Calendar size={14} /> Temporal Config\r\n                                        </div>\r\n                                        <div className=\"text-[10px] font-bold text-pacific-600 dark:text-pacific-400 bg-pacific-50 dark:bg-pacific-900/20 px-2 py-1 rounded\">\r\n                                            AUTO-SUGGESTED\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Start Date</label>\r\n                                            <input\r\n                                                type=\"date\"\r\n                                                value={startDate}\r\n                                                onChange={handleManualStartDateChange}\r\n                                                className=\"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">End Date</label>\r\n                                            <input\r\n                                                type=\"date\"\r\n                                                value={endDate}\r\n                                                onChange={e => setEndDate(e.target.value)}\r\n                                                className=\"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-4 pt-2\">\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Cycle Number (1-{maxCycles})</label>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                min=\"1\"\r\n                                                max={maxCycles}\r\n                                                value={sprintNumber}\r\n                                                onChange={e => {\r\n                                                    const val = Number(e.target.value);\r\n                                                    setSprintNumber(val);\r\n                                                    if (val > maxCycles) setError(`Maximum ${maxCycles} cycles allowed per version.`);\r\n                                                    else setError(null);\r\n                                                }}\r\n                                                className={`w-full bg-graphite-50 dark:bg-graphite-950 border rounded-xl px-3 py-2.5 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500 ${error ? 'border-red-500 ring-1 ring-red-500/20' : 'border-graphite-200 dark:border-graphite-700'}`}\r\n                                            />\r\n                                            {error && <p className=\"text-red-500 text-[10px] mt-1 font-bold flex items-center gap-1\"><AlertCircle size={10} /> {error}</p>}\r\n                                        </div>\r\n                                        <div className=\"flex items-end\">\r\n                                            <button\r\n                                                onClick={() => setIsActive(!isActive)}\r\n                                                className={`w-full py-2.5 rounded-xl border flex items-center justify-center gap-2 text-sm font-bold transition-all ${isActive ? 'bg-pacific-500/10 border-pacific-500/50 text-pacific-600 dark:text-pacific-400' : 'bg-graphite-50 dark:bg-graphite-950 border-graphite-200 dark:border-graphite-700 text-graphite-500'}`}\r\n                                            >\r\n                                                <Power size={16} /> {isActive ? 'Status: Active' : 'Status: Inactive'}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-4\">Focus Priorities</label>\r\n                                <div className=\"space-y-3\">\r\n                                    {priorities.map((p, i) => (\r\n                                        <div key={i} className=\"flex gap-3\">\r\n                                            <span className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-graphite-100 dark:bg-graphite-800 font-bold text-graphite-500 border border-graphite-200 dark:border-graphite-700\">{i + 1}</span>\r\n                                            <input value={p} onChange={e => { const newP = [...priorities]; newP[i] = e.target.value; setPriorities(newP); }} className=\"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 text-sm focus:outline-none focus:border-pacific-500 transition-colors\" placeholder={`Priority ${i + 1}`} />\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-2\">Current Friction/Problems</label>\r\n                                <textarea value={problems} onChange={e => setProblems(e.target.value)} rows={3} className=\"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl p-4 text-sm focus:outline-none focus:border-pacific-500 resize-none transition-colors\" placeholder=\"What is slowing you down?\" />\r\n                            </div>\r\n                            <div className=\"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-2\">Learning Focus</label>\r\n                                <input value={learning} onChange={e => setLearning(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl p-4 text-sm focus:outline-none focus:border-pacific-500 transition-colors\" placeholder=\"One major skill to master...\" />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* IDENTITY TAB */}\r\n                    {activeTab === 'identity' && (\r\n                        <div className=\"space-y-8 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2\">\r\n                            {[{ title: 'Core Beliefs', items: beliefs, add: handleAddBelief, val: tempBelief, set: setTempBelief, icon: <Brain size={18} /> }, { title: 'Characteristics', items: characteristics, add: handleAddChar, val: tempChar, set: setTempChar, icon: <Fingerprint size={18} /> }, { title: 'Skills Acquisition', items: skills, add: handleAddSkill, val: tempSkill, set: setTempSkill, icon: <Activity size={18} /> }].map((section, idx) => (\r\n                                <div key={idx} className=\"bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                                    <h3 className=\"text-sm font-bold text-graphite-900 dark:text-white flex items-center gap-2 mb-4\">{section.icon} {section.title}</h3>\r\n                                    <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                                        {section.items.map((item, i) => (\r\n                                            <span key={i} className=\"bg-graphite-100 dark:bg-graphite-800 px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-2 border border-graphite-200 dark:border-graphite-700\">\r\n                                                {item}\r\n                                                <button onClick={() => { if (section.title === 'Core Beliefs') setBeliefs(beliefs.filter((_, j) => j !== i)); else if (section.title === 'Characteristics') setCharacteristics(characteristics.filter((_, j) => j !== i)); else setSkills(skills.filter((_, j) => j !== i)); }} className=\"text-graphite-400 hover:text-red-500\"><X size={12} /></button>\r\n                                            </span>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input value={section.val} onChange={e => section.set(e.target.value)} onKeyDown={e => e.key === 'Enter' && section.add()} className=\"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 transition-colors\" placeholder={`Add ${section.title}...`} />\r\n                                        <button onClick={section.add} className=\"p-2 bg-pacific-500 text-white rounded-xl hover:bg-pacific-600 transition-colors\"><Plus size={20} /></button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* MANTRAS TAB */}\r\n                    {activeTab === 'mantras' && (\r\n                        <div className=\"space-y-4 max-w-2xl mx-auto animate-in fade-in slide-in-from-right-2 bg-white dark:bg-graphite-900 p-6 rounded-2xl border border-graphite-200 dark:border-graphite-800 shadow-sm\">\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-3\">Select Active Mantras</label>\r\n                                <div className=\"grid grid-cols-1 gap-2 max-h-[400px] overflow-y-auto pr-2\">\r\n                                    {allMantras.map((m, i) => (\r\n                                        <div key={i} onClick={() => setSelectedMantras(prev => prev.includes(m) ? prev.filter(x => x !== m) : [...prev, m])} className={`p-3 rounded-xl border cursor-pointer transition-all flex items-center justify-between ${selectedMantras.includes(m) ? 'bg-pacific-50 border-pacific-500 text-pacific-700 dark:bg-pacific-900/20 dark:text-pacific-300' : 'bg-graphite-50 dark:bg-graphite-950 border-transparent text-graphite-600 dark:text-graphite-400 hover:bg-graphite-100 dark:hover:bg-graphite-800'}`}>\r\n                                            <span className=\"text-sm font-medium\">{m}</span>\r\n                                            {selectedMantras.includes(m) && <CheckCircle2 size={16} />}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2 pt-4 border-t border-graphite-200 dark:border-graphite-800\">\r\n                                <input value={newMantra} onChange={e => setNewMantra(e.target.value)} className=\"flex-1 bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 transition-colors\" placeholder=\"New Mantra...\" />\r\n                                <button onClick={handleAddMantra} className=\"px-4 bg-graphite-900 dark:bg-white text-white dark:text-graphite-900 rounded-xl font-bold text-xs uppercase tracking-wider\">ADD</button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* GOALS TAB */}\r\n                    {activeTab === 'goals' && (\r\n                        <div className=\"max-w-3xl mx-auto animate-in fade-in slide-in-from-right-2 space-y-6\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <h3 className=\"text-sm font-bold text-graphite-500 uppercase tracking-widest\">Active Goals</h3>\r\n                                <button onClick={openAddGoal} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white rounded-xl text-xs font-bold hover:bg-pacific-500 shadow-lg shadow-pacific-500/30 transition-colors\">\r\n                                    <Plus size={16} /> Add Goal\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                {localGoals.map((g) => (\r\n                                    <div key={g.id} className=\"p-4 bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-2xl flex justify-between items-center group hover:border-pacific-500/30 transition-all shadow-sm\">\r\n                                        <div>\r\n                                            <div className=\"font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n                                                {g.title}\r\n                                                <span className={`text-[10px] uppercase px-2 py-0.5 rounded border ${g.type === GoalType.TASK_PROJECT ? 'border-purple-200 text-purple-600 dark:border-purple-900 dark:text-purple-400' : 'border-bali-200 text-bali-600 dark:border-bali-900 dark:text-bali-400'}`}>\r\n                                                    {g.type === GoalType.TASK_PROJECT ? 'Project' : 'Metric'}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"text-xs text-graphite-500 mt-1 line-clamp-1\">{g.description}</div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <button onClick={() => openEditGoal(g)} className=\"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors\"><Edit3 size={16} /></button>\r\n                                            <button\r\n                                                onClick={() => handleDeleteItem(g.id, 'goal')}\r\n                                                className={`p-2 rounded-lg transition-all flex items-center gap-2 ${verifyDeleteId === g.id ? 'bg-red-500 text-white w-24 justify-center' : 'text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20'}`}\r\n                                            >\r\n                                                <Trash2 size={16} /> {verifyDeleteId === g.id && <span className=\"text-xs font-bold\">Confirm</span>}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {localGoals.length === 0 && <div className=\"text-center py-12 text-graphite-400 italic bg-graphite-50 dark:bg-graphite-950 rounded-2xl border border-dashed border-graphite-200 dark:border-graphite-800\">No goals defined.</div>}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* HABITS TAB */}\r\n                    {activeTab === 'habits' && (\r\n                        <div className=\"max-w-3xl mx-auto animate-in fade-in slide-in-from-right-2 space-y-6\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <h3 className=\"text-sm font-bold text-graphite-500 uppercase tracking-widest\">Cycle Habits</h3>\r\n                                <button onClick={openAddHabit} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white rounded-xl text-xs font-bold hover:bg-pacific-500 shadow-lg shadow-pacific-500/30 transition-colors\">\r\n                                    <Plus size={16} /> Add Habit\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                {localHabits.map((h) => (\r\n                                    <div key={h.id} className=\"p-4 bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 rounded-2xl flex justify-between items-center group hover:border-pacific-500/30 transition-all shadow-sm\">\r\n                                        <div>\r\n                                            <div className=\"font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n                                                {h.name}\r\n                                                {h.linked_goal_id && <span className=\"text-[10px] uppercase px-2 py-0.5 rounded bg-pacific-50 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400 font-bold flex items-center gap-1\"><AlertTriangle size={10} /> Linked</span>}\r\n                                            </div>\r\n                                            <div className=\"text-xs text-graphite-500 mt-1 flex items-center gap-3\">\r\n                                                <span className=\"bg-graphite-100 dark:bg-graphite-800 px-2 py-0.5 rounded\">{h.category}</span>\r\n                                                <span>Weight: {h.weight}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <button onClick={() => openEditHabit(h)} className=\"p-2 text-graphite-400 hover:text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-colors\"><Edit3 size={16} /></button>\r\n                                            <button\r\n                                                onClick={() => handleDeleteItem(h.id, 'habit')}\r\n                                                className={`p-2 rounded-lg transition-all flex items-center gap-2 ${verifyDeleteId === h.id ? 'bg-red-500 text-white w-24 justify-center' : 'text-graphite-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20'}`}\r\n                                            >\r\n                                                <Trash2 size={16} /> {verifyDeleteId === h.id && <span className=\"text-xs font-bold\">Confirm</span>}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {localHabits.length === 0 && <div className=\"text-center py-12 text-graphite-400 italic bg-graphite-50 dark:bg-graphite-950 rounded-2xl border border-dashed border-graphite-200 dark:border-graphite-800\">No habits defined.</div>}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 border-t border-graphite-200 dark:border-graphite-800 flex justify-end gap-3 bg-white dark:bg-graphite-900 rounded-b-2xl\">\r\n                    <button onClick={onClose} className=\"px-6 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors\">Close</button>\r\n                    <button onClick={handleFinalSave} className=\"px-8 py-2 bg-graphite-900 dark:bg-white text-white dark:text-graphite-900 rounded-xl text-sm font-bold shadow-lg hover:opacity-90 transition-opacity flex items-center gap-2\">\r\n                        {mode === 'create' ? <Rocket size={16} /> : <Save size={16} />}\r\n                        {mode === 'create' ? 'Initialize Cycle' : 'Save Cycle Config'}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Sub-Modals */}\r\n                <GoalFormModal\r\n                    isOpen={isGoalModalOpen}\r\n                    onClose={() => setIsGoalModalOpen(false)}\r\n                    onSave={handleGoalSaveWrapper}\r\n                    initialGoal={editingGoal}\r\n                    allHabits={allHabits}\r\n                    currentCycleHabits={localHabits}\r\n                />\r\n                <HabitFormModal\r\n                    isOpen={isHabitModalOpen}\r\n                    onClose={() => setIsHabitModalOpen(false)}\r\n                    onSave={handleHabitSaveWrapper}\r\n                    initialHabit={editingHabit}\r\n                    allHabits={allHabits}\r\n                    onDeleteFromLibrary={handleDeleteFromLibrary}\r\n                    onRenameCategory={onRenameCategory}\r\n                    onDeleteCategory={onDeleteCategory}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2779, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/CustomDatePicker.tsx"],"sourcesContent":["\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Calendar, ChevronLeft, ChevronRight, X, Clock } from 'lucide-react';\n\ninterface CustomDatePickerProps {\n  label: string;\n  value: string;\n  onChange: (date: string) => void;\n}\n\nexport const CustomDatePicker: React.FC<CustomDatePickerProps> = ({ label, value, onChange }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  // Default to today if no value, otherwise parse the YYYY-MM-DD string\n  const [viewDate, setViewDate] = useState(() => {\n      if (value) {\n          // Parse \"YYYY-MM-DD\" explicitly to avoid timezone shifts\n          const parts = value.split('-').map(Number);\n          if (parts.length === 3 && !isNaN(parts[0])) {\n             return new Date(parts[0], parts[1] - 1, parts[2]);\n          }\n      }\n      return new Date();\n  });\n  \n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Sync view if value changes externally, but only if widely different to allow browsing\n  useEffect(() => {\n      if (value) {\n          const parts = value.split('-').map(Number);\n          const date = new Date(parts[0], parts[1] - 1, parts[2]);\n          if (!isNaN(date.getTime())) {\n              if (date.getMonth() !== viewDate.getMonth() || date.getFullYear() !== viewDate.getFullYear()) {\n                 setViewDate(date);\n              }\n          }\n      }\n  }, [value]);\n\n  const formatDate = (dateStr: string) => {\n    if (!dateStr) return 'Select Date';\n    const parts = dateStr.split('-').map(Number);\n    const date = new Date(parts[0], parts[1] - 1, parts[2]);\n    if (isNaN(date.getTime())) return 'Select Date';\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  const changeMonth = (offset: number) => {\n    const newDate = new Date(viewDate);\n    newDate.setMonth(newDate.getMonth() + offset);\n    setViewDate(newDate);\n  };\n\n  const handleDayClick = (day: number, type: 'prev' | 'current' | 'next') => {\n    const year = viewDate.getFullYear();\n    const month = viewDate.getMonth();\n    \n    let targetDate: Date;\n    if (type === 'prev') {\n        targetDate = new Date(year, month - 1, day);\n    } else if (type === 'next') {\n        targetDate = new Date(year, month + 1, day);\n    } else {\n        targetDate = new Date(year, month, day);\n    }\n\n    // Format to YYYY-MM-DD manually\n    const y = targetDate.getFullYear();\n    const m = String(targetDate.getMonth() + 1).padStart(2, '0');\n    const d = String(targetDate.getDate()).padStart(2, '0');\n    \n    onChange(`${y}-${m}-${d}`);\n    setIsOpen(false);\n    setViewDate(targetDate);\n  };\n\n  const handleToday = () => {\n      const today = new Date();\n      const y = today.getFullYear();\n      const m = String(today.getMonth() + 1).padStart(2, '0');\n      const d = String(today.getDate()).padStart(2, '0');\n      onChange(`${y}-${m}-${d}`);\n      setViewDate(today);\n      setIsOpen(false);\n  };\n\n  const handleClear = () => {\n      onChange('');\n      setIsOpen(false);\n  };\n\n  // Grid Generation Logic\n  const generateGrid = () => {\n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      \n      const firstDayOfMonth = new Date(year, month, 1).getDay(); // 0-6\n      const daysInMonth = new Date(year, month + 1, 0).getDate();\n      const daysInPrevMonth = new Date(year, month, 0).getDate();\n      \n      const days = [];\n      \n      // Prev Month Padding\n      for (let i = firstDayOfMonth - 1; i >= 0; i--) {\n          days.push({ day: daysInPrevMonth - i, type: 'prev' as const });\n      }\n      \n      // Current Month\n      for (let i = 1; i <= daysInMonth; i++) {\n          days.push({ day: i, type: 'current' as const });\n      }\n      \n      // Next Month Padding (Fill to 42 cells for 6 rows)\n      const remaining = 42 - days.length;\n      for (let i = 1; i <= remaining; i++) {\n          days.push({ day: i, type: 'next' as const });\n      }\n      \n      return days;\n  };\n\n  const grid = generateGrid();\n  const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  \n  const isSelected = (day: number, type: string) => {\n      if (!value) return false;\n      const parts = value.split('-').map(Number);\n      const selected = new Date(parts[0], parts[1] - 1, parts[2]);\n      if (isNaN(selected.getTime())) return false;\n      \n      // Calculate the actual date of the cell\n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      let checkDate: Date;\n      \n      if (type === 'prev') checkDate = new Date(year, month - 1, day);\n      else if (type === 'next') checkDate = new Date(year, month + 1, day);\n      else checkDate = new Date(year, month, day);\n\n      return checkDate.getTime() === selected.getTime();\n  };\n\n  const isToday = (day: number, type: string) => {\n      const today = new Date();\n      // Normalize today\n      today.setHours(0,0,0,0);\n      \n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      let checkDate: Date;\n      \n      if (type === 'prev') checkDate = new Date(year, month - 1, day);\n      else if (type === 'next') checkDate = new Date(year, month + 1, day);\n      else checkDate = new Date(year, month, day);\n\n      return checkDate.getTime() === today.getTime();\n  };\n\n  return (\n    <div className=\"relative\" ref={containerRef}>\n      <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">{label}</label>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        className={`w-full flex items-center justify-between rounded-xl bg-graphite-50 dark:bg-graphite-800 border p-3 text-sm transition-all\n          ${isOpen ? 'border-pacific-500 ring-2 ring-pacific-500/20' : 'border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50'}\n          ${value ? 'text-graphite-900 dark:text-white' : 'text-graphite-400'}\n        `}\n      >\n        <span className=\"font-medium\">{formatDate(value)}</span>\n        <Calendar size={16} className=\"text-pacific-500\" />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-2 w-full min-w-[300px] bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-700 rounded-xl shadow-2xl z-50 p-4 animate-in fade-in zoom-in-95 duration-200\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <button type=\"button\" onClick={() => changeMonth(-1)} className=\"p-1 hover:bg-graphite-100 dark:hover:bg-graphite-800 rounded-lg text-graphite-500 dark:text-graphite-400 transition-colors\">\n              <ChevronLeft size={20} />\n            </button>\n            <span className=\"text-sm font-bold text-graphite-900 dark:text-white\">\n              {monthNames[viewDate.getMonth()]} {viewDate.getFullYear()}\n            </span>\n            <button type=\"button\" onClick={() => changeMonth(1)} className=\"p-1 hover:bg-graphite-100 dark:hover:bg-graphite-800 rounded-lg text-graphite-500 dark:text-graphite-400 transition-colors\">\n              <ChevronRight size={20} />\n            </button>\n          </div>\n\n          {/* Weekdays */}\n          <div className=\"grid grid-cols-7 gap-1 mb-2\">\n            {['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'].map(d => (\n              <div key={d} className=\"text-center text-[10px] font-bold text-graphite-400 uppercase\">\n                {d}\n              </div>\n            ))}\n          </div>\n\n          {/* Days Grid */}\n          <div className=\"grid grid-cols-7 gap-1\">\n            {grid.map((cell, i) => (\n              <button\n                key={i}\n                type=\"button\"\n                onClick={() => handleDayClick(cell.day, cell.type)}\n                className={`\n                  aspect-square flex items-center justify-center rounded-lg text-sm font-medium transition-all\n                  ${isSelected(cell.day, cell.type) \n                    ? 'bg-pacific-500 text-white shadow-lg shadow-pacific-500/30' \n                    : isToday(cell.day, cell.type)\n                        ? 'text-pacific-500 font-bold bg-pacific-50 dark:bg-pacific-900/10 hover:bg-pacific-100 dark:hover:bg-pacific-900/30'\n                        : cell.type === 'current'\n                            ? 'text-graphite-700 dark:text-graphite-300 hover:bg-graphite-100 dark:hover:bg-graphite-800'\n                            : 'text-graphite-400/30 dark:text-graphite-600/30 hover:bg-graphite-50 dark:hover:bg-graphite-800/50'\n                  }\n                `}\n              >\n                {cell.day}\n              </button>\n            ))}\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"mt-3 pt-3 border-t border-graphite-100 dark:border-graphite-800 flex items-center justify-between px-1\">\n             <button\n               type=\"button\"\n               onClick={handleClear}\n               className=\"flex items-center gap-1.5 text-xs font-bold text-graphite-400 hover:text-red-500 transition-colors\"\n             >\n               <X size={14} /> Clear\n             </button>\n             <button\n               type=\"button\"\n               onClick={handleToday}\n               className=\"flex items-center gap-1.5 text-xs font-bold text-pacific-600 dark:text-pacific-400 hover:text-pacific-500 transition-colors\"\n             >\n               <Clock size={14} /> Today\n             </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/NewVersionModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Layers, Calendar } from 'lucide-react';\r\n\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { CustomDatePicker } from './CustomDatePicker';\r\n\r\ninterface NewVersionModalProps {\r\n  onClose: () => void;\r\n  onCreate: (data: { title: string; description: string; number: number; startDate: string }) => void;\r\n  suggestedNumber: number;\r\n}\r\n\r\nexport const NewVersionModal: React.FC<NewVersionModalProps> = ({ onClose, onCreate, suggestedNumber }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [number, setNumber] = useState(suggestedNumber);\r\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [versionDays, setVersionDays] = useState(90); // Default, will fetch\r\n  const [calculatedEndDate, setCalculatedEndDate] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Fetch system settings\r\n    supabaseService.getSystemSettings().then(settings => {\r\n      setVersionDays(settings.days);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Auto-calculate end date\r\n    if (!startDate) {\r\n      setCalculatedEndDate('-');\r\n      return;\r\n    }\r\n    const start = new Date(startDate);\r\n    if (isNaN(start.getTime())) {\r\n      setCalculatedEndDate('-');\r\n      return;\r\n    }\r\n    const end = new Date(start);\r\n    end.setDate(start.getDate() + versionDays);\r\n    setCalculatedEndDate(end.toLocaleDateString(undefined, { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }));\r\n  }, [startDate, versionDays]);\r\n\r\n  const handleSubmit = () => {\r\n    onCreate({ title, description, number, startDate });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n      <div className=\"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800\" onClick={(e) => e.stopPropagation()}>\r\n        <h2 className=\"mb-6 text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n          <div className=\"p-2 bg-pacific-100 text-pacific-600 rounded-lg\"><Layers size={20} /></div>\r\n          Initialize New Version\r\n        </h2>\r\n        <div className=\"space-y-5\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Version ID</label>\r\n              <input type=\"number\" value={number} onChange={(e) => setNumber(Number(e.target.value))} className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\" />\r\n            </div>\r\n            <div>\r\n              <CustomDatePicker\r\n                label=\"Start Date\"\r\n                value={startDate}\r\n                onChange={setStartDate}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Read-only calculation feedback */}\r\n          <div className=\"p-3 bg-graphite-50 dark:bg-graphite-800/50 rounded-xl border border-graphite-200 dark:border-graphite-700 flex items-center gap-3\">\r\n            <Calendar size={16} className=\"text-pacific-500\" />\r\n            <div className=\"text-xs\">\r\n              <span className=\"text-graphite-500 uppercase font-bold tracking-wider\">Projected End: </span>\r\n              <span className=\"text-graphite-900 dark:text-white font-mono\">{calculatedEndDate}</span>\r\n              <span className=\"block text-[10px] text-graphite-400 mt-0.5\">Based on system tempo of {versionDays} days.</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Identity Title</label>\r\n            <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} placeholder=\"e.g., The Architect\" className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Persona Definition</label>\r\n            <textarea value={description} onChange={(e) => setDescription(e.target.value)} placeholder=\"Define the archetype...\" rows={3} className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all resize-none\" />\r\n          </div>\r\n          <div className=\"flex justify-end gap-3 pt-6\">\r\n            <button onClick={onClose} type=\"button\" className=\"rounded-xl px-4 py-2 text-sm font-medium text-graphite-500 hover:text-graphite-800 dark:hover:text-graphite-200 transition-colors\">Cancel</button>\r\n            <button onClick={handleSubmit} type=\"button\" className=\"rounded-xl bg-pacific-600 px-6 py-2.5 text-sm font-bold text-white hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/30\">Initialize Version</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3458, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/lab/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { Goal, GoalType, Version, Cycle, HabitWeight, Habit, EntityStatus } from '@/types/types';\r\nimport { Target, Zap, Circle, CheckCircle2, Plus, ArrowRight, Brain, AlertTriangle, List, X, Layers, Activity, Fingerprint, ChevronRight, BarChart3, Calendar, ChevronDown, Edit3, Save, Trash2, Check, LayoutList, Link as LinkIcon, ChevronUp, MoreHorizontal, Copy, History, RefreshCw, Search, CornerDownRight, Archive, Eye, EyeOff } from 'lucide-react';\r\nimport { GoalFormModal } from '@/components/GoalFormModal';\r\nimport { CycleEditorModal } from '@/components/CycleEditorModal';\r\nimport { NewVersionModal } from '@/components/NewVersionModal';\r\n\r\n// --- MODAL COMPONENTS ---\r\n\r\ninterface CycleSettingsModalProps {\r\n    cycle: Cycle;\r\n    isActive: boolean;\r\n    onClose: () => void;\r\n    onSave: (cycleId: string, startDate: string, endDate: string, setActive: boolean) => void;\r\n}\r\n\r\nconst CycleSettingsModal: React.FC<CycleSettingsModalProps> = ({ cycle, isActive, onClose, onSave }) => {\r\n    const [startDate, setStartDate] = useState(cycle.start_date);\r\n    const [endDate, setEndDate] = useState(cycle.end_date);\r\n    const [makeActive, setMakeActive] = useState(isActive);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n            <div\r\n                className=\"w-full max-w-md rounded-2xl bg-white dark:bg-graphite-900 p-6 shadow-2xl border border-graphite-200 dark:border-graphite-800 animate-in zoom-in-95 duration-200\"\r\n                onClick={(e: React.MouseEvent) => e.stopPropagation()}\r\n            >\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h2 className=\"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n                        <Calendar size={18} className=\"text-pacific-500\" /> Cycle Settings\r\n                    </h2>\r\n                    <button onClick={onClose} type=\"button\"><X size={18} className=\"text-graphite-400 hover:text-white\" /></button>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">Start Date</label>\r\n                        <input type=\"date\" value={startDate} onChange={e => setStartDate(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-graphite-500 uppercase mb-1.5\">End Date</label>\r\n                        <input type=\"date\" value={endDate} onChange={e => setEndDate(e.target.value)} className=\"w-full bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 rounded-xl px-3 py-2 text-sm text-graphite-900 dark:text-white focus:outline-none focus:border-pacific-500\" />\r\n                    </div>\r\n\r\n                    <div className=\"pt-2\">\r\n                        <label className={`flex items-center gap-3 p-3 rounded-xl border transition-colors cursor-pointer ${makeActive ? 'bg-pacific-50 dark:bg-pacific-900/10 border-pacific-500/50' : 'bg-graphite-50 dark:bg-graphite-800 border-graphite-200 dark:border-graphite-700 hover:border-graphite-400'}`}>\r\n                            <div className={`h-5 w-5 rounded-full border flex items-center justify-center transition-colors ${makeActive ? 'bg-pacific-500 border-pacific-500' : 'border-graphite-400'}`}>\r\n                                {makeActive && <Check size={12} className=\"text-white\" />}\r\n                            </div>\r\n                            <input type=\"checkbox\" checked={makeActive} onChange={e => !isActive && setMakeActive(e.target.checked)} className=\"hidden\" disabled={isActive} />\r\n                            <div>\r\n                                <div className=\"text-sm font-bold text-graphite-900 dark:text-white\">Active Status</div>\r\n                                <div className=\"text-xs text-graphite-500\">{isActive ? 'Currently the active cycle' : 'Set as current active cycle'}</div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end gap-3 pt-6 mt-2 border-t border-graphite-200 dark:border-graphite-800\">\r\n                    <button onClick={onClose} type=\"button\" className=\"px-4 py-2 text-sm font-bold text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors\">Cancel</button>\r\n                    <button onClick={() => onSave(cycle.id, startDate, endDate, makeActive)} type=\"button\" className=\"px-6 py-2 bg-pacific-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-pacific-500/30 hover:bg-pacific-500 transition-colors flex items-center gap-2\">\r\n                        <Save size={14} /> Save Changes\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface HabitSelectorModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSelect: (habit: Habit) => void;\r\n    currentCycleHabits: Habit[];\r\n    allHabits: Habit[];\r\n}\r\n\r\nconst HabitSelectorModal: React.FC<HabitSelectorModalProps> = ({ isOpen, onClose, onSelect, currentCycleHabits, allHabits }) => {\r\n    const [activeTab, setActiveTab] = useState<'current' | 'database'>('current');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    if (!isOpen) return null;\r\n    const uniqueDbHabits = Array.from(new Map(allHabits.map((h: Habit) => [h.name, h])).values());\r\n    const displayHabits = activeTab === 'current' ? currentCycleHabits : uniqueDbHabits;\r\n    const filteredHabits = displayHabits.filter((h: Habit) => h.name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n            <div className=\"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800 flex flex-col max-h-[80vh]\" onClick={(e) => e.stopPropagation()}>\r\n                <div className=\"p-6 border-b border-graphite-200 dark:border-graphite-800\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <h2 className=\"text-lg font-bold text-graphite-900 dark:text-white flex items-center gap-2\"><LinkIcon size={18} className=\"text-pacific-500\" /> Link Habit</h2>\r\n                        <button onClick={onClose} className=\"text-graphite-400 hover:text-graphite-600 dark:hover:text-white\"><X size={18} /></button>\r\n                    </div>\r\n                    <div className=\"flex gap-2 p-1 bg-graphite-100 dark:bg-graphite-800 rounded-lg mb-4\">\r\n                        <button onClick={() => setActiveTab('current')} className={`flex-1 py-1.5 text-xs font-bold uppercase rounded-md transition-all ${activeTab === 'current' ? 'bg-white dark:bg-graphite-700 text-graphite-900 dark:text-white shadow-sm' : 'text-graphite-500'}`}>Current Cycle</button>\r\n                        <button onClick={() => setActiveTab('database')} className={`flex-1 py-1.5 text-xs font-bold uppercase rounded-md transition-all ${activeTab === 'database' ? 'bg-white dark:bg-graphite-700 text-graphite-900 dark:text-white shadow-sm' : 'text-graphite-500'}`}>Database</button>\r\n                    </div>\r\n                    <input value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"Search habits...\" className=\"w-full bg-graphite-50 dark:bg-graphite-950 border border-graphite-200 dark:border-graphite-700 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-pacific-500 text-graphite-900 dark:text-white\" />\r\n                </div>\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\r\n                    {filteredHabits.length > 0 ? filteredHabits.map(habit => (\r\n                        <button key={habit.id} onClick={() => onSelect(habit)} className=\"w-full text-left p-4 rounded-xl border border-graphite-200 dark:border-graphite-800 hover:border-pacific-500 dark:hover:border-pacific-500 bg-white dark:bg-graphite-800/50 hover:bg-pacific-50 dark:hover:bg-pacific-900/10 transition-all group\">\r\n                            <div className=\"flex justify-between items-center mb-1\">\r\n                                <span className=\"font-semibold text-graphite-900 dark:text-white group-hover:text-pacific-600 dark:group-hover:text-pacific-400 transition-colors\">{habit.name}</span>\r\n                                {activeTab === 'database' && <span className=\"text-[10px] font-bold uppercase text-graphite-400 bg-graphite-100 dark:bg-graphite-800 px-2 py-0.5 rounded\">Import</span>}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-xs text-graphite-500\">\r\n                                <span>{habit.category}</span>\r\n                                <span className=\"text-graphite-300\"></span>\r\n                                <span className={habit.weight === HabitWeight.HIGH ? 'text-pacific-500 font-bold' : ''}>{habit.weight === HabitWeight.HIGH ? 'High Priority' : habit.weight === HabitWeight.MEDIUM ? 'Medium' : 'Low'}</span>\r\n                            </div>\r\n                        </button>\r\n                    )) : (<div className=\"text-center py-8 text-graphite-400 text-sm\">No habits found.</div>)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lab: React.FC = () => {\r\n    const [data, setData] = useState<{ goals: Goal[]; version: Version | null; cycles: Cycle[]; habits: Habit[]; activeCycleId: string | null } | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showNewVersion, setShowNewVersion] = useState(false);\r\n    const [showNewCycle, setShowNewCycle] = useState(false);\r\n    const [editingCycle, setEditingCycle] = useState<Cycle | null>(null);\r\n    const [cycleInSettings, setCycleInSettings] = useState<Cycle | null>(null);\r\n    const [showAddGoalModal, setShowAddGoalModal] = useState(false);\r\n    const [targetCycleIdForAddGoal, setTargetCycleIdForAddGoal] = useState<string | null>(null);\r\n    const [showHabitSelector, setShowHabitSelector] = useState(false);\r\n    const [selectedGoalIdForLinking, setSelectedGoalIdForLinking] = useState<string | null>(null);\r\n    const [allHabitsHistory, setAllHabitsHistory] = useState<Habit[]>([]);\r\n    const [editingSubtask, setEditingSubtask] = useState<{ goalId: string, index: number } | null>(null);\r\n    const [editSubtaskText, setEditSubtaskText] = useState('');\r\n    const [addingSubtaskGoalId, setAddingSubtaskGoalId] = useState<string | null>(null);\r\n    const [newSubtaskText, setNewSubtaskText] = useState('');\r\n    const [expandedCycleId, setExpandedCycleId] = useState<string | null>(null);\r\n    const [collapsedGoals, setCollapsedGoals] = useState<Set<string>>(new Set());\r\n    const [showArchived, setShowArchived] = useState(false);\r\n    const [verifyDeleteId, setVerifyDeleteId] = useState<string | null>(null);\r\n    const [maxCycles, setMaxCycles] = useState(6);\r\n\r\n    const loadLabData = async () => {\r\n        try {\r\n            const labData = await supabaseService.getLabData();\r\n            setData(labData);\r\n            const history = await supabaseService.getAllHabits();\r\n            setAllHabitsHistory(history);\r\n            const settings = await supabaseService.getSystemSettings();\r\n            setMaxCycles(settings.cycles);\r\n            if (labData.activeCycleId && !expandedCycleId) setExpandedCycleId(labData.activeCycleId);\r\n            setLoading(false);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => { loadLabData(); }, []);\r\n\r\n    const handleCreateVersion = async (vData: { title: string; description: string; number: number; startDate: string }) => { await supabaseService.createVersion(vData); setShowNewVersion(false); loadLabData(); };\r\n\r\n    const handleCreateCycle = async (cData: any, gData: any[], hData: any[]) => {\r\n        await supabaseService.createCycle(cData, gData, hData);\r\n        setShowNewCycle(false);\r\n        loadLabData();\r\n    };\r\n\r\n    const handleUpdateCycle = async (updatedCycle: Cycle) => { await supabaseService.updateCycle(updatedCycle); setEditingCycle(null); loadLabData(); };\r\n\r\n    const handleArchiveCycle = async (e: React.MouseEvent, cycleId: string) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        try {\r\n            if (!data) return;\r\n            const cycle = data.cycles.find((c: Cycle) => c.id === cycleId);\r\n            if (!cycle) return;\r\n\r\n            const currentStatus = cycle.status || EntityStatus.ACTIVE;\r\n            const newStatus = currentStatus === EntityStatus.ARCHIVED ? EntityStatus.ACTIVE : EntityStatus.ARCHIVED;\r\n\r\n            const updatedCycles = data.cycles.map((c: Cycle) => c.id === cycleId ? { ...c, status: newStatus } : c);\r\n            setData({ ...data, cycles: updatedCycles });\r\n\r\n            await supabaseService.updateCycle({ ...cycle, status: newStatus });\r\n            await loadLabData();\r\n        } catch (e) {\r\n            console.error(\"Archive failed\", e);\r\n            loadLabData();\r\n        }\r\n    };\r\n\r\n    const handleDeleteCycle = async (e: React.MouseEvent, cycleId: string) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (verifyDeleteId !== cycleId) {\r\n            setVerifyDeleteId(cycleId);\r\n            setTimeout(() => setVerifyDeleteId(curr => curr === cycleId ? null : curr), 3000);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setData((currentData: any) => {\r\n                if (!currentData) return null;\r\n                return {\r\n                    ...currentData,\r\n                    cycles: currentData.cycles.filter((c: Cycle) => c.id !== cycleId)\r\n                };\r\n            });\r\n\r\n            if (expandedCycleId === cycleId) setExpandedCycleId(null);\r\n\r\n            await supabaseService.deleteCycle(cycleId);\r\n            await loadLabData();\r\n\r\n            setVerifyDeleteId(null);\r\n        } catch (err) {\r\n            loadLabData();\r\n        }\r\n    };\r\n\r\n    const handleUpdateCycleSettings = async (cycleId: string, startDate: string, endDate: string, setActive: boolean) => {\r\n        if (!data) return;\r\n        const cycleToUpdate = data.cycles.find((c: Cycle) => c.id === cycleId);\r\n        if (cycleToUpdate) {\r\n            const updatedCycle = { ...cycleToUpdate, start_date: startDate, end_date: endDate };\r\n            await supabaseService.updateCycle(updatedCycle);\r\n        }\r\n        if (setActive && data.activeCycleId !== cycleId) { await supabaseService.setCycleActive(cycleId); }\r\n        setCycleInSettings(null);\r\n        loadLabData();\r\n    };\r\n\r\n    const handleAddGoal = async (goalData: { title: string; description: string; type: GoalType; subtasks?: string[] }, linkedHabit: Habit | null) => {\r\n        if (!targetCycleIdForAddGoal) return;\r\n        const newGoalId = `g-${crypto.randomUUID()}`;\r\n        const newGoal: Goal = { id: newGoalId, cycle_id: targetCycleIdForAddGoal, title: goalData.title, description: goalData.description, type: goalData.type, };\r\n        if (goalData.type === GoalType.TASK_PROJECT) {\r\n            const tasks = goalData.subtasks?.map(rawName => {\r\n                const match = rawName.match(/^(\\s*)/); const leadingStr = match ? match[1] : ''; const normalizedIndent = leadingStr.replace(/\\t/g, '  '); const level = Math.floor(normalizedIndent.length / 2);\r\n                return { name: rawName.trim(), done: false, level };\r\n            }) || [];\r\n            newGoal.subtasks = tasks;\r\n        } else if (goalData.type === GoalType.CONSISTENCY_METRIC && linkedHabit) {\r\n            let habitId = linkedHabit.id;\r\n            if (linkedHabit.cycle_id !== targetCycleIdForAddGoal) {\r\n                const newHabitId = `h-${crypto.randomUUID()}`; const newHabit: Habit = { ...linkedHabit, id: newHabitId, cycle_id: targetCycleIdForAddGoal, linked_goal_id: newGoalId };\r\n                await supabaseService.addHabit(newHabit); habitId = newHabitId;\r\n            } else { const updatedHabit = { ...linkedHabit, linked_goal_id: newGoalId }; await supabaseService.updateHabit(updatedHabit); }\r\n            newGoal.linked_habit_id = habitId; newGoal.current_streak = 0;\r\n        }\r\n        await supabaseService.addGoal(newGoal); setShowAddGoalModal(false); loadLabData();\r\n    };\r\n\r\n    const handleDeleteGoal = async (id: string) => { await supabaseService.deleteGoal(id); loadLabData(); };\r\n    const handleOpenHabitSelector = (goalId: string) => { setSelectedGoalIdForLinking(goalId); setShowHabitSelector(true); };\r\n    const handleLinkHabit = async (habit: Habit) => {\r\n        if (!data || !selectedGoalIdForLinking) return;\r\n        const isCurrentCycle = habit.cycle_id === data.activeCycleId;\r\n        let habitIdToLink = habit.id;\r\n        if (!isCurrentCycle && data.activeCycleId) {\r\n            const newHabit: Habit = { id: `h-${crypto.randomUUID()}`, cycle_id: data.activeCycleId, name: habit.name, category: habit.category, weight: habit.weight, linked_goal_id: selectedGoalIdForLinking };\r\n            await supabaseService.addHabit(newHabit); habitIdToLink = newHabit.id;\r\n        } else { const updatedHabit = { ...habit, linked_goal_id: selectedGoalIdForLinking }; await supabaseService.updateHabit(updatedHabit); }\r\n        const goalToUpdate = data.goals.find((g: Goal) => g.id === selectedGoalIdForLinking);\r\n        if (goalToUpdate) { const updatedGoal = { ...goalToUpdate, linked_habit_id: habitIdToLink }; await supabaseService.updateGoal(updatedGoal); }\r\n        setShowHabitSelector(false); setSelectedGoalIdForLinking(null); loadLabData();\r\n    };\r\n\r\n    const handleToggleSubtask = async (goal: Goal, index: number) => { if (!goal.subtasks) return; const updatedSubtasks = [...goal.subtasks]; updatedSubtasks[index].done = !updatedSubtasks[index].done; const updatedGoal = { ...goal, subtasks: updatedSubtasks }; await supabaseService.updateGoal(updatedGoal); loadLabData(); };\r\n    const handleDeleteSubtask = async (goal: Goal, index: number) => { if (!goal.subtasks) return; const updatedSubtasks = goal.subtasks.filter((_, i) => i !== index); const updatedGoal = { ...goal, subtasks: updatedSubtasks }; await supabaseService.updateGoal(updatedGoal); loadLabData(); };\r\n    const handleStartEditSubtask = (goalId: string, index: number, currentName: string) => { setEditingSubtask({ goalId, index }); setEditSubtaskText(currentName); };\r\n    const handleSaveSubtaskEdit = async (goal: Goal, index: number) => { if (!goal.subtasks) return; const updatedSubtasks = [...goal.subtasks]; updatedSubtasks[index].name = editSubtaskText; const updatedGoal = { ...goal, subtasks: updatedSubtasks }; await supabaseService.updateGoal(updatedGoal); setEditingSubtask(null); setEditSubtaskText(''); loadLabData(); };\r\n    const handleAddNewSubtask = async (goal: Goal) => { if (!newSubtaskText.trim()) return; const updatedSubtasks = goal.subtasks ? [...goal.subtasks] : []; updatedSubtasks.push({ name: newSubtaskText, done: false, level: 0 }); const updatedGoal = { ...goal, subtasks: updatedSubtasks }; await supabaseService.updateGoal(updatedGoal); setAddingSubtaskGoalId(null); setNewSubtaskText(''); loadLabData(); };\r\n    const toggleGoalCollapse = (goalId: string) => { const newSet = new Set(collapsedGoals); if (newSet.has(goalId)) newSet.delete(goalId); else newSet.add(goalId); setCollapsedGoals(newSet); };\r\n\r\n    // --- Handlers for CycleEditorModal ---\r\n    const handleManageGoal = async (action: 'create' | 'update' | 'delete', payload: any) => {\r\n        if (!editingCycle) return;\r\n        if (action === 'delete') {\r\n            await handleDeleteGoal(payload.id);\r\n        } else {\r\n            const goalData = {\r\n                title: payload.title,\r\n                description: payload.description,\r\n                type: payload.type,\r\n                subtasks: payload.subtasks\r\n            };\r\n\r\n            if (action === 'create') {\r\n                const newGoalId = `g-${crypto.randomUUID()}`;\r\n                const newGoal: Goal = {\r\n                    id: newGoalId,\r\n                    cycle_id: editingCycle.id,\r\n                    title: goalData.title,\r\n                    description: goalData.description,\r\n                    type: goalData.type\r\n                };\r\n\r\n                if (goalData.type === GoalType.TASK_PROJECT) {\r\n                    const tasks = payload.subtasks?.map((rawName: string) => {\r\n                        const match = rawName.match(/^(\\s*)/);\r\n                        const leadingStr = match ? match[1] : '';\r\n                        const normalizedIndent = leadingStr.replace(/\\t/g, '  ');\r\n                        const level = Math.floor(normalizedIndent.length / 2);\r\n                        return { name: rawName.trim(), done: false, level };\r\n                    }) || [];\r\n                    newGoal.subtasks = tasks;\r\n                } else if (goalData.type === GoalType.CONSISTENCY_METRIC && payload.linkedHabit) {\r\n                    let habitId = payload.linkedHabit.id;\r\n                    if (payload.linkedHabit.cycle_id !== editingCycle.id) {\r\n                        const newHabitId = `h-${crypto.randomUUID()}`;\r\n                        const newHabit: Habit = { ...payload.linkedHabit, id: newHabitId, cycle_id: editingCycle.id, linked_goal_id: newGoalId };\r\n                        await supabaseService.addHabit(newHabit);\r\n                        habitId = newHabitId;\r\n                    } else {\r\n                        const updatedHabit = { ...payload.linkedHabit, linked_goal_id: newGoalId };\r\n                        await supabaseService.updateHabit(updatedHabit);\r\n                    }\r\n                    newGoal.linked_habit_id = habitId;\r\n                    newGoal.current_streak = 0;\r\n                }\r\n                await supabaseService.addGoal(newGoal);\r\n            } else {\r\n                const originalGoal = data?.goals.find((g: Goal) => g.id === payload.id);\r\n                if (!originalGoal) return;\r\n\r\n                let updatedSubtasks = originalGoal.subtasks;\r\n                if (goalData.type === GoalType.TASK_PROJECT && payload.subtasks) {\r\n                    updatedSubtasks = payload.subtasks.map((rawName: string) => {\r\n                        const match = rawName.match(/^(\\s*)/);\r\n                        const leadingStr = match ? match[1] : '';\r\n                        const normalizedIndent = leadingStr.replace(/\\t/g, '  ');\r\n                        const level = Math.floor(normalizedIndent.length / 2);\r\n                        return { name: rawName.trim(), done: false, level };\r\n                    });\r\n                }\r\n\r\n                const updatedGoal: Goal = {\r\n                    ...originalGoal,\r\n                    title: goalData.title,\r\n                    description: goalData.description,\r\n                    type: goalData.type,\r\n                    subtasks: updatedSubtasks,\r\n                    linked_habit_id: payload.linkedHabit?.id\r\n                };\r\n                await supabaseService.updateGoal(updatedGoal);\r\n            }\r\n            await loadLabData();\r\n        }\r\n    };\r\n\r\n    const handleManageHabit = async (action: 'create' | 'update' | 'delete', payload: any) => {\r\n        if (!editingCycle) return;\r\n        if (action === 'delete') {\r\n            await supabaseService.deleteHabit(payload.id);\r\n        } else if (action === 'create') {\r\n            const newHabit: Habit = {\r\n                id: `h-${crypto.randomUUID()}`,\r\n                cycle_id: editingCycle.id,\r\n                name: payload.name,\r\n                category: payload.category,\r\n                weight: payload.weight\r\n            };\r\n            await supabaseService.addHabit(newHabit);\r\n        } else {\r\n            const updatedHabit: Habit = {\r\n                ...data?.habits.find((h: Habit) => h.id === payload.id)!,\r\n                name: payload.name,\r\n                category: payload.category,\r\n                weight: payload.weight\r\n            };\r\n            await supabaseService.updateHabit(updatedHabit);\r\n        }\r\n        await loadLabData();\r\n    };\r\n\r\n    const handleRenameCategory = async (oldName: string, newName: string) => {\r\n        const allHabits = await supabaseService.getAllHabits();\r\n        const toUpdate = allHabits.filter(h => h.category === oldName);\r\n        for (const h of toUpdate) {\r\n            await supabaseService.updateHabit({ ...h, category: newName });\r\n        }\r\n        await loadLabData();\r\n    };\r\n\r\n    const handleDeleteCategory = async (categoryName: string) => {\r\n        const allHabits = await supabaseService.getAllHabits();\r\n        const toUpdate = allHabits.filter(h => h.category === categoryName);\r\n        for (const h of toUpdate) {\r\n            await supabaseService.updateHabit({ ...h, category: 'Uncategorized' });\r\n        }\r\n        await loadLabData();\r\n    };\r\n\r\n    // Define the standardized handler for library deletions\r\n    const handleDeleteHabitFromLibrary = async (habitId: string) => {\r\n        // 1. Perform Deletion\r\n        await supabaseService.deleteHabit(habitId);\r\n\r\n        // 2. Refresh Local Library State immediately\r\n        const history = await supabaseService.getAllHabits();\r\n        setAllHabitsHistory(history);\r\n\r\n        // 3. Refresh Global Lab Data\r\n        await loadLabData();\r\n    };\r\n\r\n    if (loading || !data) return <div className=\"flex h-full items-center justify-center font-medium text-graphite-400\">Loading Lab Environment...</div>;\r\n\r\n    const currentHabits = data.habits.filter(h => h.cycle_id === data.activeCycleId);\r\n\r\n    const hasArchivedCycles = data.cycles.some(c => c.status === EntityStatus.ARCHIVED);\r\n    const visibleCycles = data.cycles.filter(c => showArchived || c.status !== EntityStatus.ARCHIVED);\r\n\r\n    return (\r\n        <div className=\"pb-10\">\r\n            <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8\">\r\n                {data.version ? (\r\n                    <div>\r\n                        <div className=\"flex items-center gap-3 mb-2\">\r\n                            <span className=\"inline-flex items-center justify-center rounded bg-pacific-500/10 border border-pacific-500/20 px-2 py-0.5 text-[10px] font-bold text-pacific-600 dark:text-pacific-400 uppercase tracking-wider\">Current Version</span>\r\n                            <span className=\"text-pacific-500 font-mono font-bold text-sm\">v{data.version.number}.0</span>\r\n                        </div>\r\n                        <h1 className=\"text-4xl font-display font-bold text-graphite-900 dark:text-white tracking-tight\">{data.version.title}</h1>\r\n                        <p className=\"text-graphite-500 italic mt-1\">\"{data.version.description}\"</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col items-start gap-4\">\r\n                        <div className=\"flex items-center gap-3 text-graphite-400\">\r\n                            <div className=\"p-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg\">\r\n                                <Layers size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <h1 className=\"text-xl font-bold text-graphite-900 dark:text-white\">System Standby</h1>\r\n                                <p className=\"text-xs font-medium uppercase tracking-wide\">No Active Version</p>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-sm text-graphite-500 max-w-md\">The system is currently dormant. Initialize the first Version to begin tracking cycles and habits.</p>\r\n                        <button onClick={() => setShowNewVersion(true)} className=\"px-4 py-2 bg-pacific-600 text-white text-sm font-bold rounded-xl hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/20 flex items-center gap-2\">\r\n                            <Plus size={16} /> Initialize Version 1.0\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {data.version && (\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"text-right mr-4 hidden md:block\"><div className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-widest flex items-center justify-end gap-2\"><Calendar size={12} /> Timeline</div><div className=\"font-mono text-sm text-graphite-600 dark:text-graphite-300\">{data.version.start_date}  {data.version.end_date}</div></div>\r\n                        <button onClick={() => setShowNewVersion(true)} type=\"button\" className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 text-sm font-bold hover:border-pacific-500 transition-colors\"><Plus size={16} /> New Version</button>\r\n                    </div>\r\n                )}\r\n            </header>\r\n\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <h3 className=\"text-xs font-bold text-graphite-400 uppercase tracking-widest flex items-center gap-2\"><Layers size={14} /> Cycles Log</h3>\r\n                        {hasArchivedCycles && (\r\n                            <button\r\n                                onClick={() => setShowArchived(!showArchived)}\r\n                                type=\"button\"\r\n                                className=\"text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded bg-graphite-100 dark:bg-graphite-800 text-graphite-500 hover:text-pacific-500 transition-colors flex items-center gap-1\"\r\n                            >\r\n                                {showArchived ? <EyeOff size={12} /> : <Eye size={12} />} {showArchived ? 'Hide Archived' : 'Show Archived'}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    {data.version && data.cycles.length < maxCycles && (\r\n                        <button onClick={() => setShowNewCycle(true)} type=\"button\" className=\"text-pacific-600 hover:text-pacific-500 p-2 rounded-lg bg-pacific-50 dark:bg-pacific-900/10\"><Plus size={20} /></button>\r\n                    )}\r\n                </div>\r\n\r\n                {visibleCycles.map((cycle: Cycle) => {\r\n                    const isSystemActive = cycle.id === data.activeCycleId;\r\n                    const isArchived = cycle.status === EntityStatus.ARCHIVED;\r\n                    const cycleGoals = data.goals.filter((g: Goal) => g.cycle_id === cycle.id);\r\n                    const isExpanded = expandedCycleId === cycle.id;\r\n                    const cardBaseClass = \"bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-[#262629] transition-all duration-300\";\r\n                    const textBaseClass = \"text-graphite-900 dark:text-white\";\r\n                    const subtextBaseClass = \"text-graphite-400 dark:text-graphite-500\";\r\n\r\n                    return (\r\n                        <div key={cycle.id} className={`rounded-3xl border transition-all duration-300 overflow-hidden ${cardBaseClass} ${isArchived ? 'opacity-70 grayscale border-dashed' : (!isSystemActive && !isExpanded ? 'opacity-60 hover:opacity-100' : 'opacity-100')}`}>\r\n                            <div\r\n                                onClick={(e) => {\r\n                                    if ((e.target as HTMLElement).closest('button')) return;\r\n                                    setExpandedCycleId(isExpanded ? null : cycle.id);\r\n                                }}\r\n                                className={`group/header p-6 border-b flex items-center justify-between cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${isSystemActive ? 'border-graphite-200 dark:border-graphite-800' : 'border-graphite-100 dark:border-graphite-800'}`}\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    {isExpanded ? <ChevronDown className=\"text-pacific-500\" /> : <ChevronRight className=\"text-graphite-400\" />}\r\n                                    <h2 className={`text-xl font-bold ${textBaseClass} ${isArchived ? 'line-through decoration-graphite-400' : ''}`}>Cycle {cycle.sprint_number}</h2>\r\n\r\n                                    <div className=\"flex items-center gap-4 relative z-10\" onClick={(e: React.MouseEvent) => e.stopPropagation()}>\r\n                                        {isSystemActive ? (<button onClick={() => setCycleInSettings(cycle)} type=\"button\" className=\"px-3 py-1 rounded-lg bg-pacific-500/10 text-pacific-600 dark:text-pacific-400 border border-pacific-500/20 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 hover:bg-pacific-500/20 transition-colors\">Active <Calendar size={12} className=\"pointer-events-none\" /></button>) : isArchived ? (<span className=\"px-3 py-1 rounded-lg bg-graphite-100 dark:bg-graphite-800 text-graphite-500 border border-graphite-200 dark:border-graphite-700 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1\"><Archive size={10} /> Archived</span>) : (<button onClick={() => setCycleInSettings(cycle)} type=\"button\" className=\"px-3 py-1 rounded-lg bg-transparent text-graphite-400 border border-graphite-200 dark:border-graphite-700 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 hover:bg-graphite-100 dark:hover:bg-graphite-800 hover:text-graphite-600 dark:hover:text-graphite-300 transition-colors\">Configure <Calendar size={12} className=\"pointer-events-none\" /></button>)}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex items-center justify-end\"><div className={`font-mono text-sm ${subtextBaseClass} transition-all duration-300`}>{cycle.start_date}  {cycle.end_date}</div></div>\r\n                            </div>\r\n\r\n                            {isExpanded && (\r\n                                <div className=\"p-8 grid grid-cols-1 lg:grid-cols-2 gap-12 animate-in slide-in-from-top-4 duration-300\">\r\n                                    <div className=\"space-y-8\">\r\n                                        <div><h4 className={`text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 ${isSystemActive ? 'text-graphite-500' : 'text-graphite-500 dark:text-graphite-400'}`}><Target size={14} /> Priorities</h4><div className=\"space-y-3\">{cycle.focus_priorities.map((p: string, i: number) => (<div key={i} className={`flex items-center gap-4 p-3 rounded-xl border ${isSystemActive ? 'bg-white/5 border-white/10' : 'bg-graphite-50 dark:bg-graphite-800 border-graphite-200 dark:border-graphite-700'}`}><span className=\"text-pacific-500 font-mono text-xs font-bold\">0{i + 1}.</span><span className={`font-medium ${textBaseClass}`}>{p}</span></div>))}</div></div>\r\n                                        <div><h4 className={`text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 ${isSystemActive ? 'text-graphite-500' : 'text-graphite-500 dark:text-graphite-400'}`}><Activity size={14} /> Identity Kernel</h4><div className=\"grid grid-cols-2 gap-4\">{cycle.cch_list.map((c: { category: string; items: string[] }, i: number) => (<div key={i}><div className={`text-[10px] font-bold mb-2 uppercase ${isSystemActive ? 'text-graphite-500' : 'text-graphite-600 dark:text-graphite-400'}`}>{c.category}</div><div className=\"flex flex-wrap gap-2\">{c.items.map((item: string, j: number) => (<span key={j} className={`text-xs border px-2 py-1 rounded-md ${isSystemActive ? 'text-graphite-400 border-graphite-700' : 'text-graphite-400 dark:text-graphite-500 border-graphite-200 dark:border-graphite-700'}`}>{item}</span>))}</div></div>))}</div></div>\r\n                                        <div className={`p-6 rounded-2xl border ${isSystemActive ? 'bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-900/30' : 'bg-white dark:bg-graphite-800/50 border-red-100 dark:border-red-900/30 shadow-sm'}`}><h4 className=\"text-[10px] font-bold text-red-500 dark:text-red-400 uppercase tracking-widest mb-3 flex items-center gap-2\"><AlertTriangle size={12} /> Friction</h4><p className={`text-sm italic ${isSystemActive ? 'text-graphite-700 dark:text-red-100/80' : 'text-graphite-600 dark:text-graphite-400'}`}>\"{cycle.problems}\"</p></div>\r\n\r\n                                        <div className=\"pt-6 border-t border-graphite-200 dark:border-graphite-800 flex flex-wrap items-center gap-3 relative z-10\" onClick={(e: React.MouseEvent) => e.stopPropagation()}>\r\n                                            <button onClick={() => setEditingCycle(cycle)} type=\"button\" className=\"flex items-center gap-2 px-4 py-2 bg-graphite-100 dark:bg-graphite-800 text-graphite-600 dark:text-graphite-300 rounded-xl text-sm font-bold hover:bg-graphite-200 dark:hover:bg-graphite-700 transition-colors\"><Edit3 size={16} className=\"pointer-events-none\" /> Edit Content</button>\r\n                                            <button\r\n                                                onClick={(e) => handleArchiveCycle(e, cycle.id)}\r\n                                                type=\"button\"\r\n                                                className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all border ${isArchived ? 'bg-bali-50 dark:bg-bali-900/20 text-bali-600 dark:text-bali-400 border-bali-200 dark:border-bali-800' : 'bg-graphite-50 dark:bg-graphite-900/50 text-graphite-500 hover:text-pacific-600 dark:hover:text-pacific-400 border-transparent hover:border-pacific-200 dark:hover:border-pacific-800'}`}\r\n                                            >\r\n                                                {isArchived ? <><RefreshCw size={16} className=\"pointer-events-none\" /> Restore</> : <><Archive size={16} className=\"pointer-events-none\" /> Archive</>}\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={(e) => handleDeleteCycle(e, cycle.id)}\r\n                                                type=\"button\"\r\n                                                className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all duration-200 ${verifyDeleteId === cycle.id\r\n                                                    ? 'bg-red-500 text-white border-red-500 shadow-lg shadow-red-500/30 scale-105'\r\n                                                    : 'bg-graphite-50 dark:bg-graphite-900/50 text-graphite-400 hover:text-red-500 border border-transparent hover:border-red-200 dark:hover:border-red-900/30'\r\n                                                    }`}\r\n                                            >\r\n                                                <Trash2 size={16} className=\"pointer-events-none\" />\r\n                                                {verifyDeleteId === cycle.id ? 'Confirm Delete?' : 'Delete'}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <div className=\"flex justify-between items-center mb-4\"><h4 className={`text-xs font-bold uppercase tracking-widest flex items-center gap-2 ${isSystemActive ? 'text-graphite-500' : 'text-graphite-500 dark:text-graphite-400'}`}><CheckCircle2 size={14} /> Goals & Objectives</h4><button onClick={() => { setTargetCycleIdForAddGoal(cycle.id); setShowAddGoalModal(true); }} type=\"button\" className=\"text-[10px] font-bold text-pacific-400 hover:text-white flex items-center gap-1\">+ ADD GOAL</button></div>\r\n                                        <div className=\"space-y-4\">\r\n                                            {cycleGoals.map((goal: Goal) => {\r\n                                                const linkedHabit = currentHabits.find((h: Habit) => h.id === goal.linked_habit_id);\r\n                                                const isProject = goal.type === GoalType.TASK_PROJECT;\r\n                                                const isCollapsed = collapsedGoals.has(goal.id);\r\n                                                const goalCardClass = isSystemActive ? \"bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/30\" : \"bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/30\";\r\n                                                let progressPercent = 0; let showProgressBar = false;\r\n                                                if (goal.type === GoalType.TASK_PROJECT) { const totalTasks = goal.subtasks?.length || 0; const completedTasks = goal.subtasks?.filter(t => t.done).length || 0; if (totalTasks > 0) { progressPercent = (completedTasks / totalTasks) * 100; showProgressBar = true; } }\r\n                                                else if (goal.type === GoalType.CONSISTENCY_METRIC) { const streak = goal.current_streak || 0; progressPercent = Math.min(100, 100 * (1 - Math.exp(-0.061 * streak))); showProgressBar = true; }\r\n\r\n                                                return (\r\n                                                    <div key={goal.id} onClick={isProject ? () => toggleGoalCollapse(goal.id) : undefined} className={`group relative p-5 rounded-2xl border transition-all overflow-hidden ${goalCardClass} ${isProject ? 'cursor-pointer' : ''}`}>\r\n                                                        {showProgressBar && (<div className=\"absolute top-0 left-0 right-0 h-1.5 bg-graphite-200 dark:bg-black/20\"><div className={`h-full transition-all duration-500 ${progressPercent >= 100 ? 'bg-bali-500' : 'bg-pacific-500'}`} style={{ width: `${progressPercent}%` }} /></div>)}\r\n                                                        <div className=\"flex justify-between items-start mb-3\"><div><h3 className={`font-bold text-lg ${textBaseClass}`}>{goal.title}</h3><p className={`text-sm leading-relaxed mt-1 ${subtextBaseClass}`}>{goal.description}</p></div><div className=\"flex items-center gap-3\">{isProject && (<div className=\"text-graphite-400 group-hover:text-pacific-500 transition-colors\">{isCollapsed ? <ChevronDown size={16} /> : <ChevronUp size={16} />}</div>)}<div className=\"text-xs font-bold text-graphite-500 uppercase tracking-wider\">{goal.type === GoalType.CONSISTENCY_METRIC ? 'Consistency' : 'Project'}</div></div></div>\r\n                                                        {goal.type === GoalType.CONSISTENCY_METRIC && (<div className=\"mt-4 pl-1\" onClick={e => e.stopPropagation()}><button onClick={() => handleOpenHabitSelector(goal.id)} type=\"button\" className={`flex items-center gap-3 px-3 py-2 rounded-lg border transition-all group/habit w-full sm:w-auto ${isSystemActive ? 'bg-white dark:bg-graphite-900 border-graphite-200 dark:border-graphite-700' : 'bg-white dark:bg-graphite-900 border-graphite-200 dark:border-graphite-700'}`}><div className={`p-1.5 rounded-md ${isSystemActive ? 'bg-pacific-50 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400' : 'bg-pacific-50 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400'}`}><Activity size={14} /></div><div className=\"flex flex-col items-start\"><span className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-wider\">Linked Habit</span>{linkedHabit ? (<span className={`text-xs font-bold ${textBaseClass}`}>{linkedHabit.name}</span>) : (<span className=\"text-xs font-bold text-red-400\">Select Habit Source</span>)}</div>{linkedHabit ? (<LinkIcon size={12} className=\"ml-2 text-graphite-400 group-hover/habit:text-pacific-500 transition-colors opacity-0 group-hover/habit:opacity-100\" />) : (<AlertTriangle size={12} className=\"ml-2 text-red-400\" />)}</button></div>)}\r\n                                                        {goal.type === GoalType.TASK_PROJECT && !isCollapsed && (<div className=\"mt-4 pl-1 animate-in slide-in-from-top-1 fade-in duration-200\" onClick={(e: React.MouseEvent) => e.stopPropagation()}><div className=\"space-y-2 mb-3\">{goal.subtasks?.map((t: { name: string; done: boolean; level?: number }, i: number) => (<div key={i} className={`flex items-center gap-3 text-sm group/task min-h-[28px] ${subtextBaseClass}`} style={{ paddingLeft: `${(t.level || 0) * 1.5}rem` }}>{(t.level || 0) > 0 && <CornerDownRight size={12} className=\"text-graphite-500 dark:text-graphite-600 flex-shrink-0\" />}{editingSubtask?.goalId === goal.id && editingSubtask.index === i ? (<div className=\"flex-1 flex items-center gap-2\"><input value={editSubtaskText} onChange={(e: React.ChangeEvent<HTMLInputElement>) => setEditSubtaskText(e.target.value)} className=\"flex-1 bg-graphite-900 dark:bg-white border border-pacific-500 rounded px-2 py-1 text-white dark:text-graphite-900 text-sm focus:outline-none\" autoFocus onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) => { if (e.key === 'Enter') handleSaveSubtaskEdit(goal, i); if (e.key === 'Escape') setEditingSubtask(null); }} /><button onClick={() => handleSaveSubtaskEdit(goal, i)} className=\"text-pacific-500 hover:text-white\"><Check size={16} /></button><button onClick={() => setEditingSubtask(null)} className=\"text-red-500 hover:text-white\"><X size={16} /></button></div>) : (<><button onClick={() => handleToggleSubtask(goal, i)} type=\"button\" className={`h-4 w-4 flex-shrink-0 rounded border flex items-center justify-center transition-all ${t.done ? 'bg-pacific-500 border-pacific-500 text-white' : 'border-graphite-600 dark:border-graphite-400 hover:border-pacific-500'}`}>{t.done && <Check size={10} />}</button><span className={`flex-1 transition-all ${t.done ? 'line-through opacity-50' : ''}`} onDoubleClick={() => handleStartEditSubtask(goal.id, i, t.name)}>{t.name}</span><div className=\"opacity-0 group-hover/task:opacity-100 flex items-center gap-2 transition-opacity\"><button onClick={() => handleStartEditSubtask(goal.id, i, t.name)} className=\"text-graphite-500 hover:text-pacific-400\"><Edit3 size={12} /></button><button onClick={() => handleDeleteSubtask(goal, i)} className=\"text-graphite-500 hover:text-red-500\"><Trash2 size={12} /></button></div></>)}</div>))}</div>{addingSubtaskGoalId === goal.id ? (<div className=\"flex items-center gap-2 animate-in fade-in slide-in-from-top-1\"><input value={newSubtaskText} onChange={(e: React.ChangeEvent<HTMLInputElement>) => setNewSubtaskText(e.target.value)} className=\"flex-1 bg-graphite-900 dark:bg-white border border-graphite-600 dark:border-graphite-300 rounded px-2 py-1 text-white dark:text-graphite-900 text-sm focus:outline-none focus:border-pacific-500\" placeholder=\"New item...\" autoFocus onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) => { if (e.key === 'Enter') handleAddNewSubtask(goal); if (e.key === 'Escape') { setAddingSubtaskGoalId(null); setNewSubtaskText(''); } }} /><button onClick={() => handleAddNewSubtask(goal)} className=\"p-1 bg-pacific-600 text-white rounded hover:bg-pacific-500\"><Plus size={14} /></button><button onClick={() => { setAddingSubtaskGoalId(null); setNewSubtaskText(''); }} className=\"p-1 text-graphite-500 hover:text-white\"><X size={14} /></button></div>) : (<button onClick={() => setAddingSubtaskGoalId(goal.id)} className=\"text-[10px] font-bold text-graphite-500 hover:text-pacific-400 flex items-center gap-1 transition-colors mt-2\"><Plus size={12} /> ADD ITEM</button>)}</div>)}\r\n                                                        <button onClick={(e) => { e.stopPropagation(); handleDeleteGoal(goal.id); }} className=\"absolute bottom-4 right-4 text-graphite-600 dark:text-graphite-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-2\"><Trash2 size={16} /></button>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n                {!data.version && visibleCycles.length === 0 && (\r\n                    <div className=\"text-center py-12 text-graphite-400 text-sm\">System Empty. Initialize a version to proceed.</div>\r\n                )}\r\n                {data.version && !hasArchivedCycles && visibleCycles.length === 0 && (\r\n                    <div className=\"text-center py-12 text-graphite-400 text-sm\">No cycles found. Start by creating a new version or cycle.</div>\r\n                )}\r\n                {hasArchivedCycles && visibleCycles.length === 0 && (\r\n                    <div className=\"text-center py-12 text-graphite-400 text-sm\">All cycles are archived. Click \"Show Archived\" to view them.</div>\r\n                )}\r\n            </div>\r\n\r\n            {showNewVersion && <NewVersionModal onClose={() => setShowNewVersion(false)} onCreate={handleCreateVersion} suggestedNumber={(data.version?.number || 0) + 1} />}\r\n\r\n            {/* CREATING New Cycle */}\r\n            {showNewCycle && (\r\n                <CycleEditorModal\r\n                    mode=\"create\"\r\n                    goals={[]}\r\n                    habits={[]}\r\n                    allHabits={allHabitsHistory}\r\n                    suggestedSprintNumber={data.cycles.length + 1}\r\n                    onClose={() => setShowNewCycle(false)}\r\n                    onCreate={handleCreateCycle}\r\n                    onDeleteHabitFromDB={handleDeleteHabitFromLibrary}\r\n                    maxCycles={maxCycles}\r\n                    // PASSING SMART SCHEDULING CONTEXT\r\n                    versionStartDate={data.version?.start_date}\r\n                    existingCycles={data.cycles}\r\n                />\r\n            )}\r\n\r\n            {/* EDITING Existing Cycle */}\r\n            {editingCycle && (\r\n                <CycleEditorModal\r\n                    mode=\"edit\"\r\n                    cycle={editingCycle}\r\n                    goals={data.goals.filter(g => g.cycle_id === editingCycle.id)}\r\n                    habits={data.habits.filter(h => h.cycle_id === editingCycle.id)}\r\n                    allHabits={allHabitsHistory}\r\n                    onClose={() => setEditingCycle(null)}\r\n                    onSaveCycle={handleUpdateCycle}\r\n                    onManageGoal={handleManageGoal}\r\n                    onManageHabit={handleManageHabit}\r\n                    onRenameCategory={async (oldName: string, newName: string) => {\r\n                        const all = await supabaseService.getAllHabits();\r\n                        const targets = all.filter((h: Habit) => h.category === oldName);\r\n                        for (const h of targets) await supabaseService.updateHabit({ ...h, category: newName });\r\n                        await loadLabData();\r\n                    }}\r\n                    onDeleteCategory={async (catName: string) => {\r\n                        const all = await supabaseService.getAllHabits();\r\n                        const targets = all.filter((h: Habit) => h.category === catName);\r\n                        for (const h of targets) await supabaseService.updateHabit({ ...h, category: 'Uncategorized' });\r\n                        await loadLabData();\r\n                    }}\r\n                    onDeleteHabitFromDB={handleDeleteHabitFromLibrary}\r\n                    maxCycles={maxCycles}\r\n                />\r\n            )}\r\n\r\n            {cycleInSettings && <CycleSettingsModal cycle={cycleInSettings} isActive={data.activeCycleId === cycleInSettings.id} onClose={() => setCycleInSettings(null)} onSave={handleUpdateCycleSettings} />}\r\n            {showAddGoalModal && <GoalFormModal isOpen={showAddGoalModal} onClose={() => setShowAddGoalModal(false)} onSave={handleAddGoal} currentCycleHabits={data.habits.filter(h => h.cycle_id === targetCycleIdForAddGoal)} allHabits={allHabitsHistory} />}\r\n            <HabitSelectorModal isOpen={showHabitSelector} onClose={() => setShowHabitSelector(false)} onSelect={handleLinkHabit} currentCycleHabits={currentHabits} allHabits={allHabitsHistory} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Lab;\r\n"],"names":[],"mappings":"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"}}]
}