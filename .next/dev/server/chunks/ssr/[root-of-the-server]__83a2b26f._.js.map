{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/archives/LifeChecklist.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Plus, Trash2, Check, X } from 'lucide-react';\r\n\r\ninterface ChecklistItem {\r\n    id: string;\r\n    text: string;\r\n    completed: boolean;\r\n    createdAt: number;\r\n}\r\n\r\ninterface LifeChecklistProps {\r\n    content: string;\r\n    onUpdate: (newContent: string) => void;\r\n    onAutoSave: () => void;\r\n}\r\n\r\nexport const LifeChecklist: React.FC<LifeChecklistProps> = ({ content, onUpdate, onAutoSave }) => {\r\n    const [items, setItems] = useState<ChecklistItem[]>([]);\r\n    const [newItemText, setNewItemText] = useState<string | null>(null);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Parse initial content\r\n    useEffect(() => {\r\n        try {\r\n            if (content) {\r\n                const parsed = JSON.parse(content);\r\n                if (Array.isArray(parsed)) {\r\n                    setItems(parsed);\r\n                } else {\r\n                    // content might be markdown legacy\r\n                    setItems([]);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.warn(\"Could not parse checklist content as JSON\", e);\r\n            setItems([]);\r\n        }\r\n        setIsLoaded(true);\r\n    }, []);\r\n\r\n    // Sync changes to parent\r\n    const updateParent = useCallback((newItems: ChecklistItem[]) => {\r\n        const jsonString = JSON.stringify(newItems);\r\n        onUpdate(jsonString);\r\n    }, [onUpdate]);\r\n\r\n    const addItem = () => {\r\n        if (!newItemText || !newItemText.trim()) return;\r\n        const newItem: ChecklistItem = {\r\n            id: crypto.randomUUID(),\r\n            text: newItemText.trim(),\r\n            completed: false,\r\n            createdAt: Date.now()\r\n        };\r\n        const newItems = [...items, newItem];\r\n        setItems(newItems);\r\n        setNewItemText('');\r\n        updateParent(newItems);\r\n        setTimeout(onAutoSave, 500);\r\n    };\r\n\r\n    const toggleItem = (id: string) => {\r\n        const newItems = items.map(item =>\r\n            item.id === id ? { ...item, completed: !item.completed } : item\r\n        );\r\n        setItems(newItems);\r\n        updateParent(newItems);\r\n        setTimeout(onAutoSave, 500); // Trigger save\r\n    };\r\n\r\n    const deleteItem = (id: string) => {\r\n        const newItems = items.filter(item => item.id !== id);\r\n        setItems(newItems);\r\n        updateParent(newItems);\r\n        setTimeout(onAutoSave, 500);\r\n    };\r\n\r\n    if (!isLoaded) return null;\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto p-4 md:p-8\">\r\n            <h2 className=\"text-3xl font-bold text-graphite-900 dark:text-white mb-8\">Master Life List</h2>\r\n\r\n            <div className=\"space-y-1\">\r\n                {items.map(item => (\r\n                    <div\r\n                        key={item.id}\r\n                        className=\"group flex items-center gap-3 p-3 rounded-lg hover:bg-graphite-100/50 dark:hover:bg-graphite-800/50 transition-colors duration-200\"\r\n                    >\r\n                        <button\r\n                            onClick={() => toggleItem(item.id)}\r\n                            className={`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${item.completed\r\n                                    ? 'bg-pacific-500 border-pacific-500 text-white'\r\n                                    : 'border-graphite-400 dark:border-graphite-600 hover:border-pacific-400 text-transparent'\r\n                                }`}\r\n                        >\r\n                            {item.completed && <Check size={12} strokeWidth={4} />}\r\n                        </button>\r\n\r\n                        <span\r\n                            className={`flex-1 text-base transition-all ${item.completed\r\n                                    ? 'text-graphite-400 dark:text-graphite-500 line-through'\r\n                                    : 'text-graphite-900 dark:text-white font-medium'\r\n                                }`}\r\n                        >\r\n                            {item.text}\r\n                        </span>\r\n\r\n                        <button\r\n                            onClick={() => deleteItem(item.id)}\r\n                            className=\"p-1.5 text-graphite-400 hover:text-red-500 hover:bg-white/10 rounded-md opacity-0 group-hover:opacity-100 transition-all\"\r\n                        >\r\n                            <X size={16} />\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Add New Item Row */}\r\n                <div className=\"mt-2 pt-2\">\r\n                    {newItemText !== null ? (\r\n                        <div className=\"flex items-center gap-3 p-3 rounded-lg bg-graphite-50 dark:bg-graphite-800/50\">\r\n                            <div className=\"w-5 h-5 rounded border-2 border-graphite-300 dark:border-graphite-600 border-dashed opacity-50\" />\r\n                            <input\r\n                                autoFocus\r\n                                type=\"text\"\r\n                                value={newItemText}\r\n                                onChange={(e) => setNewItemText(e.target.value)}\r\n                                onKeyDown={(e) => {\r\n                                    if (e.key === 'Enter') addItem();\r\n                                    if (e.key === 'Escape') setNewItemText(null);\r\n                                }}\r\n                                onBlur={() => {\r\n                                    if (newItemText.trim()) addItem();\r\n                                }}\r\n                                placeholder=\"Type your new goal...\"\r\n                                className=\"flex-1 bg-transparent border-none focus:ring-0 p-0 text-base text-graphite-900 dark:text-white placeholder-graphite-400\"\r\n                            />\r\n                            <button onClick={() => setNewItemText(null)} className=\"bg-transparent text-graphite-400 hover:text-graphite-600 dark:hover:text-white\"><X size={16} /></button>\r\n                        </div>\r\n                    ) : (\r\n                        <button\r\n                            onClick={() => setNewItemText('')}\r\n                            className=\"flex items-center gap-3 p-3 text-graphite-500 hover:text-graphite-800 dark:hover:text-white transition-colors group w-full text-left\"\r\n                        >\r\n                            <Plus size={20} className=\"group-hover:scale-110 transition-transform\" />\r\n                            <span className=\"font-medium text-base ml-1\">Add new item</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":["LifeChecklist","content","onUpdate","onAutoSave","items","setItems","newItemText","setNewItemText","isLoaded","setIsLoaded","parsed","JSON","parse","Array","isArray","e","console","warn","updateParent","newItems","jsonString","stringify","addItem","trim","newItem","id","crypto","randomUUID","text","completed","createdAt","Date","now","setTimeout","toggleItem","map","item","deleteItem","filter","className","onClick","size","strokeWidth","autoFocus","type","value","onChange","target","onKeyDown","key","onBlur","placeholder"],"mappings":"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"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/archives/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { ArchiveItem, ArchiveType } from '@/types/types';\r\nimport { Library, Eye, List, Brain, ScrollText, Plus, Save, Trash2, X, Search, ArrowUpDown, Edit3, Check } from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport { LifeChecklist } from '@/components/archives/LifeChecklist';\r\n\r\nconst Archives: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<ArchiveType>(ArchiveType.VISION_5Y);\r\n  const [items, setItems] = useState<ArchiveItem[]>([]);\r\n  const [selectedItem, setSelectedItem] = useState<ArchiveItem | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [editorContent, setEditorContent] = useState('');\r\n  const [editorTitle, setEditorTitle] = useState('');\r\n\r\n  // New state for modes and tracking\r\n  const [viewMode, setViewMode] = useState<'view' | 'edit'>('view');\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  const [originalContent, setOriginalContent] = useState('');\r\n\r\n  // Mantra Bank specific\r\n  const [mantraSearch, setMantraSearch] = useState('');\r\n  const [mantraSort, setMantraSort] = useState<'desc' | 'asc'>('desc');\r\n  const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'error' | 'idle'>('idle');\r\n  // New state for multi-item editing (Mantra Bank)\r\n  const [modifiedMantras, setModifiedMantras] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => { loadItems(); }, []);\r\n\r\n  // Track unsaved changes\r\n  useEffect(() => {\r\n    if (viewMode === 'edit' || activeTab === ArchiveType.MANTRA_BANK) {\r\n      setHasUnsavedChanges(editorContent !== originalContent);\r\n    }\r\n  }, [editorContent, originalContent, viewMode, activeTab]);\r\n\r\n  const loadItems = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await supabaseService.seedDefaultArchives();\r\n      const archives = await supabaseService.getArchives();\r\n      setItems(archives);\r\n\r\n      // Auto-select for singletons\r\n      if (activeTab === ArchiveType.VISION_5Y || activeTab === ArchiveType.LIFE_TODO) {\r\n        const found = archives.find((a: ArchiveItem) => a.type === activeTab);\r\n        if (found) {\r\n          selectItem(found);\r\n          setViewMode('view');\r\n        } else {\r\n          handleCreateNewForTab(activeTab);\r\n          setViewMode('edit');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectItem = (item: ArchiveItem) => {\r\n    setSelectedItem(item);\r\n    setEditorTitle(item.title);\r\n    setEditorContent(item.content);\r\n    setOriginalContent(item.content);\r\n    setHasUnsavedChanges(false);\r\n    setSaveStatus('idle');\r\n  };\r\n\r\n  const handleTabChange = (tabId: ArchiveType) => {\r\n    setActiveTab(tabId);\r\n    setSaveStatus('idle');\r\n    setHasUnsavedChanges(false);\r\n    setSelectedItem(null);\r\n\r\n    const isSingleton = tabId === ArchiveType.VISION_5Y || tabId === ArchiveType.LIFE_TODO;\r\n    if (isSingleton) {\r\n      const found = items.find((i: ArchiveItem) => i.type === tabId);\r\n      if (found) {\r\n        selectItem(found);\r\n        setViewMode('view'); // Default to view mode for singletons\r\n      } else {\r\n        handleCreateNewForTab(tabId);\r\n        setViewMode('edit');\r\n      }\r\n    } else {\r\n      // For collections (Theory, Routines), clear selection so user sees list\r\n      setSelectedItem(null);\r\n      setViewMode('view');\r\n    }\r\n  };\r\n\r\n  const handleCreateNewForTab = (tabId: ArchiveType) => {\r\n    const isMantra = tabId === ArchiveType.MANTRA_BANK;\r\n\r\n    let defaultTitle = 'New Entry';\r\n    let defaultContent = '';\r\n\r\n    if (isMantra) {\r\n      defaultTitle = 'Mantra';\r\n    } else if (tabId === ArchiveType.VISION_5Y) {\r\n      defaultTitle = 'Vision';\r\n    } else if (tabId === ArchiveType.LIFE_TODO) {\r\n      defaultTitle = 'Life Checklist';\r\n    } else if (tabId === ArchiveType.THEORY_NOTES) {\r\n      defaultTitle = 'Theory Note';\r\n      defaultContent = '# Theory Note\\n\\n**Problem/Friction:**\\n\\n\\n**Proposed Solution:**\\n';\r\n    }\r\n\r\n    const newItem: ArchiveItem = {\r\n      id: `new-${Date.now()}`,\r\n      type: tabId,\r\n      title: defaultTitle,\r\n      content: defaultContent\r\n    };\r\n\r\n    if (isMantra) {\r\n      // For mantras, add directly to items (simulating prompt appearance)\r\n      setItems(prev => [newItem, ...prev]);\r\n      setModifiedMantras(prev => ({ ...prev, [newItem.id]: defaultContent }));\r\n    } else {\r\n      selectItem(newItem);\r\n      setViewMode('edit');\r\n    }\r\n  };\r\n\r\n  const handleCreateNew = () => {\r\n    handleCreateNewForTab(activeTab);\r\n  };\r\n\r\n  // Dedicated Save Handler\r\n  const handleSave = async (shouldCloseMantra = false) => {\r\n    if (selectedItem) {\r\n      setSaveStatus('saving');\r\n      try {\r\n        const updatedItem = { ...selectedItem, title: editorTitle, content: editorContent, type: activeTab };\r\n        const result = await supabaseService.updateArchive(updatedItem);\r\n\r\n        const savedItem = { ...updatedItem, id: result.id };\r\n        setOriginalContent(editorContent);\r\n        setHasUnsavedChanges(false);\r\n\r\n        setItems(prev => {\r\n          const exists = prev.some(i => i.id === selectedItem.id || i.id === result.id);\r\n          if (exists) {\r\n            return prev.map(i => (i.id === selectedItem.id || i.id === result.id) ? savedItem : i);\r\n          }\r\n          return [...prev, savedItem];\r\n        });\r\n\r\n        // Update current valid item with new ID if it was new\r\n        setSelectedItem(savedItem);\r\n\r\n        setSaveStatus('saved');\r\n        setTimeout(() => setSaveStatus('idle'), 2000);\r\n\r\n        if (activeTab === ArchiveType.MANTRA_BANK && shouldCloseMantra) {\r\n          setSelectedItem(null);\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(err);\r\n        setSaveStatus('error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSaveMantra = async (item: ArchiveItem, newContent: string) => {\r\n    setSaveStatus('saving');\r\n    try {\r\n      const updatedItem = { ...item, content: newContent };\r\n      // If it's a new item (local only), we need to create it. \r\n      // Assuming updateArchive handles creation if ID doesn't exist or we use a create method. \r\n      // Ideally, we should check if it's new.\r\n      let result;\r\n      if (item.id.startsWith('new-')) {\r\n        // Remove temporary ID to let DB assign a real one\r\n        const { id, ...itemData } = updatedItem;\r\n        result = await supabaseService.updateArchive(itemData as any);\r\n      } else {\r\n        result = await supabaseService.updateArchive(updatedItem);\r\n      }\r\n\r\n      const savedItem = { ...updatedItem, id: result.id };\r\n\r\n      setItems(prev => prev.map(i => i.id === item.id ? savedItem : i));\r\n\r\n      setModifiedMantras(prev => {\r\n        const next = { ...prev };\r\n        delete next[item.id]; // Remove from modified since saved\r\n        return next;\r\n      });\r\n\r\n      setSaveStatus('saved');\r\n      setTimeout(() => setSaveStatus('idle'), 2000);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaveStatus('error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (id: string) => {\r\n    if (id.startsWith('new-')) {\r\n      setSelectedItem(null);\r\n      return;\r\n    }\r\n    if (confirm('Permanently delete this entry?')) {\r\n      await supabaseService.deleteArchive(id);\r\n      const refreshed = items.filter(i => i.id !== id);\r\n      setItems(refreshed);\r\n      if (selectedItem?.id === id) setSelectedItem(null);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: ArchiveType.VISION_5Y, label: 'Vision', icon: <Eye size={18} /> },\r\n    { id: ArchiveType.LIFE_TODO, label: 'Life Checklist', icon: <Check size={18} /> },\r\n    { id: ArchiveType.ROUTINE, label: 'Routines', icon: <List size={18} /> },\r\n    { id: ArchiveType.MANTRA_BANK, label: 'Mantra Bank', icon: <Brain size={18} /> },\r\n    { id: ArchiveType.THEORY_NOTES, label: 'Theory Notes', icon: <ScrollText size={18} /> },\r\n  ];\r\n\r\n  const filteredItems = useMemo(() => {\r\n    let list = items.filter(i => i.type === activeTab);\r\n    if (activeTab === ArchiveType.MANTRA_BANK) {\r\n      if (mantraSearch) {\r\n        list = list.filter(i => i.content.toLowerCase().includes(mantraSearch.toLowerCase()));\r\n      }\r\n      list = [...list].sort((a, b) => {\r\n        const dateA = new Date(a.created_at || 0).getTime();\r\n        const dateB = new Date(b.created_at || 0).getTime();\r\n        return mantraSort === 'desc' ? dateB - dateA : dateA - dateB;\r\n      });\r\n    }\r\n    return list;\r\n  }, [items, activeTab, mantraSearch, mantraSort]);\r\n\r\n  const isSingleton = activeTab === ArchiveType.VISION_5Y || activeTab === ArchiveType.LIFE_TODO;\r\n  const isMantraBank = activeTab === ArchiveType.MANTRA_BANK;\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <header className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-graphite-900 dark:text-white\">Archives</h1>\r\n        <p className=\"text-xs font-bold text-graphite-500 uppercase tracking-widest\">Knowledge Base</p>\r\n      </header>\r\n\r\n      <div className=\"flex-1 flex overflow-hidden rounded-2xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-900 shadow-sm\">\r\n\r\n        {/* Primary Sidebar - Tabs */}\r\n        <div className=\"w-64 flex-shrink-0 border-r border-graphite-100 dark:border-graphite-800 bg-graphite-50 dark:bg-graphite-950 p-4 space-y-1\">\r\n          {tabs.map(tab => (\r\n            <button key={tab.id}\r\n              onClick={() => handleTabChange(tab.id)}\r\n              className={`flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-bold transition-all ${activeTab === tab.id ? 'bg-pacific-50 text-pacific-700 dark:bg-pacific-900/20 dark:text-pacific-300' : 'text-graphite-500 hover:bg-graphite-100 dark:hover:bg-graphite-800'}`}\r\n            >\r\n              {tab.icon} {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Secondary Sidebar - Entries (for Collections) */}\r\n        {!isSingleton && !isMantraBank && (\r\n          <div className=\"w-64 flex-shrink-0 border-r border-graphite-100 dark:border-graphite-800 bg-white dark:bg-graphite-900 flex flex-col\">\r\n            <div className=\"p-4 border-b border-graphite-100 dark:border-graphite-800 flex justify-between items-center\">\r\n              <span className=\"text-xs font-bold text-graphite-400 uppercase\">Entries</span>\r\n              <button\r\n                onClick={handleCreateNew}\r\n                className=\"text-pacific-600 hover:bg-pacific-50 p-1.5 rounded-lg transition-colors\"\r\n                title=\"Create New Entry\"\r\n              >\r\n                <Plus size={18} />\r\n              </button>\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto p-2 space-y-1\">\r\n              {filteredItems.map((item: ArchiveItem) => (\r\n                <div key={item.id} className=\"group relative\">\r\n                  <button\r\n                    onClick={() => { selectItem(item); setViewMode('view'); }}\r\n                    className={`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${selectedItem?.id === item.id ? 'bg-graphite-100 dark:bg-graphite-800 text-graphite-900 dark:text-white' : 'text-graphite-500 hover:bg-graphite-50 dark:hover:bg-graphite-800/50'}`}\r\n                  >\r\n                    {item.title || 'Untitled'}\r\n                  </button>\r\n                  <button\r\n                    onClick={(e) => { e.stopPropagation(); handleDeleteItem(item.id); }}\r\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 opacity-0 group-hover:opacity-100 text-graphite-400 hover:text-red-500 transition-all\"\r\n                  >\r\n                    <Trash2 size={14} />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n              {filteredItems.length === 0 && <div className=\"p-4 text-center text-graphite-400 text-xs italic\">No entries yet</div>}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Content Area */}\r\n        <div className=\"flex-1 flex flex-col bg-white dark:bg-graphite-900 relative\">\r\n          {isMantraBank ? (\r\n            <div className=\"flex-1 flex flex-col p-8 overflow-hidden\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-graphite-900 dark:text-white\">Mantra Bank</h2>\r\n                  <div className=\"flex items-center gap-2 mt-1 min-h-[16px]\">\r\n                    {saveStatus === 'saving' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-pacific-500 animate-pulse uppercase tracking-wider\"><Save size={10} /> Saving...</span>}\r\n                    {saveStatus === 'saved' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-bali-500 uppercase tracking-wider\"><Check size={10} /> Saved</span>}\r\n                    {saveStatus === 'error' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-red-500 uppercase tracking-wider\"><X size={10} /> Error Saving</span>}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <div className=\"relative\">\r\n                    <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400\" />\r\n                    <input\r\n                      value={mantraSearch}\r\n                      onChange={e => setMantraSearch(e.target.value)}\r\n                      placeholder=\"Search mantras...\"\r\n                      className=\"bg-graphite-100 dark:bg-graphite-800 border-none rounded-lg pl-10 pr-4 py-2 text-sm focus:ring-1 focus:ring-pacific-500 w-64\"\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setMantraSort(s => s === 'desc' ? 'asc' : 'desc')}\r\n                    className=\"flex items-center gap-2 px-3 py-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors text-xs font-bold uppercase tracking-wide\"\r\n                  >\r\n                    <ArrowUpDown size={14} />\r\n                    {mantraSort === 'desc' ? 'Newest' : 'Oldest'}\r\n                  </button>\r\n                  <button onClick={handleCreateNew} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white text-sm font-bold rounded-lg hover:bg-pacific-500 shadow-lg shadow-pacific-600/20 active:scale-95 transition-all\"><Plus size={18} /> New Mantra</button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-1 overflow-y-auto pr-2 space-y-4\">\r\n                {filteredItems.map(mantra => {\r\n                  const isModified = modifiedMantras[mantra.id] !== undefined && modifiedMantras[mantra.id] !== mantra.content;\r\n                  const currentContent = modifiedMantras[mantra.id] ?? mantra.content;\r\n\r\n                  return (\r\n                    <div key={mantra.id} className=\"group relative px-6 py-4 rounded-2xl bg-white dark:bg-graphite-900/40 border border-graphite-100 dark:border-graphite-800 hover:border-pacific-500/20 hover:bg-white dark:hover:bg-graphite-900/60 transition-all shadow-sm hover:shadow-md flex flex-col justify-center\">\r\n                      <div className=\"flex gap-4 items-start w-full\">\r\n                        {/* Text Area - Horizontal Flow */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <textarea\r\n                            value={currentContent}\r\n                            onChange={(e) => setModifiedMantras(prev => ({ ...prev, [mantra.id]: e.target.value }))}\r\n                            className=\"w-full bg-transparent text-sm font-medium text-graphite-600 dark:text-graphite-300 focus:text-graphite-900 dark:focus:text-white placeholder-graphite-300 border-none focus:ring-0 resize-none p-0 leading-relaxed h-auto overflow-hidden field-sizing-content\"\r\n                            placeholder=\"Write your mantra...\"\r\n                            spellCheck=\"false\"\r\n                            rows={1}\r\n                            style={{ fieldSizing: \"content\" } as any} // Modern CSS to auto-grow\r\n                            onInput={(e) => {\r\n                              const target = e.target as HTMLTextAreaElement;\r\n                              target.style.height = \"auto\";\r\n                              target.style.height = `${target.scrollHeight}px`;\r\n                            }}\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Actions & Metadata - Stays on right or fades in */}\r\n                        <div className=\"flex items-center gap-4 shrink-0 self-center\">\r\n                          <span className=\"text-[10px] text-graphite-400 font-mono uppercase tracking-widest whitespace-nowrap\">\r\n                            {mantra.created_at ? new Date(mantra.created_at).toLocaleDateString() : 'New'}\r\n                          </span>\r\n\r\n                          <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-x-2 group-hover:translate-x-0\">\r\n                            {isModified && (\r\n                              <button\r\n                                onClick={() => handleSaveMantra(mantra, currentContent)}\r\n                                className=\"p-2 text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-transform hover:scale-105 active:scale-95\"\r\n                                title=\"Save Changes\"\r\n                              >\r\n                                <Save size={16} />\r\n                              </button>\r\n                            )}\r\n                            <button\r\n                              onClick={() => handleDeleteItem(mantra.id)}\r\n                              className=\"p-2 text-graphite-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\r\n                              title=\"Delete Mantra\"\r\n                            >\r\n                              <Trash2 size={16} />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n                {filteredItems.length === 0 && !loading && (\r\n                  <div className=\"h-64 flex flex-col items-center justify-center text-graphite-500 space-y-4\">\r\n                    <Brain size={48} className=\"text-graphite-800 opacity-20\" />\r\n                    <p className=\"italic text-sm\">Your mantra bank is empty. Add something to anchor your focus.</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : selectedItem ? (\r\n            <>\r\n              <div className=\"p-6 border-b border-graphite-100 dark:border-graphite-800 flex justify-between items-center bg-white dark:bg-graphite-900/50 backdrop-blur-md sticky top-0 z-10 transition-all duration-300\">\r\n                <div className=\"flex-1 mr-4\">\r\n                  <input\r\n                    value={editorTitle}\r\n                    onChange={e => setEditorTitle(e.target.value)}\r\n                    onBlur={() => handleSave(false)}\r\n                    className=\"bg-transparent text-2xl font-bold text-graphite-900 dark:text-white focus:outline-none placeholder-graphite-400 w-full\"\r\n                    placeholder=\"Entry Title...\"\r\n                    disabled={false}\r\n                  />\r\n                  <div className=\"flex items-center gap-3 mt-1 min-h-[16px]\">\r\n                    {saveStatus === 'saving' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-pacific-500 animate-pulse uppercase tracking-wider\"><Save size={10} /> Saving Changes...</span>}\r\n                    {saveStatus === 'saved' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-bali-500 uppercase tracking-wider\"><Check size={10} /> All Changes Saved</span>}\r\n                    {saveStatus === 'error' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-red-500 uppercase tracking-wider\"><X size={10} /> Connection Error</span>}\r\n\r\n                    {saveStatus === 'idle' && hasUnsavedChanges && (\r\n                      <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-orange-500 uppercase tracking-wider animate-pulse\">\r\n                        <span className=\"h-2 w-2 rounded-full bg-orange-500\"></span> Unsaved Changes\r\n                      </span>\r\n                    )}\r\n\r\n                    {saveStatus === 'idle' && !hasUnsavedChanges && isSingleton && <span className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-wider\">Synced</span>}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                  {/* Hide View/Edit Toggles for Life Checklist as it has its own UI */}\r\n                  {activeTab !== ArchiveType.LIFE_TODO && (\r\n                    <div className=\"flex bg-graphite-100 dark:bg-graphite-800 rounded-lg p-1 mr-2\">\r\n                      <button\r\n                        onClick={() => setViewMode('view')}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${viewMode === 'view' ? 'bg-white dark:bg-graphite-700 shadow-sm text-graphite-900 dark:text-white' : 'text-graphite-500 hover:text-graphite-700'}`}\r\n                      >\r\n                        <Eye size={14} className=\"inline mr-1.5 mb-0.5\" /> Read\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setViewMode('edit')}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${viewMode === 'edit' ? 'bg-white dark:bg-graphite-700 shadow-sm text-graphite-900 dark:text-white' : 'text-graphite-500 hover:text-graphite-700'}`}\r\n                      >\r\n                        <Edit3 size={14} className=\"inline mr-1.5 mb-0.5\" /> Write\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {!isSingleton && <button onClick={() => handleDeleteItem(selectedItem.id)} className=\"p-2 text-graphite-400 hover:text-red-500 transition-colors bg-graphite-100 dark:bg-graphite-800 rounded-lg\" title=\"Delete Entry\"><Trash2 size={16} /></button>}\r\n\r\n                  {viewMode === 'edit' && activeTab !== ArchiveType.LIFE_TODO && (\r\n                    <button onClick={() => handleSave(false)} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white text-xs font-bold rounded-lg hover:bg-pacific-500 shadow-lg shadow-pacific-600/20 active:scale-95 transition-all\">\r\n                      <Save size={16} /> Save\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-1 p-8 overflow-y-auto\">\r\n                {activeTab === ArchiveType.LIFE_TODO ? (\r\n                  <LifeChecklist\r\n                    content={editorContent}\r\n                    onUpdate={setEditorContent}\r\n                    onAutoSave={() => handleSave(false)}\r\n                  />\r\n                ) : (\r\n                  viewMode === 'view' ? (\r\n                    <div className=\"prose prose-sm md:prose-base dark:prose-invert max-w-4xl mx-auto\">\r\n                      <ReactMarkdown\r\n                        remarkPlugins={[remarkGfm]}\r\n                        components={{\r\n                          input: ({ node, ...props }) => (\r\n                            <input {...props} type=\"checkbox\" className=\"w-4 h-4 rounded-sm border-2 border-pacific-500 text-pacific-600 focus:ring-offset-0 focus:ring-0 mr-2 cursor-pointer disabled:cursor-not-allowed disabled:opacity-70 accent-pacific-500/80 bg-transparent\" />\r\n                          )\r\n                        }}\r\n                      >\r\n                        {editorContent}\r\n                      </ReactMarkdown>\r\n                    </div>\r\n                  ) : (\r\n                    <textarea\r\n                      value={editorContent}\r\n                      onChange={e => setEditorContent(e.target.value)}\r\n                      className=\"w-full h-full bg-transparent text-graphite-700 dark:text-graphite-300 font-mono text-base resize-none focus:outline-none leading-relaxed p-4\"\r\n                      placeholder=\"# Start writing some markdown...\"\r\n                    />\r\n                  )\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-graphite-400 space-y-4\">\r\n              <Library size={48} className=\"opacity-10\" />\r\n              <p className=\"text-sm font-medium\">Select an entry or create a new one to begin.</p>\r\n              {!isSingleton && <button onClick={handleCreateNew} className=\"text-pacific-500 font-bold flex items-center gap-2 hover:underline\"><Plus size={16} /> Create Fresh Entry</button>}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Archives;\r\n"],"names":["Archives","activeTab","setActiveTab","VISION_5Y","items","setItems","selectedItem","setSelectedItem","loading","setLoading","editorContent","setEditorContent","editorTitle","setEditorTitle","viewMode","setViewMode","hasUnsavedChanges","setHasUnsavedChanges","originalContent","setOriginalContent","mantraSearch","setMantraSearch","mantraSort","setMantraSort","saveStatus","setSaveStatus","modifiedMantras","setModifiedMantras","loadItems","MANTRA_BANK","seedDefaultArchives","archives","getArchives","LIFE_TODO","found","find","a","type","selectItem","handleCreateNewForTab","err","console","error","item","title","content","handleTabChange","tabId","isSingleton","i","isMantra","defaultTitle","defaultContent","THEORY_NOTES","newItem","id","Date","now","prev","handleCreateNew","handleSave","shouldCloseMantra","updatedItem","result","updateArchive","savedItem","exists","some","map","setTimeout","handleSaveMantra","newContent","startsWith","itemData","next","handleDeleteItem","confirm","deleteArchive","refreshed","filter","tabs","label","icon","size","ROUTINE","filteredItems","list","toLowerCase","includes","sort","b","dateA","created_at","getTime","dateB","isMantraBank","className","tab","onClick","e","stopPropagation","length","value","onChange","target","placeholder","s","mantra","isModified","undefined","currentContent","spellCheck","rows","style","fieldSizing","onInput","height","scrollHeight","toLocaleDateString","onBlur","disabled","onUpdate","onAutoSave","remarkPlugins","components","input","node","props"],"mappings":"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"}}]
}