{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/PerformanceChart.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\ninterface PerformanceChartProps {\r\n    data: Array<{\r\n        date: string;\r\n        score: number;\r\n        details?: Array<{ habit: { name: string }; done: boolean }>\r\n        [key: string]: any\r\n    }>;\r\n    className: string;\r\n    showGrid?: boolean;\r\n    color?: string;\r\n    onDataSelect?: (data: any) => void;\r\n}\r\n\r\nconst CustomTooltip = ({ active, payload, label }: any) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload;\r\n        const completedHabits = data.details?.filter((d: any) => d.done) || [];\r\n\r\n        return (\r\n            <div className=\"bg-graphite-900/90 backdrop-blur-md border border-white/10 p-3 rounded-xl shadow-2xl min-w-[150px] animate-in fade-in zoom-in-95 duration-200 z-50\">\r\n                <div className=\"flex justify-between items-start mb-2 border-b border-white/10 pb-2\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-graphite-400 font-bold uppercase tracking-wider\">\r\n                            {new Date(label).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n                        </p>\r\n                        <p className=\"text-xl font-bold text-white flex items-center gap-1 leading-none mt-1\">\r\n                            {Math.round(payload[0].value)}%\r\n                        </p>\r\n                    </div>\r\n                    <div className={`w-2 h-2 rounded-full mt-1 ${payload[0].value >= 80 ? 'bg-bali-500' : 'bg-pacific-500'}`}></div>\r\n                </div>\r\n\r\n                <div className=\"space-y-1.5\">\r\n                    {completedHabits.length > 0 ? (\r\n                        <>\r\n                            {completedHabits.slice(0, 4).map((detail: any, i: number) => (\r\n                                <div key={i} className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-1 h-1 rounded-full bg-white/50 shrink-0\"></div>\r\n                                    <span className=\"text-[9px] text-graphite-300 font-medium truncate max-w-[120px]\">\r\n                                        {detail.habit.name}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                            {completedHabits.length > 4 && (\r\n                                <p className=\"text-[9px] text-graphite-500 pl-3 italic\">\r\n                                    + {completedHabits.length - 4} more completed\r\n                                </p>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <p className=\"text-[9px] text-graphite-500 italic\">No habits recorded.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nexport const PerformanceChart: React.FC<PerformanceChartProps> = ({\r\n    data,\r\n    // CRITICAL: We enforce a default height here (h-[300px]) to ensure ResponsiveContainer always has space\r\n    className = \"w-full h-[300px]\",\r\n    showGrid = true,\r\n    color = \"#0ea5e9\", // Pacific-500\r\n    onDataSelect\r\n}) => {\r\n    if (!data || data.length === 0) {\r\n        return (\r\n            <div className={`flex items-center justify-center bg-graphite-50 dark:bg-graphite-950 border border-dashed border-graphite-200 dark:border-graphite-800 rounded-xl ${className}`}>\r\n                <p className=\"text-sm text-graphite-400 italic\">No performance data available</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        // The container needs 'select-none' and the passed className.\r\n        // Importantly, className MUST include a height (like h-64 or h-[300px]) for ResponsiveContainer to work.\r\n        <div className={`select-none relative ${className}`}>\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <AreaChart\r\n                    data={data}\r\n                    margin={{ top: 10, right: 10, left: -20, bottom: 0 }} // Negative left margin pulls graph closer to Y-Axis labels\r\n                    onClick={(e) => {\r\n                        if (onDataSelect && e && e.activePayload && e.activePayload[0]) {\r\n                            onDataSelect(e.activePayload[0].payload);\r\n                        }\r\n                    }}\r\n                >\r\n                    <defs>\r\n                        {/* Unique ID to prevent conflicts between multiple charts */}\r\n                        <linearGradient id=\"colorScoreGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                            <stop offset=\"5%\" stopColor={color} stopOpacity={0.3} />\r\n                            <stop offset=\"95%\" stopColor={color} stopOpacity={0} />\r\n                        </linearGradient>\r\n                    </defs>\r\n\r\n                    {showGrid && (\r\n                        <CartesianGrid\r\n                            strokeDasharray=\"3 3\"\r\n                            stroke=\"#52525b\"\r\n                            opacity={0.2}\r\n                            vertical={true}\r\n                            horizontal={false}\r\n                        />\r\n                    )}\r\n\r\n                    <XAxis\r\n                        dataKey=\"date\"\r\n                        hide={true}\r\n                        padding={{ left: 0, right: 0 }}\r\n                    />\r\n\r\n                    <YAxis\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        width={40} // Reserves 40px space for labels\r\n                        tick={{ fill: '#a1a1aa', fontSize: 10, fontWeight: 500, fontFamily: 'monospace' }}\r\n                        domain={[0, 100]}\r\n                        ticks={[0, 25, 50, 75, 100]}\r\n                        interval={0} // Forces all ticks to show\r\n                        tickFormatter={(val) => `${val}%`}\r\n                    />\r\n\r\n                    <Tooltip\r\n                        content={<CustomTooltip />}\r\n                        cursor={{ stroke: color, strokeWidth: 1, strokeDasharray: '4 4', opacity: 0.5 }}\r\n                        wrapperStyle={{ zIndex: 100 }}\r\n                    />\r\n\r\n                    <Area\r\n                        type=\"monotone\"\r\n                        dataKey=\"score\"\r\n                        stroke={color}\r\n                        strokeWidth={3}\r\n                        fillOpacity={1}\r\n                        fill=\"url(#colorScoreGradient)\" // Matches the new ID\r\n                        activeDot={{ r: 6, strokeWidth: 0, fill: '#fff' }}\r\n                        animationDuration={1500}\r\n                    />\r\n                </AreaChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n};"],"names":[],"mappings":"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"}}]
}