{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/lib/supabase.ts"],"sourcesContent":["\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\n\r\n// Type assertion for Next.js env variables\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n    // We don't throw error to avoid crashing the app entirely if env vars are missing during dev\r\n    console.warn('Supabase URL or Anon Key is missing. Check your .env.local file. defaulting to placeholder to prevent crash.');\r\n}\r\n\r\n// Ensure we pass a valid URL format to avoid runtime crash during development if variables are missing\r\nconst validUrl = supabaseUrl || 'https://hrmemkwrdjbwtqguuqjm.supabase.co';\r\nconst validKey = supabaseAnonKey || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhybWVta3dyZGpid3RxZ3V1cWptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MTg5OTAsImV4cCI6MjA4NDQ5NDk5MH0.6Dltp4LOeaQROJzisvUAfXzctyEDO4DtgXomuPkfAks';\r\n\r\nexport const supabase = createClient(validUrl, validKey);\r\n"],"names":[],"mappings":";;;;AAKoB;AAJpB;;AAGA,2CAA2C;AAC3C,MAAM;AACN,MAAM;AAEN;;AAKA,uGAAuG;AACvG,MAAM,WAAW,eAAe;AAChC,MAAM,WAAW,mBAAmB;AAE7B,MAAM,WAAW,IAAA,iMAAY,EAAC,UAAU"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/PortalEntry.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { LogIn, Mail, Lock, Eye, EyeOff, XCircle, Loader2, Apple } from 'lucide-react';\r\n\r\ninterface PortalEntryProps {\r\n  onEnter: () => void;\r\n}\r\n\r\nconst PortalEntry: React.FC<PortalEntryProps> = ({ onEnter }) => {\r\n  const [stage, setStage] = useState<0 | 1 | 2 | 'login'>(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isSignUp, setIsSignUp] = useState(false);\r\n  const [authLoading, setAuthLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  useEffect(() => {\r\n    checkSession();\r\n  }, []);\r\n\r\n  const checkSession = async () => {\r\n    const { data: { session } } = await supabase.auth.getSession();\r\n    if (session) {\r\n      startAnimation();\r\n    } else {\r\n      setLoading(false);\r\n      setStage('login');\r\n    }\r\n  };\r\n\r\n  const handleEmailAuth = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setAuthLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (isSignUp) {\r\n        const { error: signUpError } = await supabase.auth.signUp({\r\n          email,\r\n          password,\r\n          options: {\r\n            emailRedirectTo: window.location.origin,\r\n          }\r\n        });\r\n        if (signUpError) throw signUpError;\r\n        setError(\"Account created! Check your email to confirm.\");\r\n      } else {\r\n        const { error: signInError } = await supabase.auth.signInWithPassword({ email, password });\r\n        if (signInError) throw signInError;\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setAuthLoading(false);\r\n    }\r\n  };\r\n\r\n  const startAnimation = () => {\r\n    setLoading(false);\r\n    setStage(0);\r\n    // Sequence\r\n    setTimeout(() => setStage(1), 500);\r\n    setTimeout(() => setStage(2), 2500);\r\n    setTimeout(() => onEnter(), 5500);\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    await supabase.auth.signInWithOAuth({\r\n      provider: 'google',\r\n      options: {\r\n        redirectTo: window.location.origin,\r\n        queryParams: {\r\n          prompt: 'select_account'\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-[#050505]\">\r\n        <div className=\"relative flex flex-col items-center\">\r\n          <div className=\"h-12 w-12 rounded-full border-t-2 border-pacific-500 animate-spin mb-4\"></div>\r\n          <div className=\"text-white/20 font-mono text-[10px] uppercase tracking-[0.5em] animate-pulse\">\r\n            Verifying System Identity\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (stage === 'login') {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#010101] transition-colors duration-1000 overflow-hidden font-sans select-none\">\r\n\r\n        {/* Cinematic Background Layers */}\r\n        <div className=\"absolute inset-0\">\r\n          {/* Broad atmospheric Pacific-blue wash at bottom edge */}\r\n          <div className=\"absolute bottom-[-15%] left-1/2 -translate-x-1/2 w-[100%] h-[60vh] bg-pacific-500/20 blur-[160px] rounded-[100%] opacity-100\"></div>\r\n          <div className=\"absolute bottom-[-10%] left-1/2 -translate-x-1/2 w-[80%] h-[40vh] bg-pacific-400/10 blur-[120px] rounded-[100%] animate-pulse duration-[8s] transition-all\"></div>\r\n\r\n          {/* Global Film Grain Overlay */}\r\n          <div className=\"absolute inset-0 opacity-[0.05] mix-blend-overlay pointer-events-none\"\r\n            style={{\r\n              backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")`\r\n            }}>\r\n          </div>\r\n\r\n          {/* Parallax Star Particles */}\r\n          <div className=\"absolute inset-0 opacity-[0.02]\">\r\n            {[...Array(6)].map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"absolute w-px h-px bg-white rounded-full\"\r\n                style={{\r\n                  top: `${Math.random() * 100}%`,\r\n                  left: `${Math.random() * 100}%`,\r\n                  opacity: Math.random()\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 flex flex-col items-center w-full max-w-[440px] px-6 animate-in fade-in zoom-in-95 duration-1000\">\r\n\r\n          {/* Main Login Card - Professional Structural Re-architecture */}\r\n          <div className=\"w-full relative group/card p-[1px] rounded-[34px] bg-gradient-to-br from-white/15 via-white/5 to-white/10 shadow-[0_60px_120px_-30px_rgba(0,0,0,1)]\">\r\n\r\n            {/* Layer 2: High-Contrast Specular Highlights (The \"Glint\") */}\r\n            <div className=\"absolute inset-0 rounded-[34px] bg-gradient-to-tr from-transparent via-white/5 to-transparent opacity-0 group-hover/card:opacity-100 transition-opacity duration-[1.5s] pointer-events-none\"></div>\r\n\r\n            {/* Parent Surface Container (The Core) */}\r\n            <div className=\"relative rounded-[33px] bg-zinc-950/40 backdrop-blur-3xl overflow-hidden shadow-[inset_0_1px_1px_rgba(255,255,255,0.1)]\">\r\n\r\n              {/* Industrial Mesh Texture (Top Head Section) */}\r\n              <div className=\"absolute top-0 left-0 right-0 h-48 opacity-[0.08] mix-blend-soft-light pointer-events-none\"\r\n                style={{\r\n                  backgroundImage: `radial-gradient(circle at 2px 2px, white 1px, transparent 0)`,\r\n                  backgroundSize: '16px 16px'\r\n                }}>\r\n              </div>\r\n\r\n              {/* Internal Rim Lighting (Precision Edge) */}\r\n              <div className=\"absolute inset-0 rounded-[33px] border-t border-l border-white/10 pointer-events-none\"></div>\r\n\r\n              {/* Card Content Interior */}\r\n              <div className=\"relative px-11 py-11\">\r\n\r\n                {/* Branding Wordmark (Sidebar Sync) */}\r\n                <div className=\"flex flex-col items-center mb-10\">\r\n                  <div className=\"flex items-center justify-center select-none\">\r\n                    <span className=\"font-sans text-4xl font-black tracking-tighter text-white leading-none mr-[2px]\">P</span>\r\n                    <div className=\"relative h-8 w-8 mx-[1px] flex-shrink-0 flex items-center justify-center\">\r\n                      <div className=\"absolute inset-0 rounded-full border-[3.5px] border-transparent border-t-pacific-500 border-l-pacific-400 animate-[spin_3.5s_linear_infinite]\" style={{ boxShadow: '0 0 15px rgba(14, 165, 233, 0.3)' }}></div>\r\n                      <div className=\"absolute inset-[4px] rounded-full border-[2.5px] border-transparent border-b-bali-500 border-r-bali-400 animate-[spin_2.5s_linear_infinite_reverse]\"></div>\r\n                      <div className=\"absolute h-1.5 w-1.5 bg-white rounded-full shadow-[0_0_10px_white]\"></div>\r\n                    </div>\r\n                    <span className=\"font-sans text-4xl font-black tracking-tighter text-white leading-none ml-[2px]\">RTAL</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mb-9 text-center\">\r\n                  <h2 className=\"text-[18px] font-bold text-white tracking-wide mb-1.5\">{isSignUp ? \"Sign Up\" : \"Log in\"}</h2>\r\n                  <p className=\"text-white/40 text-[10px] leading-relaxed max-w-[220px] mx-auto\">Access your secure encrypted performance hub.</p>\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"mb-6 p-4 rounded-2xl bg-red-500/5 border border-red-500/15 flex items-center gap-3 animate-in slide-in-from-top-2\">\r\n                    <XCircle className=\"w-3.5 h-3.5 text-red-500/50 shrink-0\" />\r\n                    <p className=\"text-red-400/70 text-[10px] leading-tight\">{error}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <form onSubmit={handleEmailAuth} className=\"space-y-4\">\r\n                  {/* Email Input Field */}\r\n                  <div className=\"relative h-[54px] group/input\">\r\n                    <div className=\"absolute left-[18px] top-1/2 -translate-y-1/2 flex items-center justify-center pointer-events-none z-10 h-4 w-4\">\r\n                      <Mail className=\"w-full h-full text-white/20 group-focus-within/input:text-pacific-400 transition-colors\" />\r\n                    </div>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      placeholder=\"Email address\"\r\n                      required\r\n                      className=\"w-full h-full bg-black/40 border border-white/5 rounded-[18px] pl-[52px] pr-5 text-white placeholder:text-white/20 text-xs focus:outline-none focus:border-pacific-500/30 focus:bg-black/60 transition-all shadow-[inset_0_1px_6px_rgba(0,0,0,0.6)]\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Password Input Field */}\r\n                  <div className=\"relative h-[54px] group/input\">\r\n                    <div className=\"absolute left-[18px] top-1/2 -translate-y-1/2 flex items-center justify-center pointer-events-none z-10 h-4 w-4\">\r\n                      <Lock className=\"w-full h-full text-white/20 group-focus-within/input:text-pacific-400 transition-colors\" />\r\n                    </div>\r\n                    <input\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      placeholder=\"Password\"\r\n                      required\r\n                      className=\"w-full h-full bg-black/40 border border-white/5 rounded-[18px] pl-[52px] pr-[52px] text-white placeholder:text-white/20 text-xs focus:outline-none focus:border-pacific-500/30 focus:bg-black/60 transition-all shadow-[inset_0_1px_6px_rgba(0,0,0,0.6)]\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword(!showPassword)}\r\n                      className=\"absolute right-[18px] top-1/2 -translate-y-1/2 flex items-center justify-center text-white/10 hover:text-white/30 transition-colors z-20 h-5 w-5\"\r\n                    >\r\n                      {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                    </button>\r\n                  </div>\r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={authLoading}\r\n                    className=\"w-full h-12 bg-white/[0.04] hover:bg-white/[0.07] border border-white/10 rounded-[18px] text-white font-bold text-xs tracking-[0.2em] transition-all active:scale-[0.98] flex items-center justify-center gap-2 group/btn relative overflow-hidden mt-3 shadow-lg\"\r\n                  >\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover/btn:translate-x-full duration-1000 transition-transform\"></div>\r\n                    {authLoading ? (\r\n                      <Loader2 className=\"w-4 h-4 animate-spin text-pacific-400\" />\r\n                    ) : (\r\n                      <span className=\"pl-[0.15em]\">{isSignUp ? \"INITIALIZE\" : \"AUTHENTICATE\"}</span>\r\n                    )}\r\n                  </button>\r\n                </form>\r\n\r\n                <div className=\"my-7 flex items-center gap-4\">\r\n                  <div className=\"h-px flex-1 bg-white/[0.03]\"></div>\r\n                  <span className=\"text-[7px] text-white/10 uppercase tracking-[0.5em] font-bold pl-[0.5em]\">Network Protocol</span>\r\n                  <div className=\"h-px flex-1 bg-white/[0.03]\"></div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleGoogleLogin}\r\n                  className=\"w-full flex items-center justify-center gap-3.5 h-11 bg-black/30 hover:bg-black/50 border border-white/5 rounded-[18px] transition-all active:scale-[0.98] hover:border-pacific-500/20\"\r\n                >\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-4 h-4 opacity-70\">\r\n                    <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\r\n                    <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\r\n                    <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26.81-.58z\" />\r\n                    <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\r\n                  </svg>\r\n                  <span className=\"text-white/30 text-[9px] font-bold tracking-widest uppercase pl-[0.1em]\">Log in with Google</span>\r\n                </button>\r\n\r\n                <div className=\"mt-9 text-center\">\r\n                  <button\r\n                    onClick={() => setIsSignUp(!isSignUp)}\r\n                    className=\"text-white/15 text-[8.5px] uppercase tracking-[0.5em] font-bold hover:text-pacific-400 transition-colors pl-[0.5em]\"\r\n                  >\r\n                    {isSignUp ? \"Already have an account? Log in\" : \"Don't have an account? Sign up\"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`fixed inset-0 z-50 flex items-center justify-center overflow-hidden bg-transparent ${stage === 2 ? 'pointer-events-none' : ''}`}>\r\n\r\n      {/* The \"Door\" Logic - Two panels splitting */}\r\n      {/* Light Mode: #fafafa (Zinc 50), Dark Mode: #18181b (Zinc 900) */}\r\n      <div\r\n        className={`absolute inset-y-0 left-0 z-20 transition-transform duration-[1500ms] ease-in-out border-r \r\n        bg-[#fafafa] dark:bg-[#18181b] border-zinc-200 dark:border-zinc-800\r\n        ${stage === 2 ? '-translate-x-full' : 'translate-x-0'}`}\r\n        style={{ width: '50%' }}\r\n      />\r\n      <div\r\n        className={`absolute inset-y-0 right-0 z-20 transition-transform duration-[1500ms] ease-in-out border-l \r\n        bg-[#fafafa] dark:bg-[#18181b] border-zinc-200 dark:border-zinc-800\r\n        ${stage === 2 ? 'translate-x-full' : 'translate-x-0'}`}\r\n        style={{ width: '50%' }}\r\n      />\r\n\r\n      {/* The Central Animation Container */}\r\n      <div className={`relative z-30 flex items-center justify-center transition-all duration-700 ${stage === 2 ? 'scale-125 opacity-0' : 'scale-100 opacity-100'}`}>\r\n\r\n        {/* Decorative Lines */}\r\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n          {/* Main Center Line */}\r\n          <div className={`absolute h-[1px] bg-zinc-900 dark:bg-white shadow-[0_0_20px_rgba(0,0,0,0.2)] dark:shadow-[0_0_20px_rgba(255,255,255,0.8)] transition-all duration-1000 ease-out \r\n              ${stage >= 1 ? 'w-[600px] opacity-100' : 'w-0 opacity-0'}`}\r\n          />\r\n\r\n          {/* Top Secondary Line */}\r\n          <div className={`absolute h-[1px] bg-zinc-300 dark:bg-zinc-700 transition-all duration-[1200ms] ease-out delay-100\r\n              ${stage >= 1 ? 'w-[400px] -translate-y-20 opacity-40' : 'w-0 translate-y-0 opacity-0'}`}\r\n          />\r\n\r\n          {/* Bottom Secondary Line */}\r\n          <div className={`absolute h-[1px] bg-zinc-300 dark:bg-zinc-700 transition-all duration-[1200ms] ease-out delay-100\r\n              ${stage >= 1 ? 'w-[400px] translate-y-20 opacity-40' : 'w-0 translate-y-0 opacity-0'}`}\r\n          />\r\n\r\n          {/* Vertical Scanner Line */}\r\n          <div className={`absolute w-[1px] bg-pacific-500/50 transition-all duration-700 ease-in-out delay-300\r\n              ${stage >= 1 ? 'h-40 opacity-100' : 'h-0 opacity-0'}`}\r\n          />\r\n        </div>\r\n\r\n        {/* Logo Replacement - Centered with background to mask lines */}\r\n        <div className={`relative z-10 flex items-center justify-center bg-[#fafafa] dark:bg-[#18181b] px-8 py-4 transition-all duration-1000 delay-300 ${stage >= 1 ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>\r\n          {/* P */}\r\n          <span className=\"font-display text-8xl font-black tracking-tighter text-zinc-900 dark:text-white leading-none mr-1.5\">P</span>\r\n\r\n          {/* THE PORTAL \"O\" */}\r\n          <div className=\"relative h-16 w-16 mx-1.5 flex-shrink-0 flex items-center justify-center\">\r\n            {/* Outer Ring - Pacific */}\r\n            <div className=\"absolute inset-0 rounded-full border-[4px] border-transparent border-t-pacific-500 border-l-pacific-400 animate-[spin_3s_linear_infinite]\" style={{ boxShadow: '0 0 25px rgba(14, 165, 233, 0.5)' }}></div>\r\n\r\n            {/* Inner Ring - Bali */}\r\n            <div className=\"absolute inset-[6px] rounded-full border-[3px] border-transparent border-b-bali-500 border-r-bali-400 animate-[spin_2s_linear_infinite_reverse]\"></div>\r\n\r\n            {/* Center Singularity */}\r\n            <div className=\"absolute h-3 w-3 bg-zinc-900 dark:bg-white rounded-full shadow-[0_0_15px_currentColor] animate-pulse\"></div>\r\n          </div>\r\n\r\n          {/* RTAL */}\r\n          <span className=\"font-display text-8xl font-black tracking-tighter text-zinc-900 dark:text-white leading-none ml-1.5\">RTAL</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PortalEntry;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/types/types.ts"],"sourcesContent":["\r\n// 2.2 Supabase Database Schema Mappings & Enums\r\n\r\nexport enum EntityStatus {\r\n  ACTIVE = 'active',\r\n  ARCHIVED = 'archived',\r\n}\r\n\r\nexport enum HabitWeight {\r\n  LOW = 1,\r\n  MEDIUM = 2,\r\n  HIGH = 4,\r\n}\r\n\r\nexport enum GoalType {\r\n  TASK_PROJECT = 'task_project',\r\n  CONSISTENCY_METRIC = 'consistency_metric',\r\n}\r\n\r\nexport enum ArchiveType {\r\n  ROUTINE = 'routine',\r\n  VISION_5Y = 'vision_5y',\r\n  LIFE_TODO = 'life_todo',\r\n  MANTRA_BANK = 'mantra_bank',\r\n  THEORY_NOTES = 'theory_notes',\r\n}\r\n\r\nexport enum SlideCategory {\r\n  ME = 'Me',\r\n  HER = 'Her',\r\n  PURPOSE = 'Purpose',\r\n  SOCIAL = 'Social',\r\n  MATERIAL = 'Material',\r\n}\r\n\r\n// -- CORE MANAGEMENT --\r\nexport interface Profile {\r\n  id: string;\r\n  current_version_id: string | null;\r\n  current_cycle_id: string | null;\r\n  avatar_url?: string;\r\n  // System Tempo Settings\r\n  version_days_default: number; // Default 90\r\n  cycles_per_version_default: number; // Default 6\r\n}\r\n\r\n// -- TIME MANAGEMENT --\r\nexport interface Version {\r\n  id: string;\r\n  number: number;\r\n  title: string;\r\n  description: string; // The \"Persona\"\r\n  status: EntityStatus;\r\n  start_date: string; // ISO Date\r\n  end_date: string; // ISO Date\r\n}\r\n\r\nexport interface CCHItem {\r\n  category: 'Beliefs' | 'Characteristics' | 'Skills';\r\n  items: string[];\r\n}\r\n\r\nexport interface Cycle {\r\n  id: string;\r\n  version_id: string;\r\n  sprint_number: number;\r\n  focus_priorities: string[]; // Max 3\r\n  problems: string;\r\n  cch_list: CCHItem[];\r\n  mantras: string[];\r\n  learning_focus: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status?: EntityStatus;\r\n}\r\n\r\n// -- ACTION ENGINE --\r\nexport interface Habit {\r\n  id: string;\r\n  cycle_id: string;\r\n  name: string;\r\n  weight: HabitWeight;\r\n  category: string;\r\n  linked_goal_id?: string;\r\n}\r\n\r\nexport interface HabitLog {\r\n  id: string;\r\n  habit_id: string;\r\n  date: string; // ISO Date \"YYYY-MM-DD\"\r\n  status: boolean;\r\n}\r\n\r\nexport interface Subtask {\r\n  name: string;\r\n  done: boolean;\r\n  level?: number; // 0 = root, 1 = sub, etc.\r\n}\r\n\r\nexport interface Goal {\r\n  id: string;\r\n  cycle_id: string;\r\n  title: string;\r\n  description: string;\r\n  type: GoalType;\r\n  // For Projects\r\n  subtasks?: Subtask[];\r\n  // For Metrics\r\n  linked_habit_id?: string;\r\n  current_streak?: number;\r\n}\r\n\r\n// -- KNOWLEDGE & ARCHIVES --\r\nexport interface ArchiveItem {\r\n  id: string;\r\n  type: ArchiveType;\r\n  title: string;\r\n  content: string;\r\n  created_at?: string;\r\n}\r\n\r\n// -- VISUALIZATION --\r\nexport interface Slide {\r\n  id: string;\r\n  category: SlideCategory;\r\n  image_url: string;\r\n  gallery_images?: string[];\r\n  caption: string;\r\n}\r\n\r\n// -- DATA TRANSFER OBJECTS FOR UI --\r\nexport interface DashboardData {\r\n  version: Version | null;\r\n  cycle: Cycle | null;\r\n  habits: Habit[];\r\n  todayLogs: HabitLog[];\r\n  habitStats: Record<string, { currentStreak: number; maxStreak: number }>;\r\n  goals: Goal[];\r\n}\r\n"],"names":[],"mappings":"AACA,gDAAgD;;;;;;;;;;;;;AAEzC,IAAA,AAAK,sCAAA;;;WAAA;;AAKL,IAAA,AAAK,qCAAA;;;;WAAA;;AAML,IAAA,AAAK,kCAAA;;;WAAA;;AAKL,IAAA,AAAK,qCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,uCAAA;;;;;;WAAA"}},
    {"offset": {"line": 834, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/lib/supabaseService.ts"],"sourcesContent":["\r\nimport { supabase } from './supabase';\r\nimport {\r\n    Profile, Version, Cycle, Habit, HabitLog,\r\n    Goal, ArchiveItem, Slide, DashboardData,\r\n    EntityStatus, GoalType, ArchiveType\r\n} from '@/types/types';\r\n\r\nexport class SupabaseService {\r\n\r\n    // -- AUTH & ALIASING --\r\n    // Helper to ensure we have a user and get their ID\r\n    private async getUserId(): Promise<string> {\r\n        const { data: { session } } = await supabase.auth.getSession();\r\n        if (!session?.user) throw new Error(\"Not authenticated\");\r\n        return session.user.id;\r\n    }\r\n\r\n    // NEW: Helper to get YYYY-MM-DD in local time\r\n    getLocalDateString(date: Date = new Date()): string {\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    // Helper to get the full profile\r\n    async getProfile(): Promise<Profile | null> {\r\n        const userId = await this.getUserId();\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .eq('id', userId)\r\n            .single();\r\n\r\n        if (error) {\r\n            console.error('Error fetching profile:', error);\r\n            return null;\r\n        }\r\n        return data;\r\n    }\r\n\r\n    // -- SYSTEM SETTINGS --\r\n    async getSystemSettings(): Promise<{ days: number; cycles: number }> {\r\n        const profile = await this.getProfile();\r\n        return {\r\n            days: profile?.version_days_default || 90,\r\n            cycles: profile?.cycles_per_version_default || 6\r\n        };\r\n    }\r\n\r\n    async updateProfile(updates: Partial<Profile>): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update(updates)\r\n            .eq('id', userId);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async uploadAvatar(file: File): Promise<string> {\r\n        const userId = await this.getUserId();\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `${userId}/avatar-${Date.now()}.${fileExt}`;\r\n        const filePath = `${fileName}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n            .from('el-portal-assets')\r\n            .upload(filePath, file, { upsert: true });\r\n\r\n        if (uploadError) throw uploadError;\r\n\r\n        const { data } = supabase.storage\r\n            .from('el-portal-assets')\r\n            .getPublicUrl(filePath);\r\n\r\n        return data.publicUrl;\r\n    }\r\n\r\n    async updateSystemSettings(days: number, cycles: number): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update({ version_days_default: days, cycles_per_version_default: cycles })\r\n            .eq('id', userId);\r\n        if (error) throw error;\r\n    }\r\n\r\n    // -- ANALYTICS ALGORITHMS (Migrated from MockDB) --\r\n\r\n    // 3.1 Daily Performance Calculation\r\n    calculateDailyScore(habits: Habit[], logs: HabitLog[]): number {\r\n        if (habits.length === 0) return 0;\r\n\r\n        let totalWeight = 0;\r\n        let completedWeight = 0;\r\n\r\n        habits.forEach(habit => {\r\n            totalWeight += habit.weight;\r\n            // Check if log exists for this habit\r\n            const isDone = logs.some(l => l.habit_id === habit.id && l.status);\r\n            if (isDone) {\r\n                completedWeight += habit.weight;\r\n            }\r\n        });\r\n\r\n        if (totalWeight === 0) return 0;\r\n        return Math.round((completedWeight / totalWeight) * 100);\r\n    }\r\n\r\n    // 3.2 Asymptotic Goal Progression\r\n    calculateAsymptoticScore(streak: number): number {\r\n        // Constraint: 7 days = ~35%\r\n        // Formula: Progress % = 100 * (1 - e^(-0.061 * StreakDays))\r\n        if (streak <= 0) return 0;\r\n        const progress = 100 * (1 - Math.exp(-0.061 * streak));\r\n        return Math.min(100, Math.round(progress));\r\n    }\r\n\r\n    private calculateHabitStreaks(habitId: string, allLogs: HabitLog[]): { currentStreak: number, maxStreak: number } {\r\n        // Filter logs for this habit and ensure they are 'true' (completed)\r\n        const logs = allLogs.filter(l => l.habit_id === habitId && l.status);\r\n        const dates = Array.from(new Set(logs.map(l => l.date))).sort();\r\n\r\n        if (dates.length === 0) return { currentStreak: 0, maxStreak: 0 };\r\n\r\n        // Max Streak Calculation\r\n        let max = 0;\r\n        let current = 0;\r\n        let prevTimestamp: number | null = null;\r\n\r\n        for (const dStr of dates) {\r\n            const timestamp = new Date(dStr).getTime();\r\n            if (prevTimestamp) {\r\n                const diffDays = Math.round((timestamp - prevTimestamp) / (1000 * 3600 * 24));\r\n                if (diffDays === 1) {\r\n                    current++;\r\n                } else {\r\n                    max = Math.max(max, current);\r\n                    current = 1;\r\n                }\r\n            } else {\r\n                current = 1;\r\n            }\r\n            prevTimestamp = timestamp;\r\n        }\r\n        max = Math.max(max, current);\r\n\r\n        // Current Streak Calculation\r\n        let streak = 0;\r\n        const today = new Date();\r\n        const todayStr = today.toISOString().split('T')[0];\r\n\r\n        const yesterday = new Date(today);\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n        // Determine start point\r\n        let checkDate: Date | null = null;\r\n\r\n        if (dates.includes(todayStr)) {\r\n            streak = 1;\r\n            checkDate = new Date(today);\r\n        } else if (dates.includes(yesterdayStr)) {\r\n            streak = 1;\r\n            checkDate = new Date(yesterday);\r\n        }\r\n\r\n        if (checkDate) {\r\n            while (true) {\r\n                checkDate.setDate(checkDate.getDate() - 1);\r\n                const checkStr = checkDate.toISOString().split('T')[0];\r\n                if (dates.includes(checkStr)) {\r\n                    streak++;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return { currentStreak: streak, maxStreak: max };\r\n    }\r\n\r\n    // -- DATA FETCHING --\r\n\r\n    async getDashboardData(): Promise<DashboardData> {\r\n        const profile = await this.getProfile();\r\n        if (!profile) throw new Error(\"Profile not found\");\r\n\r\n        // 1. Fetch current version & cycle details if they exist\r\n        let currentVersion: Version | null = null;\r\n        let currentCycle: Cycle | null = null;\r\n\r\n        if (profile.current_version_id) {\r\n            const { data } = await supabase.from('versions').select('*').eq('id', profile.current_version_id).single();\r\n            currentVersion = data;\r\n        }\r\n\r\n        if (profile.current_cycle_id) {\r\n            const { data } = await supabase.from('cycles').select('*').eq('id', profile.current_cycle_id).single();\r\n            currentCycle = data;\r\n        }\r\n\r\n        // 2. Fetch Habits & Goals for Current Cycle\r\n        let habits: Habit[] = [];\r\n        let goals: Goal[] = [];\r\n\r\n        if (currentCycle) {\r\n            const { data: hData } = await supabase.from('habits').select('*').eq('cycle_id', currentCycle.id);\r\n            habits = hData || [];\r\n\r\n            const { data: gData } = await supabase.from('goals').select('*').eq('cycle_id', currentCycle.id);\r\n            goals = gData || [];\r\n        }\r\n\r\n        // 3. Fetch Logs (Optimization: Fetch all logs for these habits? Or just active ones?)\r\n        // For streaks we need history. Let's fetch logs for these habits.\r\n        let logs: HabitLog[] = [];\r\n        if (habits.length > 0) {\r\n            const habitIds = habits.map(h => h.id);\r\n            const { data: lData } = await supabase.from('habit_logs').select('*').in('habit_id', habitIds);\r\n            logs = lData || [];\r\n        }\r\n\r\n        // 4. Calculate Stats\r\n        const todayStr = this.getLocalDateString();\r\n        const todayLogs = logs.filter(l => l.date === todayStr);\r\n\r\n        const habitStats: Record<string, { currentStreak: number; maxStreak: number }> = {};\r\n        habits.forEach(h => {\r\n            habitStats[h.id] = this.calculateHabitStreaks(h.id, logs);\r\n        });\r\n\r\n        return {\r\n            version: currentVersion,\r\n            cycle: currentCycle,\r\n            habits,\r\n            todayLogs,\r\n            habitStats,\r\n            goals\r\n        };\r\n    }\r\n\r\n    // -- ACTIONS --\r\n\r\n    async toggleHabit(habitId: string, isChecked: boolean): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        const todayStr = this.getLocalDateString();\r\n\r\n        if (isChecked) {\r\n            // INSERT log\r\n            const { error } = await supabase.from('habit_logs').insert({\r\n                habit_id: habitId,\r\n                date: todayStr,\r\n                status: true,\r\n                user_id: userId\r\n            });\r\n            if (error) throw error;\r\n\r\n            // Update Goal Streak if linked\r\n            // Fetch habit to check link\r\n            const { data: habit } = await supabase.from('habits').select('linked_goal_id').eq('id', habitId).single();\r\n            if (habit && habit.linked_goal_id) {\r\n                // Increment goal streak\r\n                await supabase.rpc('increment_goal_streak', { goal_id: habit.linked_goal_id });\r\n                // Note: We might need to implement this RPC or do it in two steps (fetch, update)\r\n                // For now, let's do fetch-update safely\r\n                const { data: goal } = await supabase.from('goals').select('current_streak').eq('id', habit.linked_goal_id).single();\r\n                if (goal) {\r\n                    await supabase.from('goals').update({ current_streak: (goal.current_streak || 0) + 1 }).eq('id', habit.linked_goal_id);\r\n                }\r\n            }\r\n\r\n        } else {\r\n            // DELETE log\r\n            const { error } = await supabase.from('habit_logs').delete()\r\n                .eq('habit_id', habitId)\r\n                .eq('date', todayStr);\r\n\r\n            if (error) throw error;\r\n\r\n            // Decrement Goal Streak\r\n            const { data: habit } = await supabase.from('habits').select('linked_goal_id').eq('id', habitId).single();\r\n            if (habit && habit.linked_goal_id) {\r\n                const { data: goal } = await supabase.from('goals').select('current_streak').eq('id', habit.linked_goal_id).single();\r\n                if (goal) {\r\n                    await supabase.from('goals').update({ current_streak: Math.max(0, (goal.current_streak || 0) - 1) }).eq('id', habit.linked_goal_id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // -- SLIDES (Storage + DB) --\r\n    async getSlides(): Promise<Slide[]> {\r\n        const { data } = await supabase.from('slides').select('*').order('category');\r\n        if (!data) return [];\r\n\r\n        return Promise.all(data.map(async (s) => {\r\n            if (s.image_url && !s.image_url.startsWith('http')) {\r\n                const { data: signed } = await supabase.storage\r\n                    .from('el-portal-assets')\r\n                    .createSignedUrl(s.image_url, 3600); // 1 hour expiry\r\n                if (signed) {\r\n                    return { ...s, image_url: signed.signedUrl };\r\n                }\r\n            }\r\n            return s;\r\n        }));\r\n    }\r\n\r\n    async updateSlide(slide: Slide, imageFile?: File): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        let imageUrl = slide.image_url;\r\n\r\n        if (imageFile) {\r\n            // Upload to Supabase Storage\r\n            const fileExt = imageFile.name.split('.').pop();\r\n            const fileName = `${userId}/${slide.category}.${fileExt}`;\r\n            const filePath = `${fileName}`; // e.g., \"user_id/Me.jpg\"\r\n\r\n            const { error: uploadError } = await supabase.storage\r\n                .from('el-portal-assets')\r\n                .upload(filePath, imageFile, { upsert: true });\r\n\r\n            if (uploadError) throw uploadError;\r\n\r\n            // Ensure we store the PATH, or the Signed URL. \r\n            // Storing the PATH is cleaner, we generate Signed URL on read.\r\n            // BUT `getSlides` returns `image_url`. The UI expects a usable URL.\r\n            // So we should probably store the public URL if public, or generate signed urls on fetch.\r\n            // Since it's private data, we must generate signed URLs.\r\n            // For simplicity in this step, let's store the path and handle \"view\" logic in `getSlides` or separate method.\r\n            // However, the interface expects `image_url`. \r\n            // Let's store the path in DB `image_url` column for now, and have a helper to sign it.\r\n            imageUrl = filePath;\r\n        }\r\n\r\n        // Update DB Record\r\n        // Check if exists\r\n        const { data: existing } = await supabase.from('slides').select('id').eq('category', slide.category).single();\r\n\r\n        if (existing) {\r\n            await supabase.from('slides').update({\r\n                image_url: imageUrl,\r\n                caption: slide.caption\r\n            }).eq('id', existing.id);\r\n        } else {\r\n            await supabase.from('slides').insert({\r\n                user_id: userId,\r\n                category: slide.category,\r\n                image_url: imageUrl,\r\n                caption: slide.caption\r\n            });\r\n        }\r\n    }\r\n\r\n    // Helper to get actual viewable URL\r\n    // The UI might need to call this.\r\n    async getSlideImageUrl(path: string): Promise<string> {\r\n        if (!path) return '';\r\n        if (path.startsWith('http')) return path; // Already a URL (e.g. seed data)\r\n\r\n        const { data } = await supabase.storage.from('el-portal-assets').createSignedUrl(path, 3600); // 1 hour\r\n        return data?.signedUrl || '';\r\n    }\r\n\r\n    // -- ARCHIVES --\r\n    async getArchives(): Promise<ArchiveItem[]> {\r\n        const { data } = await supabase.from('archives').select('*').order('created_at', { ascending: true });\r\n\r\n        return (data || []).map(row => ({\r\n            ...row,\r\n            content: typeof row.content === 'object' && row.content?.markdown ? row.content.markdown : row.content\r\n        }));\r\n    }\r\n\r\n    async updateArchive(item: ArchiveItem): Promise<{ id: string }> {\r\n        const userId = await this.getUserId();\r\n        const contentJson = { markdown: item.content };\r\n        const isNewPlaceholder = item.id.startsWith('new-') || item.id === 'placeholder';\r\n\r\n        // Check if exists - avoid invalid UUID query for new items\r\n        let existing = null;\r\n        if (!isNewPlaceholder) {\r\n            const { data } = await supabase.from('archives').select('id').eq('id', item.id).maybeSingle();\r\n            existing = data;\r\n        }\r\n\r\n        if (existing) {\r\n            const { error } = await supabase.from('archives').update({\r\n                type: item.type,\r\n                title: item.title,\r\n                content: contentJson\r\n            }).eq('id', item.id);\r\n            if (error) throw error;\r\n            return { id: item.id };\r\n        } else {\r\n            // Remove 'temp' or 'new-' prefix if it exists to let DB generate UUID\r\n            const { data, error } = await supabase.from('archives').insert({\r\n                user_id: userId,\r\n                type: item.type,\r\n                title: item.title,\r\n                content: contentJson,\r\n                ...(!isNewPlaceholder ? { id: item.id } : {})\r\n            }).select('id').single();\r\n\r\n            if (error) throw error;\r\n            return { id: data.id };\r\n        }\r\n    }\r\n\r\n    async deleteArchive(id: string): Promise<void> {\r\n        const { error } = await supabase.from('archives').delete().eq('id', id);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async seedDefaultArchives(): Promise<void> {\r\n        const userId = await this.getUserId();\r\n\r\n        const checkType = async (type: ArchiveType) => {\r\n            const { data } = await supabase.from('archives').select('id').eq('user_id', userId).eq('type', type).limit(1);\r\n            return data && data.length > 0;\r\n        };\r\n\r\n        const defaults = [\r\n            {\r\n                type: ArchiveType.VISION_5Y,\r\n                title: 'Vision',\r\n                content: { markdown: '# Vision\\n\\nWelcome to your Vision page. This is a single-document view focused on your long-term trajectory. Use this space to map out who you want to become and what you want to achieve.' }\r\n            },\r\n            {\r\n                type: ArchiveType.LIFE_TODO,\r\n                title: 'Life Checklist',\r\n                content: { markdown: '# Life Checklist\\n\\nYour master list of personal projects and to-dos. You can use markdown to organize your life.\\n\\n- [ ] Example task' }\r\n            },\r\n            {\r\n                type: ArchiveType.THEORY_NOTES,\r\n                title: 'Purpose of Theory Notes',\r\n                content: { markdown: 'Reflect on what is preventing results, catch daily frictions/problems, and draft solutions.' }\r\n            },\r\n            {\r\n                type: ArchiveType.ROUTINE,\r\n                title: 'Morning Routine',\r\n                content: { markdown: '# Morning Routine:\\n- [ ] Get sunlight\\n- [ ] Get Water & (Creatine)\\n- [ ] 20 Chin-Tucks\\n- [ ] Take a look to Vision Board / Mantras\\n- [ ] Meditate (5-10mins)' }\r\n            },\r\n            {\r\n                type: ArchiveType.ROUTINE,\r\n                title: 'Night Routine',\r\n                content: { markdown: '# Night Routine:\\n- [ ] **Start at 21:15**\\n    - [ ] Shut everything off â†’ charge devices\\n    - [ ] Red lights\\n    - [ ] Deep Sleep playlist\\n- [ ] Brush teeth + face\\n- [ ] Plan tomorrow\\n- [ ] Journaling\\n\\n**9:45PM - 10PM**\\n- [ ] Read in bed\\n\\n**Finish before 22:30**' }\r\n            }\r\n        ];\r\n\r\n        for (const item of defaults) {\r\n            const exists = await checkType(item.type);\r\n            if (!exists) {\r\n                await supabase.from('archives').insert({\r\n                    user_id: userId,\r\n                    type: item.type,\r\n                    title: item.title,\r\n                    content: item.content\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // -- MISC Helpers --\r\n    // -- HISTORY & ANALYTICS --\r\n\r\n    async getHistoryData(): Promise<{\r\n        dailyScores: { date: string; score: number; details: any[] }[],\r\n        cycles: Cycle[],\r\n        habitStats: Record<string, { currentStreak: number; maxStreak: number }>\r\n    }> {\r\n        const userId = await this.getUserId();\r\n\r\n        // 1. Fetch range\r\n        const today = new Date();\r\n        const ninetyDaysAgo = new Date();\r\n        ninetyDaysAgo.setDate(today.getDate() - 90);\r\n        const startDateStr = ninetyDaysAgo.toISOString().split('T')[0];\r\n\r\n        // 2. Fetch Logs\r\n        const { data: logsData } = await supabase\r\n            .from('habit_logs')\r\n            .select('*')\r\n            .eq('user_id', userId)\r\n            .gte('date', startDateStr);\r\n        const logs = logsData || [];\r\n\r\n        // 3. Fetch Habits (All of them to map names, or just current? History implies past habits too)\r\n        // For accurate score, we need habits active ON THAT DATE. \r\n        // Our current schema links habits to cycles, and cycles have dates.\r\n        // Simplification: We will fetch ALL habits and cycles to reconstruct context.\r\n        const { data: habitsData } = await supabase.from('habits').select('*').eq('user_id', userId);\r\n        const habits = habitsData || [];\r\n\r\n        const { data: cyclesData } = await supabase.from('cycles').select('*').eq('user_id', userId);\r\n        const cycles = cyclesData || [];\r\n\r\n        // 4. Calculate Stats (Streaks)\r\n        const habitStats: Record<string, { currentStreak: number; maxStreak: number }> = {};\r\n        habits.forEach(h => {\r\n            // We pass ALL logs to streak calc, it handles filtering by habit_id\r\n            habitStats[h.id] = this.calculateHabitStreaks(h.id, logs);\r\n        });\r\n\r\n        // 5. Build Daily Scores\r\n        const dailyScores = [];\r\n        const todayStr = this.getLocalDateString();\r\n\r\n        for (let i = 0; i <= 90; i++) {\r\n            const d = new Date(ninetyDaysAgo);\r\n            d.setDate(d.getDate() + i);\r\n            const dateStr = this.getLocalDateString(d);\r\n            if (dateStr > todayStr) break; // Don't go into future\r\n\r\n            // Find active cycle for this date\r\n            const activeCycle = cycles.find(c => c.start_date <= dateStr && c.end_date >= dateStr);\r\n\r\n            // Find habits linked to this cycle\r\n            const daysHabits = activeCycle\r\n                ? habits.filter(h => h.cycle_id === activeCycle.id)\r\n                : [];\r\n\r\n            const dayLogs = logs.filter(l => l.date === dateStr);\r\n\r\n            let score = 0;\r\n            const details: any[] = []; // Explicitly typed as any[] or match interface if possible\r\n\r\n            if (daysHabits.length > 0) {\r\n                score = this.calculateDailyScore(daysHabits, dayLogs);\r\n\r\n                // Populate details for HistoryPage inspector\r\n                daysHabits.forEach(h => {\r\n                    const isDone = dayLogs.some(l => l.habit_id === h.id && l.status);\r\n                    details.push({\r\n                        habit: h,\r\n                        done: isDone\r\n                    });\r\n                });\r\n            }\r\n\r\n            dailyScores.push({\r\n                date: dateStr,\r\n                score,\r\n                details\r\n            });\r\n        }\r\n\r\n        return {\r\n            dailyScores: dailyScores.reverse(), // Newest first usually? Or UI sorts? Dashboard slices -14.\r\n            cycles, // Return all cycles\r\n            habitStats\r\n        };\r\n    }\r\n\r\n    // -- VERSION MANAGEMENT --\r\n    async createVersion(data: { title: string; description: string; number: number; startDate: string }): Promise<Version> {\r\n        const userId = await this.getUserId();\r\n        const profile = await this.getProfile();\r\n\r\n        const defaultDays = profile?.version_days_default || 90;\r\n        const start = new Date(data.startDate);\r\n        const end = new Date(start);\r\n        end.setDate(start.getDate() + defaultDays);\r\n\r\n        const { data: newVersion, error } = await supabase.from('versions').insert({\r\n            user_id: userId,\r\n            number: data.number,\r\n            title: data.title,\r\n            description: data.description,\r\n            status: EntityStatus.ACTIVE,\r\n            start_date: data.startDate,\r\n            end_date: end.toISOString().split('T')[0]\r\n        }).select().single();\r\n\r\n        if (error) throw error;\r\n\r\n        // Update Profile\r\n        await supabase.from('profiles').update({ current_version_id: newVersion.id }).eq('id', userId);\r\n\r\n        return newVersion;\r\n    }\r\n\r\n    // -- GOAL MANAGEMENT --\r\n    async updateGoal(updatedGoal: Goal): Promise<void> {\r\n        const { error } = await supabase.from('goals').update({\r\n            title: updatedGoal.title,\r\n            description: updatedGoal.description,\r\n            type: updatedGoal.type,\r\n            subtasks: updatedGoal.subtasks, // JSONB\r\n            current_streak: updatedGoal.current_streak,\r\n            linked_habit_id: updatedGoal.linked_habit_id // Fix: Was missing, causing goal-habit links to not persist\r\n        }).eq('id', updatedGoal.id);\r\n\r\n        if (error) throw error;\r\n    }\r\n\r\n    // -- MANTRA MANAGEMENT --\r\n    async getMantras(): Promise<string[]> {\r\n        const userId = await this.getUserId();\r\n\r\n        // 1. Get from Cycles\r\n        const { data: cycles } = await supabase.from('cycles').select('mantras').eq('user_id', userId);\r\n        const cycleMantras = new Set<string>();\r\n        cycles?.forEach((c: any) => c.mantras?.forEach((m: string) => cycleMantras.add(m)));\r\n\r\n        // 2. Get from Archives (Mantra Bank)\r\n        const { data: archives } = await supabase\r\n            .from('archives')\r\n            .select('content')\r\n            .eq('user_id', userId)\r\n            .eq('type', ArchiveType.MANTRA_BANK);\r\n\r\n        archives?.forEach(a => {\r\n            // content might be jsonb or string depending on how we saved.\r\n            // Our Schema says content is jsonb, but addMantra saves it. \r\n            // Let's assume content field in archive holds the string in 'markdown' prop or similar if structured, \r\n            // but for Mantras specifically we might just store the string or { text: ... }\r\n            // Wait, previous implem used `content: text` in addMantra.\r\n            // Let's coerce.\r\n            const text = typeof a.content === 'object' && (a.content as any).markdown\r\n                ? (a.content as any).markdown\r\n                : JSON.stringify(a.content); // Fallback\r\n            cycleMantras.add(text);\r\n        });\r\n\r\n        return Array.from(cycleMantras);\r\n    }\r\n\r\n    async addMantra(text: string): Promise<void> {\r\n        const userId = await this.getUserId();\r\n\r\n        await supabase.from('archives').insert({\r\n            user_id: userId,\r\n            type: ArchiveType.MANTRA_BANK,\r\n            title: 'Mantra',\r\n            content: { markdown: text }\r\n        });\r\n    }\r\n\r\n    // -- CYCLE CREATION (Complex Transaction) --\r\n    async createCycle(\r\n        cycleData: Omit<Cycle, 'id' | 'version_id' | 'start_date' | 'end_date' | 'sprint_number'>,\r\n        goalsData: Array<{ title: string; description: string; type: GoalType; subtasks?: string[]; habit?: { name: string; weight: number; category: string } }>,\r\n        standaloneHabits: Array<{ name: string; weight: number; category: string }>\r\n    ): Promise<Cycle> {\r\n        const userId = await this.getUserId();\r\n        const profile = await this.getProfile();\r\n        if (!profile?.current_version_id) throw new Error(\"No active version\");\r\n\r\n        // 1. Calculate Sprint Number\r\n        const { count } = await supabase\r\n            .from('cycles')\r\n            .select('*', { count: 'exact', head: true })\r\n            .eq('version_id', profile.current_version_id);\r\n\r\n        const sprintNum = (count || 0) + 1;\r\n\r\n        // 2. Create Cycle\r\n        const { data: newCycle, error: cycleError } = await supabase.from('cycles').insert({\r\n            user_id: userId,\r\n            version_id: profile.current_version_id,\r\n            sprint_number: sprintNum,\r\n            start_date: new Date().toISOString().split('T')[0], // Default today\r\n            end_date: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n            status: EntityStatus.ACTIVE,\r\n            focus_priorities: cycleData.focus_priorities,\r\n            problems: cycleData.problems,\r\n            cch_list: cycleData.cch_list,\r\n            mantras: cycleData.mantras,\r\n            learning_focus: cycleData.learning_focus\r\n        }).select().single();\r\n\r\n        if (cycleError) throw cycleError;\r\n\r\n        // 3. Create Goals & Linked Habits\r\n        for (const gData of goalsData) {\r\n            // Insert Goal first (without habit link)\r\n            const { data: goal, error: gError } = await supabase.from('goals').insert({\r\n                user_id: userId,\r\n                cycle_id: newCycle.id,\r\n                title: gData.title,\r\n                description: gData.description,\r\n                type: gData.type,\r\n                subtasks: gData.subtasks?.map(name => ({ name, done: false })),\r\n            }).select().single();\r\n\r\n            if (gError) console.error(\"Error creating goal\", gError);\r\n\r\n            if (gData.habit && goal) {\r\n                // Create Linked Habit\r\n                const { data: habit, error: hError } = await supabase.from('habits').insert({\r\n                    user_id: userId,\r\n                    cycle_id: newCycle.id,\r\n                    name: gData.habit.name,\r\n                    weight: gData.habit.weight,\r\n                    category: gData.habit.category,\r\n                    linked_goal_id: goal.id\r\n                }).select().single();\r\n\r\n                // Update Goal with linked_habit_id\r\n                if (habit) {\r\n                    await supabase.from('goals').update({ linked_habit_id: habit.id }).eq('id', goal.id);\r\n                }\r\n            }\r\n        }\r\n\r\n        // 4. Create Standalone Habits\r\n        for (const hData of standaloneHabits) {\r\n            await supabase.from('habits').insert({\r\n                user_id: userId,\r\n                cycle_id: newCycle.id,\r\n                name: hData.name,\r\n                weight: hData.weight,\r\n                category: hData.category\r\n            });\r\n        }\r\n\r\n        // 5. Update Profile\r\n        await supabase.from('profiles').update({ current_cycle_id: newCycle.id }).eq('id', userId);\r\n\r\n        return newCycle;\r\n    }\r\n\r\n    // -- LAB METHODS --\r\n\r\n    async getLabData(): Promise<{ goals: Goal[]; version: Version | null; cycles: Cycle[]; habits: Habit[]; activeCycleId: string | null }> {\r\n        const userId = await this.getUserId();\r\n        const profile = await this.getProfile();\r\n\r\n        // Fetch Versions (to find current)\r\n        const { data: versions } = await supabase.from('versions').select('*').eq('user_id', userId);\r\n        const currentVersion = versions?.find(v => v.id === profile?.current_version_id) || null;\r\n\r\n        // Fetch Cycles\r\n        const { data: cycles } = await supabase.from('cycles').select('*').eq('user_id', userId).order('sprint_number', { ascending: false });\r\n        // Filter cycles for current version if exists\r\n        const versionCycles = currentVersion\r\n            ? (cycles || []).filter(c => c.version_id === currentVersion.id)\r\n            : [];\r\n\r\n        // Fetch ALL Goals and Habits (Lab needs access to database/library)\r\n        const { data: goals } = await supabase.from('goals').select('*').eq('user_id', userId);\r\n        const { data: habits } = await supabase.from('habits').select('*').eq('user_id', userId);\r\n\r\n        return {\r\n            goals: goals || [],\r\n            version: currentVersion,\r\n            cycles: versionCycles,\r\n            habits: habits || [],\r\n            activeCycleId: profile?.current_cycle_id || null\r\n        };\r\n    }\r\n\r\n    async updateCycle(cycle: Cycle): Promise<void> {\r\n        const { error } = await supabase.from('cycles').update({\r\n            start_date: cycle.start_date,\r\n            end_date: cycle.end_date,\r\n            status: cycle.status,\r\n            focus_priorities: cycle.focus_priorities,\r\n            problems: cycle.problems,\r\n            cch_list: cycle.cch_list,\r\n            mantras: cycle.mantras,\r\n            learning_focus: cycle.learning_focus\r\n        }).eq('id', cycle.id);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async deleteCycle(cycleId: string): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        // Constraints: Goals/Habits restricted by foreign key? \r\n        // Our schema might have cascade delete. If not, we do manual cleanup.\r\n        // Assuming CASCADE is ON for Foreign Keys in Schema.\r\n        const { error } = await supabase.from('cycles').delete().eq('id', cycleId);\r\n        if (error) throw error;\r\n\r\n        // Update Profile if active cycle was deleted\r\n        const profile = await this.getProfile();\r\n        if (profile?.current_cycle_id === cycleId) {\r\n            // Pick another or null\r\n            // We just set to null, let UI handle or User pick\r\n            await supabase.from('profiles').update({ current_cycle_id: null }).eq('id', userId);\r\n        }\r\n    }\r\n\r\n    async setCycleActive(cycleId: string): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        await supabase.from('profiles').update({ current_cycle_id: cycleId }).eq('id', userId);\r\n    }\r\n\r\n    // -- GOAL CRUD --\r\n    async addGoal(goal: Goal): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        // Goal ID might be pre-generated by UI or we let DB generate. \r\n        // DB uses uuid_generate_v4() default.\r\n        // If UI sends ID, we use it. `goal.id` from `Lab.tsx` usage is `g-UUID`.\r\n        // We need to respect that ID if we want optimistic UI to match.\r\n        // But our DB calls `gen_random_uuid()`. \r\n        // Either we insert with ID or we let DB decide. \r\n        // Supabase allows inserting ID.\r\n\r\n        const { error } = await supabase.from('goals').insert({\r\n            id: goal.id, // Explicit ID from UI\r\n            user_id: userId,\r\n            cycle_id: goal.cycle_id,\r\n            title: goal.title,\r\n            description: goal.description,\r\n            type: goal.type,\r\n            subtasks: goal.subtasks?.map((s: any) => ({ ...s, name: s.name, done: s.done })), // Sanitation\r\n            linked_habit_id: goal.linked_habit_id,\r\n            current_streak: goal.current_streak\r\n        });\r\n        if (error) throw error;\r\n    }\r\n\r\n    async deleteGoal(goalId: string): Promise<void> {\r\n        const { error } = await supabase.from('goals').delete().eq('id', goalId);\r\n        if (error) throw error;\r\n    }\r\n\r\n    // -- HABIT CRUD --\r\n    async getAllHabits(): Promise<Habit[]> {\r\n        const userId = await this.getUserId();\r\n        const { data } = await supabase.from('habits').select('*').eq('user_id', userId);\r\n        return data || [];\r\n    }\r\n\r\n    async addHabit(habit: Habit): Promise<void> {\r\n        const userId = await this.getUserId();\r\n        const { error } = await supabase.from('habits').insert({\r\n            id: habit.id,\r\n            user_id: userId,\r\n            cycle_id: habit.cycle_id,\r\n            name: habit.name,\r\n            weight: habit.weight,\r\n            category: habit.category,\r\n            linked_goal_id: habit.linked_goal_id\r\n        });\r\n        if (error) throw error;\r\n    }\r\n\r\n    async updateHabit(habit: Habit): Promise<void> {\r\n        const { error } = await supabase.from('habits').update({\r\n            name: habit.name,\r\n            weight: habit.weight,\r\n            category: habit.category,\r\n            linked_goal_id: habit.linked_goal_id\r\n        }).eq('id', habit.id);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async deleteHabit(habitId: string): Promise<void> {\r\n        const { error } = await supabase.from('habits').delete().eq('id', habitId);\r\n        if (error) throw error;\r\n    }\r\n\r\n    // -- DATABASE PAGE HELPERS --\r\n\r\n    async getAllVersions(): Promise<Version[]> {\r\n        const userId = await this.getUserId();\r\n        const { data } = await supabase.from('versions').select('*').eq('user_id', userId).order('start_date', { ascending: false });\r\n        return data || [];\r\n    }\r\n\r\n    async updateVersion(version: Version): Promise<void> {\r\n        const { error } = await supabase.from('versions').update({\r\n            title: version.title,\r\n            description: version.description,\r\n            start_date: version.start_date,\r\n            end_date: version.end_date,\r\n            status: version.status\r\n        }).eq('id', version.id);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async deleteVersion(versionId: string): Promise<void> {\r\n        const { error } = await supabase.from('versions').delete().eq('id', versionId);\r\n        if (error) throw error;\r\n    }\r\n\r\n    async getAllCycles(): Promise<Cycle[]> {\r\n        const userId = await this.getUserId();\r\n        const { data } = await supabase.from('cycles').select('*').eq('user_id', userId).order('sprint_number', { ascending: false });\r\n        return data || [];\r\n    }\r\n\r\n    async getAllGoals(): Promise<Goal[]> {\r\n        const userId = await this.getUserId();\r\n        const { data } = await supabase.from('goals').select('*').eq('user_id', userId);\r\n        return data || [];\r\n    }\r\n\r\n    async signOut(): Promise<void> {\r\n        await supabase.auth.signOut();\r\n    }\r\n}\r\n\r\nexport const supabaseService = new SupabaseService();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1629, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/TempoSettingsModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Timer, AlertTriangle, Save, X } from 'lucide-react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\n\r\ninterface TempoSettingsModalProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const TempoSettingsModal: React.FC<TempoSettingsModalProps> = ({ onClose }) => {\r\n  const [days, setDays] = useState(90);\r\n  const [cycles, setCycles] = useState(6);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      try {\r\n        const settings = await supabaseService.getSystemSettings();\r\n        setDays(settings.days);\r\n        setCycles(settings.cycles);\r\n      } catch (e) {\r\n        console.error(\"Failed to load settings\", e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    await supabaseService.updateSystemSettings(days, cycles);\r\n    setLoading(false);\r\n    onClose();\r\n  };\r\n\r\n  const sprintLength = cycles > 0 ? (days / cycles).toFixed(1) : 0;\r\n  const isCleanDivison = days % cycles === 0;\r\n\r\n  if (loading) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n      <div className=\"w-full max-w-md rounded-2xl bg-white dark:bg-graphite-900 p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"flex justify-between items-start mb-6\">\r\n          <div>\r\n            <h2 className=\"text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n              <div className=\"p-2 bg-pacific-100 dark:bg-pacific-900/20 text-pacific-600 dark:text-pacific-400 rounded-lg\"><Timer size={20} /></div>\r\n              Tempo & Structure\r\n            </h2>\r\n            <p className=\"text-xs text-graphite-500 mt-2\">Define the rhythm of your versions.</p>\r\n          </div>\r\n          <button onClick={onClose} className=\"text-graphite-400 hover:text-white\"><X size={20} /></button>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Total Version Days</label>\r\n            <input\r\n              type=\"number\"\r\n              value={days}\r\n              onChange={(e) => setDays(Number(e.target.value))}\r\n              className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Cycles per Version</label>\r\n            <input\r\n              type=\"number\"\r\n              value={cycles}\r\n              onChange={(e) => setCycles(Number(e.target.value))}\r\n              className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\"\r\n            />\r\n          </div>\r\n\r\n          <div className={`p-4 rounded-xl border ${isCleanDivison ? 'bg-pacific-50 dark:bg-pacific-900/10 border-pacific-200 dark:border-pacific-800' : 'bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-800'}`}>\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <span className=\"text-xs font-bold uppercase text-graphite-500\">Calculated Sprint Length</span>\r\n              <span className={`text-lg font-bold ${isCleanDivison ? 'text-pacific-600 dark:text-pacific-400' : 'text-red-500'}`}>{sprintLength} Days</span>\r\n            </div>\r\n            {!isCleanDivison && (\r\n              <div className=\"flex items-start gap-2 mt-2 text-red-500 text-xs font-medium\">\r\n                <AlertTriangle size={14} className=\"shrink-0 mt-0.5\" />\r\n                Days must be perfectly divisible by cycles to ensure equal sprint lengths.\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-2\">\r\n            <button onClick={onClose} type=\"button\" className=\"rounded-xl px-4 py-2 text-sm font-medium text-graphite-500 hover:text-graphite-800 dark:hover:text-graphite-200 transition-colors\">Cancel</button>\r\n            <button\r\n              onClick={handleSave}\r\n              disabled={!isCleanDivison || days <= 0 || cycles <= 0}\r\n              className=\"rounded-xl bg-pacific-600 px-6 py-2.5 text-sm font-bold text-white hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              <Save size={16} /> Save Settings\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAMO,MAAM,qBAAwD,CAAC,EAAE,OAAO,EAAE;;IAC/E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;wCAAC;YACR,MAAM;8DAAgB;oBACpB,IAAI;wBACF,MAAM,WAAW,MAAM,mJAAe,CAAC,iBAAiB;wBACxD,QAAQ,SAAS,IAAI;wBACrB,UAAU,SAAS,MAAM;oBAC3B,EAAE,OAAO,GAAG;wBACV,QAAQ,KAAK,CAAC,2BAA2B;oBAC3C,SAAU;wBACR,WAAW;oBACb;gBACF;;YACA;QACF;uCAAG,EAAE;IAEL,MAAM,aAAa;QACjB,WAAW;QACX,MAAM,mJAAe,CAAC,oBAAoB,CAAC,MAAM;QACjD,WAAW;QACX;IACF;IAEA,MAAM,eAAe,SAAS,IAAI,CAAC,OAAO,MAAM,EAAE,OAAO,CAAC,KAAK;IAC/D,MAAM,iBAAiB,OAAO,WAAW;IAEzC,IAAI,SAAS,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;QAAgG,SAAS;kBACtH,cAAA,6LAAC;YAAI,WAAU;YAAkK,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAChN,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDAA8F,cAAA,6LAAC,gNAAK;gDAAC,MAAM;;;;;;;;;;;wCAAY;;;;;;;8CAGxI,6LAAC;oCAAE,WAAU;8CAAiC;;;;;;;;;;;;sCAEhD,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAqC,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAGpF,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAA2E;;;;;;8CAC5F,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,OAAO,EAAE,MAAM,CAAC,KAAK;oCAC9C,WAAU;;;;;;;;;;;;sCAGd,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAA2E;;;;;;8CAC5F,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;oCAChD,WAAU;;;;;;;;;;;;sCAId,6LAAC;4BAAI,WAAW,CAAC,sBAAsB,EAAE,iBAAiB,oFAAoF,mEAAmE;;8CAC/M,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;sDAAgD;;;;;;sDAChE,6LAAC;4CAAK,WAAW,CAAC,kBAAkB,EAAE,iBAAiB,2CAA2C,gBAAgB;;gDAAG;gDAAa;;;;;;;;;;;;;gCAEnI,CAAC,gCACA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,4OAAa;4CAAC,MAAM;4CAAI,WAAU;;;;;;wCAAoB;;;;;;;;;;;;;sCAM7D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAO,SAAS;oCAAS,MAAK;oCAAS,WAAU;8CAAoI;;;;;;8CACtL,6LAAC;oCACC,SAAS;oCACT,UAAU,CAAC,kBAAkB,QAAQ,KAAK,UAAU;oCACpD,WAAU;;sDAEV,6LAAC,6MAAI;4CAAC,MAAM;;;;;;wCAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhC;GA7Fa;KAAA"}},
    {"offset": {"line": 1925, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/AccountSettingsModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { X, LogOut, Pencil, Loader2 } from 'lucide-react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Profile } from '@/types/types';\r\n\r\ninterface AccountSettingsModalProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const AccountSettingsModal: React.FC<AccountSettingsModalProps> = ({ onClose }) => {\r\n  const [profile, setProfile] = useState<Profile | null>(null);\r\n  const [userData, setUserData] = useState<{ name?: string, email?: string, googleAvatar?: string } | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      if (session?.user) {\r\n        setUserData({\r\n          name: session.user.user_metadata?.full_name,\r\n          email: session.user.email,\r\n          googleAvatar: session.user.user_metadata?.avatar_url || session.user.user_metadata?.picture\r\n        });\r\n        const p = await supabaseService.getProfile();\r\n        setProfile(p);\r\n      }\r\n    };\r\n    fetchUserData();\r\n  }, []);\r\n\r\n  const handleSignOut = async () => {\r\n    await supabase.auth.signOut();\r\n    window.location.href = '/';\r\n  };\r\n\r\n  const handleAvatarClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      setUploading(true);\r\n      const publicUrl = await supabaseService.uploadAvatar(file);\r\n      await supabaseService.updateProfile({ avatar_url: publicUrl });\r\n\r\n      // Update local state\r\n      setProfile((prev: Profile | null) => prev ? { ...prev, avatar_url: publicUrl } : null);\r\n    } catch (error) {\r\n      console.error('Error uploading avatar:', error);\r\n      alert('Failed to upload avatar. Please try again.');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const currentAvatar = profile?.avatar_url || userData?.googleAvatar || `https://ui-avatars.com/api/?name=${userData?.name || 'User'}&background=0ea5e9&color=fff`;\r\n\r\n  const handleImageError = (e: React.SyntheticEvent<HTMLImageElement, Event>) => {\r\n    const fallback = `https://ui-avatars.com/api/?name=${userData?.name || 'User'}&background=0ea5e9&color=fff`;\r\n    if (e.currentTarget.src !== fallback) {\r\n      e.currentTarget.src = fallback;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n      <div className=\"w-full max-w-sm rounded-[2rem] bg-white dark:bg-graphite-900 shadow-2xl animate-in zoom-in-95 duration-300 border border-graphite-200 dark:border-graphite-800 p-8 pt-10\" onClick={(e) => e.stopPropagation()}>\r\n\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"image/*\"\r\n          onChange={handleFileChange}\r\n        />\r\n\r\n        <div className=\"flex justify-between items-start mb-10\">\r\n          <div>\r\n            <h2 className=\"text-xl font-display font-black text-graphite-900 dark:text-white\">\r\n              Account Settings\r\n            </h2>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 text-graphite-400 hover:bg-graphite-100 dark:hover:bg-white/5 rounded-full transition-colors\">\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center mb-10 gap-6\">\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h3 className=\"text-xl font-display font-bold text-graphite-900 dark:text-white tracking-tight truncate\">\r\n              {userData?.name || 'Authorized User'}\r\n            </h3>\r\n            <p className=\"text-xs font-medium text-graphite-500 dark:text-graphite-400 font-mono mt-1 truncate\">\r\n              {userData?.email}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"relative group cursor-pointer shrink-0\" onClick={handleAvatarClick}>\r\n            <div className=\"absolute inset-0 bg-pacific-500/20 blur-xl rounded-full opacity-50 group-hover:opacity-100 transition-opacity\"></div>\r\n\r\n            <div className=\"relative z-10\">\r\n              <img\r\n                src={currentAvatar}\r\n                className=\"w-16 h-16 rounded-full border-2 border-pacific-500/30 object-cover shadow-2xl transition-all duration-500 group-hover:brightness-75\"\r\n                alt=\"\"\r\n                onError={handleImageError}\r\n              />\r\n\r\n              {/* Pencil Overlay */}\r\n              <div className=\"absolute top-0 right-0 p-1 bg-white dark:bg-graphite-800 rounded-full shadow-lg border border-graphite-100 dark:border-graphite-700 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-50 group-hover:scale-100 translate-x-1/4 -translate-y-1/4\">\r\n                <Pencil size={10} className=\"text-pacific-500\" />\r\n              </div>\r\n\r\n              {/* Uploading Overlay */}\r\n              {uploading && (\r\n                <div className=\"absolute inset-0 z-20 flex items-center justify-center bg-black/40 rounded-full backdrop-blur-[2px]\">\r\n                  <Loader2 size={16} className=\"text-white animate-spin\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          <button\r\n            onClick={handleSignOut}\r\n            className=\"w-full flex items-center justify-center gap-3 py-4 rounded-2xl bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-600 border border-red-100 dark:border-red-900/20 font-bold text-sm transition-all duration-300 group\"\r\n          >\r\n            <LogOut size={18} className=\"transition-transform group-hover:-translate-x-1\" />\r\n            Log Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/Layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  LayoutDashboard,\n  Target,\n  TrendingUp,\n  Library,\n  Film,\n  Settings,\n  Moon,\n  Sun,\n  Database,\n  ChevronLeft,\n  PanelLeft,\n  Timer,\n  User\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useTheme } from '@/contexts/ThemeContext';\nimport { TempoSettingsModal } from './TempoSettingsModal';\nimport { AccountSettingsModal } from './AccountSettingsModal';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nconst NavItem: React.FC<{\n  icon: React.ReactNode;\n  label: string;\n  href: string;\n  active: boolean;\n  collapsed: boolean;\n}> = ({ icon, label, href, active, collapsed }) => (\n  <Link\n    href={href}\n    title={collapsed ? label : undefined}\n    className={`group flex items-center rounded-xl py-3 text-sm font-semibold transition-all duration-300 border border-transparent relative overflow-hidden ${active\n      ? 'bg-graphite-100 dark:bg-white/5 text-pacific-700 dark:text-pacific-400 border-pacific-200/50 dark:border-pacific-500/10'\n      : 'text-graphite-500 hover:bg-graphite-50 hover:text-graphite-900 dark:text-graphite-400 dark:hover:bg-white/5 dark:hover:text-graphite-200'\n      } ${collapsed ? 'w-full justify-center px-2 gap-0' : 'w-full px-4 gap-3'}`}\n  >\n    {active && <div className={`absolute top-0 bottom-0 w-1 bg-pacific-500 rounded-r-full transition-all duration-300 ${collapsed ? 'left-0 h-full rounded-none' : 'left-0'}`}></div>}\n    <span className={`${active ? 'text-pacific-600 dark:text-pacific-400' : 'text-graphite-400 group-hover:text-pacific-500 dark:group-hover:text-pacific-400 transition-colors'}`}>\n      {icon}\n    </span>\n    <span className={`whitespace-nowrap transition-all duration-300 ${collapsed ? 'w-0 opacity-0 overflow-hidden' : 'w-auto opacity-100'}`}>\n      {label}\n    </span>\n  </Link>\n);\n\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [showTempoModal, setShowTempoModal] = useState(false);\n  const [showAccountModal, setShowAccountModal] = useState(false);\n  const settingsRef = useRef<HTMLDivElement>(null);\n  const { theme, toggleTheme } = useTheme();\n\n  const pathname = usePathname();\n  const activePage = pathname.split('/').pop() || 'dashboard';\n\n  // Sidebar State\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (settingsRef.current && !settingsRef.current.contains(event.target as Node)) {\n        setIsSettingsOpen(false);\n      }\n    }\n    if (isSettingsOpen) document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isSettingsOpen]);\n\n  const toggleSidebar = () => setIsCollapsed(!isCollapsed);\n\n  return (\n    <div className=\"flex h-screen w-full overflow-hidden bg-background text-graphite-900 dark:text-graphite-50 font-sans transition-colors duration-500 flex-row\">\n\n      {/* Sidebar - Rich Graphite */}\n      <aside className={`${isCollapsed ? 'w-[80px] px-3' : 'w-[280px] px-6'} flex-shrink-0 border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-900 py-6 flex flex-col relative z-20 transition-all duration-300 ease-in-out border-r`}>\n\n        {/* LOGO REDESIGN */}\n        <div className={`mb-10 transition-all duration-300 ${isCollapsed ? 'flex justify-center mt-6' : 'pl-6 mt-8'}`}>\n          {!isCollapsed ? (\n            <div className=\"group flex items-center justify-start select-none cursor-pointer\">\n              {/* P */}\n              <span className=\"font-display text-3xl font-black tracking-tighter text-graphite-900 dark:text-white leading-none mr-[2px]\">P</span>\n\n              {/* THE PORTAL \"O\" */}\n              <div className=\"relative h-7 w-7 mx-[1px] flex-shrink-0 flex items-center justify-center transition-transform duration-500 group-hover:rotate-180\">\n                {/* Ambient Glow */}\n                <div className=\"absolute inset-[-6px] bg-pacific-500/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\n\n                {/* Outer Ring - Pacific */}\n                <div className=\"absolute inset-0 rounded-full border-[3px] border-transparent border-t-pacific-500 border-l-pacific-400 animate-[spin_3s_linear_infinite]\" style={{ boxShadow: '0 0 10px rgba(14, 165, 233, 0.1)' }}></div>\n\n                {/* Inner Ring - Bali */}\n                <div className=\"absolute inset-[3px] rounded-full border-[2.5px] border-transparent border-b-bali-500 border-r-bali-400 animate-[spin_2s_linear_infinite_reverse]\"></div>\n\n                {/* Center Singularity */}\n                <div className=\"absolute h-1.5 w-1.5 bg-graphite-900 dark:bg-white rounded-full shadow-[0_0_8px_currentColor] animate-pulse\"></div>\n              </div>\n\n              {/* RTAL */}\n              <span className=\"font-display text-3xl font-black tracking-tighter text-graphite-900 dark:text-white leading-none ml-[2px]\">RTAL</span>\n            </div>\n          ) : (\n            /* Collapsed Icon - Just the Portal */\n            <div className=\"relative h-10 w-10 flex items-center justify-center group cursor-pointer\">\n              <div className=\"absolute inset-0 bg-pacific-500/20 blur-lg rounded-full opacity-50 group-hover:opacity-100 transition-opacity\"></div>\n              <div className=\"absolute inset-0 border-[3px] border-pacific-500 border-t-transparent border-l-transparent rounded-full animate-[spin_3s_linear_infinite]\"></div>\n              <div className=\"absolute inset-[5px] border-[2.5px] border-bali-500 border-b-transparent border-r-transparent rounded-full animate-[spin_2s_linear_infinite_reverse]\"></div>\n              <div className=\"absolute h-2 w-2 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)]\"></div>\n            </div>\n          )}\n        </div>\n\n        <nav className=\"space-y-1.5 flex-1\">\n          <NavItem collapsed={isCollapsed} icon={<LayoutDashboard size={20} />} label=\"Dashboard\" active={activePage === 'dashboard'} href=\"/dashboard\" />\n          <NavItem collapsed={isCollapsed} icon={<Target size={20} />} label=\"The Lab\" active={activePage === 'lab'} href=\"/lab\" />\n          <NavItem collapsed={isCollapsed} icon={<TrendingUp size={20} />} label=\"History\" active={activePage === 'history'} href=\"/history\" />\n          <NavItem collapsed={isCollapsed} icon={<Library size={20} />} label=\"Archives\" active={activePage === 'archives'} href=\"/archives\" />\n          <NavItem collapsed={isCollapsed} icon={<Film size={20} />} label=\"Cinema\" active={activePage === 'cinema'} href=\"/cinema\" />\n          <NavItem collapsed={isCollapsed} icon={<Database size={20} />} label=\"Database\" active={activePage === 'database'} href=\"/database\" />\n        </nav>\n\n        <div className=\"border-t border-graphite-200 dark:border-graphite-800 pt-6 space-y-2\">\n          {/* Sidebar Controls */}\n          <div className={`flex items-center mb-2 ${isCollapsed ? 'justify-center' : 'justify-end px-2'}`}>\n            <button\n              onClick={toggleSidebar}\n              className=\"p-2 text-graphite-400 hover:text-graphite-900 dark:hover:text-white transition-colors rounded-lg hover:bg-graphite-50 dark:hover:bg-white/5\"\n              title={isCollapsed ? \"Expand\" : \"Collapse\"}\n            >\n              {isCollapsed ? <PanelLeft size={18} /> : <ChevronLeft size={18} />}\n            </button>\n          </div>\n\n          <div className=\"relative\" ref={settingsRef}>\n            {isSettingsOpen && (\n              <div className={`absolute bottom-full mb-3 rounded-2xl border border-graphite-200 dark:border-graphite-700 bg-white dark:bg-graphite-800 shadow-2xl p-2 animate-in slide-in-from-bottom-2 fade-in zoom-in-95 z-50 ${isCollapsed ? 'left-full ml-2 w-48' : 'left-0 right-0'}`}>\n\n                {/* Tempo Settings */}\n                <button\n                  onClick={() => { setShowTempoModal(true); setIsSettingsOpen(false); }}\n                  className=\"flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium text-graphite-600 dark:text-graphite-300 hover:bg-graphite-50 dark:hover:bg-graphite-700/50 transition-colors mb-1\"\n                >\n                  <Timer size={16} className=\"text-pacific-500\" />\n                  Tempo & Structure\n                </button>\n\n                {/* Theme Toggle */}\n                <button\n                  onClick={toggleTheme}\n                  className=\"flex w-full items-center justify-between rounded-xl px-3 py-2.5 text-sm font-medium text-graphite-600 dark:text-graphite-300 hover:bg-graphite-50 dark:hover:bg-graphite-700/50 transition-colors mb-1\"\n                >\n                  <span className=\"flex items-center gap-2\">\n                    {theme === 'dark' ? <Moon size={16} className=\"text-pacific-400\" /> : <Sun size={16} className=\"text-bali-500\" />}\n                    Theme\n                  </span>\n                  <span className=\"text-xs font-bold uppercase text-graphite-400\">{theme}</span>\n                </button>\n\n                {/* Account Settings - At the bottom of dropdown */}\n                <button\n                  onClick={() => { setShowAccountModal(true); setIsSettingsOpen(false); }}\n                  className=\"flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium text-graphite-600 dark:text-graphite-300 hover:bg-graphite-50 dark:hover:bg-graphite-700/50 transition-colors\"\n                >\n                  <User size={16} className=\"text-pacific-500\" />\n                  Account Settings\n                </button>\n              </div>\n            )}\n\n            <button\n              onClick={() => setIsSettingsOpen(!isSettingsOpen)}\n              className={`flex items-center rounded-xl py-3 text-sm font-semibold text-graphite-500 hover:bg-graphite-50 hover:text-graphite-900 dark:text-graphite-400 dark:hover:bg-white/5 dark:hover:text-graphite-200 transition-all ${isCollapsed ? 'w-full justify-center px-0 gap-0' : 'w-full px-4 gap-3'}`}\n              title=\"Settings\"\n            >\n              <Settings size={20} className={`transition-transform duration-500 ${isSettingsOpen ? 'rotate-90 text-pacific-500' : 'group-hover:rotate-45'}`} />\n              <span className={`whitespace-nowrap transition-all duration-300 ${isCollapsed ? 'w-0 opacity-0 overflow-hidden' : 'w-auto opacity-100'}`}>\n                Settings\n              </span>\n            </button>\n          </div>\n        </div>\n      </aside>\n\n      {/* Main Content Area */}\n      <main className=\"flex-1 overflow-y-auto bg-graphite-50 dark:bg-graphite-950 p-6 lg:p-10 relative\">\n        <div className=\"mx-auto max-w-7xl h-full\">\n          {children}\n        </div>\n      </main>\n\n      {showTempoModal && <TempoSettingsModal onClose={() => setShowTempoModal(false)} />}\n      {showAccountModal && <AccountSettingsModal onClose={() => setShowAccountModal(false)} />}\n    </div>\n  );\n};\n\nexport default Layout;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2760, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport PortalEntry from '@/components/PortalEntry';\r\nimport Layout from '@/components/Layout';\r\n\r\nexport default function PortalLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const [hasEntered, setHasEntered] = useState(false);\r\n    const [session, setSession] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const checkSession = async () => {\r\n            const { data: { session: activeSession } } = await supabase.auth.getSession();\r\n            setSession(activeSession);\r\n            setLoading(false);\r\n        };\r\n\r\n        checkSession();\r\n\r\n        const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\r\n            setSession(session);\r\n        });\r\n\r\n        return () => subscription.unsubscribe();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div className=\"h-screen w-full bg-background flex items-center justify-center\">\r\n            <div className=\"animate-pulse text-pacific-500 font-mono text-sm uppercase tracking-widest\">Initializing...</div>\r\n        </div>;\r\n    }\r\n\r\n    // If not logged in, PortalEntry will handle the login UI.\r\n    // We don't render children yet to prevent unauthorized data fetching attempts.\r\n    if (!session) {\r\n        return <PortalEntry onEnter={() => { }} />; // PortalEntry shows login UI when no session\r\n    }\r\n\r\n    // If logged in but hasn't finished the animation\r\n    return (\r\n        <div className=\"relative h-screen w-full overflow-hidden\">\r\n            {/* \r\n        PRE-LOADING STRATEGY: \r\n        Children are rendered immediately so they can start fetching data.\r\n        PortalEntry is rendered OVER them (z-index 50) and handles the split-door animation.\r\n      */}\r\n            <Layout>\r\n                {children}\r\n            </Layout>\r\n\r\n            {!hasEntered && (\r\n                <PortalEntry onEnter={() => setHasEntered(true)} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS,aAAa,EACjC,QAAQ,EAGX;;IACG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;kCAAC;YACN,MAAM;uDAAe;oBACjB,MAAM,EAAE,MAAM,EAAE,SAAS,aAAa,EAAE,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,UAAU;oBAC3E,WAAW;oBACX,WAAW;gBACf;;YAEA;YAEA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,qIAAQ,CAAC,IAAI,CAAC,iBAAiB;0CAAC,CAAC,QAAQ;oBACxE,WAAW;gBACf;;YAEA;0CAAO,IAAM,aAAa,WAAW;;QACzC;iCAAG,EAAE;IAEL,IAAI,SAAS;QACT,qBAAO,6LAAC;YAAI,WAAU;sBAClB,cAAA,6LAAC;gBAAI,WAAU;0BAA6E;;;;;;;;;;;IAEpG;IAEA,0DAA0D;IAC1D,+EAA+E;IAC/E,IAAI,CAAC,SAAS;QACV,qBAAO,6LAAC,+IAAW;YAAC,SAAS,KAAQ;;;;;kBAAO,6CAA6C;IAC7F;IAEA,iDAAiD;IACjD,qBACI,6LAAC;QAAI,WAAU;;0BAMX,6LAAC,0IAAM;0BACF;;;;;;YAGJ,CAAC,4BACE,6LAAC,+IAAW;gBAAC,SAAS,IAAM,cAAc;;;;;;;;;;;;AAI1D;GAtDwB;KAAA"}}]
}