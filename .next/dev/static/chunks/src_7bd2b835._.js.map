{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/CustomDatePicker.tsx"],"sourcesContent":["\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Calendar, ChevronLeft, ChevronRight, X, Clock } from 'lucide-react';\n\ninterface CustomDatePickerProps {\n  label: string;\n  value: string;\n  onChange: (date: string) => void;\n}\n\nexport const CustomDatePicker: React.FC<CustomDatePickerProps> = ({ label, value, onChange }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  // Default to today if no value, otherwise parse the YYYY-MM-DD string\n  const [viewDate, setViewDate] = useState(() => {\n      if (value) {\n          // Parse \"YYYY-MM-DD\" explicitly to avoid timezone shifts\n          const parts = value.split('-').map(Number);\n          if (parts.length === 3 && !isNaN(parts[0])) {\n             return new Date(parts[0], parts[1] - 1, parts[2]);\n          }\n      }\n      return new Date();\n  });\n  \n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Sync view if value changes externally, but only if widely different to allow browsing\n  useEffect(() => {\n      if (value) {\n          const parts = value.split('-').map(Number);\n          const date = new Date(parts[0], parts[1] - 1, parts[2]);\n          if (!isNaN(date.getTime())) {\n              if (date.getMonth() !== viewDate.getMonth() || date.getFullYear() !== viewDate.getFullYear()) {\n                 setViewDate(date);\n              }\n          }\n      }\n  }, [value]);\n\n  const formatDate = (dateStr: string) => {\n    if (!dateStr) return 'Select Date';\n    const parts = dateStr.split('-').map(Number);\n    const date = new Date(parts[0], parts[1] - 1, parts[2]);\n    if (isNaN(date.getTime())) return 'Select Date';\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  const changeMonth = (offset: number) => {\n    const newDate = new Date(viewDate);\n    newDate.setMonth(newDate.getMonth() + offset);\n    setViewDate(newDate);\n  };\n\n  const handleDayClick = (day: number, type: 'prev' | 'current' | 'next') => {\n    const year = viewDate.getFullYear();\n    const month = viewDate.getMonth();\n    \n    let targetDate: Date;\n    if (type === 'prev') {\n        targetDate = new Date(year, month - 1, day);\n    } else if (type === 'next') {\n        targetDate = new Date(year, month + 1, day);\n    } else {\n        targetDate = new Date(year, month, day);\n    }\n\n    // Format to YYYY-MM-DD manually\n    const y = targetDate.getFullYear();\n    const m = String(targetDate.getMonth() + 1).padStart(2, '0');\n    const d = String(targetDate.getDate()).padStart(2, '0');\n    \n    onChange(`${y}-${m}-${d}`);\n    setIsOpen(false);\n    setViewDate(targetDate);\n  };\n\n  const handleToday = () => {\n      const today = new Date();\n      const y = today.getFullYear();\n      const m = String(today.getMonth() + 1).padStart(2, '0');\n      const d = String(today.getDate()).padStart(2, '0');\n      onChange(`${y}-${m}-${d}`);\n      setViewDate(today);\n      setIsOpen(false);\n  };\n\n  const handleClear = () => {\n      onChange('');\n      setIsOpen(false);\n  };\n\n  // Grid Generation Logic\n  const generateGrid = () => {\n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      \n      const firstDayOfMonth = new Date(year, month, 1).getDay(); // 0-6\n      const daysInMonth = new Date(year, month + 1, 0).getDate();\n      const daysInPrevMonth = new Date(year, month, 0).getDate();\n      \n      const days = [];\n      \n      // Prev Month Padding\n      for (let i = firstDayOfMonth - 1; i >= 0; i--) {\n          days.push({ day: daysInPrevMonth - i, type: 'prev' as const });\n      }\n      \n      // Current Month\n      for (let i = 1; i <= daysInMonth; i++) {\n          days.push({ day: i, type: 'current' as const });\n      }\n      \n      // Next Month Padding (Fill to 42 cells for 6 rows)\n      const remaining = 42 - days.length;\n      for (let i = 1; i <= remaining; i++) {\n          days.push({ day: i, type: 'next' as const });\n      }\n      \n      return days;\n  };\n\n  const grid = generateGrid();\n  const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  \n  const isSelected = (day: number, type: string) => {\n      if (!value) return false;\n      const parts = value.split('-').map(Number);\n      const selected = new Date(parts[0], parts[1] - 1, parts[2]);\n      if (isNaN(selected.getTime())) return false;\n      \n      // Calculate the actual date of the cell\n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      let checkDate: Date;\n      \n      if (type === 'prev') checkDate = new Date(year, month - 1, day);\n      else if (type === 'next') checkDate = new Date(year, month + 1, day);\n      else checkDate = new Date(year, month, day);\n\n      return checkDate.getTime() === selected.getTime();\n  };\n\n  const isToday = (day: number, type: string) => {\n      const today = new Date();\n      // Normalize today\n      today.setHours(0,0,0,0);\n      \n      const year = viewDate.getFullYear();\n      const month = viewDate.getMonth();\n      let checkDate: Date;\n      \n      if (type === 'prev') checkDate = new Date(year, month - 1, day);\n      else if (type === 'next') checkDate = new Date(year, month + 1, day);\n      else checkDate = new Date(year, month, day);\n\n      return checkDate.getTime() === today.getTime();\n  };\n\n  return (\n    <div className=\"relative\" ref={containerRef}>\n      <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">{label}</label>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        className={`w-full flex items-center justify-between rounded-xl bg-graphite-50 dark:bg-graphite-800 border p-3 text-sm transition-all\n          ${isOpen ? 'border-pacific-500 ring-2 ring-pacific-500/20' : 'border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50'}\n          ${value ? 'text-graphite-900 dark:text-white' : 'text-graphite-400'}\n        `}\n      >\n        <span className=\"font-medium\">{formatDate(value)}</span>\n        <Calendar size={16} className=\"text-pacific-500\" />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-2 w-full min-w-[300px] bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-700 rounded-xl shadow-2xl z-50 p-4 animate-in fade-in zoom-in-95 duration-200\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <button type=\"button\" onClick={() => changeMonth(-1)} className=\"p-1 hover:bg-graphite-100 dark:hover:bg-graphite-800 rounded-lg text-graphite-500 dark:text-graphite-400 transition-colors\">\n              <ChevronLeft size={20} />\n            </button>\n            <span className=\"text-sm font-bold text-graphite-900 dark:text-white\">\n              {monthNames[viewDate.getMonth()]} {viewDate.getFullYear()}\n            </span>\n            <button type=\"button\" onClick={() => changeMonth(1)} className=\"p-1 hover:bg-graphite-100 dark:hover:bg-graphite-800 rounded-lg text-graphite-500 dark:text-graphite-400 transition-colors\">\n              <ChevronRight size={20} />\n            </button>\n          </div>\n\n          {/* Weekdays */}\n          <div className=\"grid grid-cols-7 gap-1 mb-2\">\n            {['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'].map(d => (\n              <div key={d} className=\"text-center text-[10px] font-bold text-graphite-400 uppercase\">\n                {d}\n              </div>\n            ))}\n          </div>\n\n          {/* Days Grid */}\n          <div className=\"grid grid-cols-7 gap-1\">\n            {grid.map((cell, i) => (\n              <button\n                key={i}\n                type=\"button\"\n                onClick={() => handleDayClick(cell.day, cell.type)}\n                className={`\n                  aspect-square flex items-center justify-center rounded-lg text-sm font-medium transition-all\n                  ${isSelected(cell.day, cell.type) \n                    ? 'bg-pacific-500 text-white shadow-lg shadow-pacific-500/30' \n                    : isToday(cell.day, cell.type)\n                        ? 'text-pacific-500 font-bold bg-pacific-50 dark:bg-pacific-900/10 hover:bg-pacific-100 dark:hover:bg-pacific-900/30'\n                        : cell.type === 'current'\n                            ? 'text-graphite-700 dark:text-graphite-300 hover:bg-graphite-100 dark:hover:bg-graphite-800'\n                            : 'text-graphite-400/30 dark:text-graphite-600/30 hover:bg-graphite-50 dark:hover:bg-graphite-800/50'\n                  }\n                `}\n              >\n                {cell.day}\n              </button>\n            ))}\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"mt-3 pt-3 border-t border-graphite-100 dark:border-graphite-800 flex items-center justify-between px-1\">\n             <button\n               type=\"button\"\n               onClick={handleClear}\n               className=\"flex items-center gap-1.5 text-xs font-bold text-graphite-400 hover:text-red-500 transition-colors\"\n             >\n               <X size={14} /> Clear\n             </button>\n             <button\n               type=\"button\"\n               onClick={handleToday}\n               className=\"flex items-center gap-1.5 text-xs font-bold text-pacific-600 dark:text-pacific-400 hover:text-pacific-500 transition-colors\"\n             >\n               <Clock size={14} /> Today\n             </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["CustomDatePicker","label","value","onChange","isOpen","setIsOpen","viewDate","setViewDate","parts","split","map","Number","length","isNaN","Date","containerRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","date","getTime","getMonth","getFullYear","formatDate","dateStr","toLocaleDateString","month","day","year","changeMonth","offset","newDate","setMonth","handleDayClick","type","targetDate","y","m","String","padStart","d","getDate","handleToday","today","handleClear","generateGrid","firstDayOfMonth","getDay","daysInMonth","daysInPrevMonth","days","i","push","remaining","grid","monthNames","isSelected","selected","checkDate","isToday","setHours","className","ref","onClick","size","cell"],"mappings":"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"}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/NewVersionModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Layers, Calendar } from 'lucide-react';\r\n\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { CustomDatePicker } from './CustomDatePicker';\r\n\r\ninterface NewVersionModalProps {\r\n  onClose: () => void;\r\n  onCreate: (data: { title: string; description: string; number: number; startDate: string }) => void;\r\n  suggestedNumber: number;\r\n}\r\n\r\nexport const NewVersionModal: React.FC<NewVersionModalProps> = ({ onClose, onCreate, suggestedNumber }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [number, setNumber] = useState(suggestedNumber);\r\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [versionDays, setVersionDays] = useState(90); // Default, will fetch\r\n  const [calculatedEndDate, setCalculatedEndDate] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Fetch system settings\r\n    supabaseService.getSystemSettings().then(settings => {\r\n      setVersionDays(settings.days);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Auto-calculate end date\r\n    if (!startDate) {\r\n      setCalculatedEndDate('-');\r\n      return;\r\n    }\r\n    const start = new Date(startDate);\r\n    if (isNaN(start.getTime())) {\r\n      setCalculatedEndDate('-');\r\n      return;\r\n    }\r\n    const end = new Date(start);\r\n    end.setDate(start.getDate() + versionDays);\r\n    setCalculatedEndDate(end.toLocaleDateString(undefined, { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }));\r\n  }, [startDate, versionDays]);\r\n\r\n  const handleSubmit = () => {\r\n    onCreate({ title, description, number, startDate });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-graphite-950/80 backdrop-blur-sm p-4\" onClick={onClose}>\r\n      <div className=\"w-full max-w-lg rounded-2xl bg-white dark:bg-graphite-900 p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-graphite-200 dark:border-graphite-800\" onClick={(e) => e.stopPropagation()}>\r\n        <h2 className=\"mb-6 text-xl font-bold text-graphite-900 dark:text-white flex items-center gap-2\">\r\n          <div className=\"p-2 bg-pacific-100 text-pacific-600 rounded-lg\"><Layers size={20} /></div>\r\n          Initialize New Version\r\n        </h2>\r\n        <div className=\"space-y-5\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Version ID</label>\r\n              <input type=\"number\" value={number} onChange={(e) => setNumber(Number(e.target.value))} className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\" />\r\n            </div>\r\n            <div>\r\n              <CustomDatePicker\r\n                label=\"Start Date\"\r\n                value={startDate}\r\n                onChange={setStartDate}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Read-only calculation feedback */}\r\n          <div className=\"p-3 bg-graphite-50 dark:bg-graphite-800/50 rounded-xl border border-graphite-200 dark:border-graphite-700 flex items-center gap-3\">\r\n            <Calendar size={16} className=\"text-pacific-500\" />\r\n            <div className=\"text-xs\">\r\n              <span className=\"text-graphite-500 uppercase font-bold tracking-wider\">Projected End: </span>\r\n              <span className=\"text-graphite-900 dark:text-white font-mono\">{calculatedEndDate}</span>\r\n              <span className=\"block text-[10px] text-graphite-400 mt-0.5\">Based on system tempo of {versionDays} days.</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Identity Title</label>\r\n            <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} placeholder=\"e.g., The Architect\" className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1.5 block text-xs font-bold text-graphite-500 uppercase tracking-wide\">Persona Definition</label>\r\n            <textarea value={description} onChange={(e) => setDescription(e.target.value)} placeholder=\"Define the archetype...\" rows={3} className=\"w-full rounded-xl bg-graphite-50 dark:bg-graphite-800 border border-graphite-200 dark:border-graphite-700 p-3 text-graphite-900 dark:text-white focus:border-pacific-500 focus:ring-2 focus:ring-pacific-500/20 focus:outline-none transition-all resize-none\" />\r\n          </div>\r\n          <div className=\"flex justify-end gap-3 pt-6\">\r\n            <button onClick={onClose} type=\"button\" className=\"rounded-xl px-4 py-2 text-sm font-medium text-graphite-500 hover:text-graphite-800 dark:hover:text-graphite-200 transition-colors\">Cancel</button>\r\n            <button onClick={handleSubmit} type=\"button\" className=\"rounded-xl bg-pacific-600 px-6 py-2.5 text-sm font-bold text-white hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/30\">Initialize Version</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["NewVersionModal","onClose","onCreate","suggestedNumber","title","setTitle","description","setDescription","number","setNumber","startDate","setStartDate","Date","toISOString","split","versionDays","setVersionDays","calculatedEndDate","setCalculatedEndDate","getSystemSettings","then","settings","days","start","isNaN","getTime","end","setDate","getDate","toLocaleDateString","undefined","weekday","year","month","day","handleSubmit","className","onClick","e","stopPropagation","size","type","value","onChange","Number","target","label","placeholder","rows"],"mappings":"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"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/PerformanceChart.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\ninterface PerformanceChartProps {\r\n    data: Array<{\r\n        date: string;\r\n        score: number;\r\n        details?: Array<{ habit: { name: string }; done: boolean }>;\r\n        [key: string]: any\r\n    }>;\r\n    className?: string;\r\n    showGrid?: boolean;\r\n    color?: string;\r\n    onDataSelect?: (data: any) => void;\r\n}\r\n\r\nconst CustomTooltip = ({ active, payload, label }: any) => {\r\n    if (active && payload && payload.length) {\r\n        const data = payload[0].payload;\r\n        const completedHabits = data.details?.filter((d: any) => d.done) || [];\r\n\r\n        return (\r\n            <div className=\"bg-graphite-900/90 backdrop-blur-md border border-white/10 p-3 rounded-xl shadow-2xl min-w-[150px] animate-in fade-in zoom-in-95 duration-200\">\r\n                <div className=\"flex justify-between items-start mb-2 border-b border-white/10 pb-2\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-graphite-400 font-bold uppercase tracking-wider\">\r\n                            {new Date(label).toLocaleDateString('en-US', { month: 'short', day: 'numeric', weekday: 'short' })}\r\n                        </p>\r\n                        <p className=\"text-xl font-bold text-white flex items-center gap-1 leading-none mt-1\">\r\n                            {payload[0].value}%\r\n                        </p>\r\n                    </div>\r\n                    <div className={`w-2 h-2 rounded-full mt-1 ${payload[0].value >= 80 ? 'bg-bali-500' : 'bg-pacific-500'}`}></div>\r\n                </div>\r\n\r\n                <div className=\"space-y-1.5\">\r\n                    {completedHabits.length > 0 ? (\r\n                        <>\r\n                            {completedHabits.slice(0, 4).map((detail: any, i: number) => (\r\n                                <div key={i} className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-1 h-1 rounded-full bg-white/50 shrink-0\"></div>\r\n                                    <span className=\"text-[9px] text-graphite-300 font-medium truncate max-w-[120px]\">\r\n                                        {detail.habit.name}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                            {completedHabits.length > 4 && (\r\n                                <p className=\"text-[9px] text-graphite-500 pl-3 italic\">\r\n                                    + {completedHabits.length - 4} more\r\n                                </p>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <p className=\"text-[9px] text-graphite-500 italic\">No habits recorded.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\n// Custom X-axis tick formatter\r\nconst formatXAxisLabel = (dateStr: string) => {\r\n    if (!dateStr) return '';\r\n    const d = new Date(dateStr);\r\n    const day = d.getDate();\r\n    const weekday = d.toLocaleDateString('en-US', { weekday: 'short' }).slice(0, 2).toUpperCase();\r\n    return `${weekday}`;\r\n};\r\n\r\nexport const PerformanceChart: React.FC<PerformanceChartProps> = ({\r\n    data,\r\n    className = \"h-64 w-full\",\r\n    showGrid = true,\r\n    color = \"#0ea5e9\",\r\n    onDataSelect\r\n}) => {\r\n    return (\r\n        <div className={`select-none ${className}`}>\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <AreaChart\r\n                    data={data}\r\n                    margin={{ top: 10, right: 10, left: 5, bottom: 20 }}\r\n                    onClick={(e) => {\r\n                        if (onDataSelect && e && e.activePayload && e.activePayload[0]) {\r\n                            onDataSelect(e.activePayload[0].payload);\r\n                        }\r\n                    }}\r\n                >\r\n                    <defs>\r\n                        <linearGradient id=\"colorScore\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                            <stop offset=\"5%\" stopColor={color} stopOpacity={0.25} />\r\n                            <stop offset=\"95%\" stopColor={color} stopOpacity={0} />\r\n                        </linearGradient>\r\n                    </defs>\r\n\r\n                    {showGrid && (\r\n                        <CartesianGrid\r\n                            strokeDasharray=\"3 3\"\r\n                            stroke=\"#52525b\"\r\n                            opacity={0.3}\r\n                            vertical={false}\r\n                        />\r\n                    )}\r\n\r\n                    <XAxis\r\n                        dataKey=\"date\"\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#a1a1aa', fontSize: 10, fontWeight: 600, fontFamily: 'monospace' }}\r\n                        tickFormatter={formatXAxisLabel}\r\n                        interval={0}\r\n                        dy={10}\r\n                    />\r\n\r\n                    <YAxis\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#a1a1aa', fontSize: 12, fontWeight: 600, fontFamily: 'monospace' }}\r\n                        domain={[0, 100]}\r\n                        ticks={[0, 50, 100]}\r\n                        width={45}\r\n                        interval={0}\r\n                        dx={-5}\r\n                    />\r\n\r\n                    <Tooltip\r\n                        content={<CustomTooltip />}\r\n                        cursor={{ stroke: color, strokeWidth: 1, strokeDasharray: '4 4', opacity: 0.5 }}\r\n                    />\r\n\r\n                    <Area\r\n                        type=\"monotone\"\r\n                        dataKey=\"score\"\r\n                        stroke={color}\r\n                        strokeWidth={2.5}\r\n                        fillOpacity={1}\r\n                        fill=\"url(#colorScore)\"\r\n                        activeDot={{ r: 6, strokeWidth: 2, fill: '#fff', stroke: color }}\r\n                        animationDuration={800}\r\n                    />\r\n                </AreaChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n};\r\n"],"names":["CustomTooltip","active","payload","label","length","data","completedHabits","details","filter","d","done","className","Date","toLocaleDateString","month","day","weekday","value","slice","map","detail","i","habit","name","formatXAxisLabel","dateStr","getDate","toUpperCase","PerformanceChart","showGrid","color","onDataSelect","width","height","margin","top","right","left","bottom","onClick","e","activePayload","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","strokeDasharray","stroke","opacity","vertical","dataKey","axisLine","tickLine","tick","fill","fontSize","fontWeight","fontFamily","tickFormatter","interval","dy","domain","ticks","dx","content","cursor","strokeWidth","type","fillOpacity","activeDot","r","animationDuration"],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAeA,MAAMA,gBAAgB,CAAC,EAAEC,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAO;IAClD,IAAIF,UAAUC,WAAWA,QAAQE,MAAM,EAAE;QACrC,MAAMC,OAAOH,OAAO,CAAC,EAAE,CAACA,OAAO;QAC/B,MAAMI,kBAAkBD,KAAKE,OAAO,EAAEC,OAAO,CAACC,IAAWA,EAAEC,IAAI,KAAK,EAAE;QAEtE,qBACI,6LAAC;YAAIC,WAAU;;8BACX,6LAAC;oBAAIA,WAAU;;sCACX,6LAAC;;8CACG,6LAAC;oCAAEA,WAAU;8CACR,IAAIC,KAAKT,OAAOU,kBAAkB,CAAC,SAAS;wCAAEC,OAAO;wCAASC,KAAK;wCAAWC,SAAS;oCAAQ;;;;;;8CAEpG,6LAAC;oCAAEL,WAAU;;wCACRT,OAAO,CAAC,EAAE,CAACe,KAAK;wCAAC;;;;;;;;;;;;;sCAG1B,6LAAC;4BAAIN,WAAW,CAAC,0BAA0B,EAAET,OAAO,CAAC,EAAE,CAACe,KAAK,IAAI,KAAK,gBAAgB,kBAAkB;;;;;;;;;;;;8BAG5G,6LAAC;oBAAIN,WAAU;8BACVL,gBAAgBF,MAAM,GAAG,kBACtB;;4BACKE,gBAAgBY,KAAK,CAAC,GAAG,GAAGC,GAAG,CAAC,CAACC,QAAaC,kBAC3C,6LAAC;oCAAYV,WAAU;;sDACnB,6LAAC;4CAAIA,WAAU;;;;;;sDACf,6LAAC;4CAAKA,WAAU;sDACXS,OAAOE,KAAK,CAACC,IAAI;;;;;;;mCAHhBF;;;;;4BAObf,gBAAgBF,MAAM,GAAG,mBACtB,6LAAC;gCAAEO,WAAU;;oCAA2C;oCACjDL,gBAAgBF,MAAM,GAAG;oCAAE;;;;;;;;qDAK1C,6LAAC;wBAAEO,WAAU;kCAAsC;;;;;;;;;;;;;;;;;IAKvE;IACA,OAAO;AACX;KA5CMX;AA8CN,+BAA+B;AAC/B,MAAMwB,mBAAmB,CAACC;IACtB,IAAI,CAACA,SAAS,OAAO;IACrB,MAAMhB,IAAI,IAAIG,KAAKa;IACnB,MAAMV,MAAMN,EAAEiB,OAAO;IACrB,MAAMV,UAAUP,EAAEI,kBAAkB,CAAC,SAAS;QAAEG,SAAS;IAAQ,GAAGE,KAAK,CAAC,GAAG,GAAGS,WAAW;IAC3F,OAAO,GAAGX,SAAS;AACvB;AAEO,MAAMY,mBAAoD,CAAC,EAC9DvB,IAAI,EACJM,YAAY,aAAa,EACzBkB,WAAW,IAAI,EACfC,QAAQ,SAAS,EACjBC,YAAY,EACf;IACG,qBACI,6LAAC;QAAIpB,WAAW,CAAC,YAAY,EAAEA,WAAW;kBACtC,cAAA,6LAAC,6LAAmB;YAACqB,OAAM;YAAOC,QAAO;sBACrC,cAAA,6LAAC,qKAAS;gBACN5B,MAAMA;gBACN6B,QAAQ;oBAAEC,KAAK;oBAAIC,OAAO;oBAAIC,MAAM;oBAAGC,QAAQ;gBAAG;gBAClDC,SAAS,CAACC;oBACN,IAAIT,gBAAgBS,KAAKA,EAAEC,aAAa,IAAID,EAAEC,aAAa,CAAC,EAAE,EAAE;wBAC5DV,aAAaS,EAAEC,aAAa,CAAC,EAAE,CAACvC,OAAO;oBAC3C;gBACJ;;kCAEA,6LAAC;kCACG,cAAA,6LAAC;4BAAewC,IAAG;4BAAaC,IAAG;4BAAIC,IAAG;4BAAIC,IAAG;4BAAIC,IAAG;;8CACpD,6LAAC;oCAAKC,QAAO;oCAAKC,WAAWlB;oCAAOmB,aAAa;;;;;;8CACjD,6LAAC;oCAAKF,QAAO;oCAAMC,WAAWlB;oCAAOmB,aAAa;;;;;;;;;;;;;;;;;oBAIzDpB,0BACG,6LAAC,iLAAa;wBACVqB,iBAAgB;wBAChBC,QAAO;wBACPC,SAAS;wBACTC,UAAU;;;;;;kCAIlB,6LAAC,iKAAK;wBACFC,SAAQ;wBACRC,UAAU;wBACVC,UAAU;wBACVC,MAAM;4BAAEC,MAAM;4BAAWC,UAAU;4BAAIC,YAAY;4BAAKC,YAAY;wBAAY;wBAChFC,eAAetC;wBACfuC,UAAU;wBACVC,IAAI;;;;;;kCAGR,6LAAC,iKAAK;wBACFT,UAAU;wBACVC,UAAU;wBACVC,MAAM;4BAAEC,MAAM;4BAAWC,UAAU;4BAAIC,YAAY;4BAAKC,YAAY;wBAAY;wBAChFI,QAAQ;4BAAC;4BAAG;yBAAI;wBAChBC,OAAO;4BAAC;4BAAG;4BAAI;yBAAI;wBACnBlC,OAAO;wBACP+B,UAAU;wBACVI,IAAI,CAAC;;;;;;kCAGT,6LAAC,qKAAO;wBACJC,uBAAS,6LAACpE;;;;;wBACVqE,QAAQ;4BAAElB,QAAQrB;4BAAOwC,aAAa;4BAAGpB,iBAAiB;4BAAOE,SAAS;wBAAI;;;;;;kCAGlF,6LAAC,+JAAI;wBACDmB,MAAK;wBACLjB,SAAQ;wBACRH,QAAQrB;wBACRwC,aAAa;wBACbE,aAAa;wBACbd,MAAK;wBACLe,WAAW;4BAAEC,GAAG;4BAAGJ,aAAa;4BAAGZ,MAAM;4BAAQP,QAAQrB;wBAAM;wBAC/D6C,mBAAmB;;;;;;;;;;;;;;;;;;;;;;AAM3C;MA3Ea/C"}},
    {"offset": {"line": 1034, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/components/ProgressArc.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ProgressArcProps {\r\n    value: number;\r\n    max: number;\r\n    label: string;\r\n    sublabel?: string;\r\n    color?: 'pacific' | 'bali';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const ProgressArc: React.FC<ProgressArcProps> = ({\r\n    value,\r\n    max,\r\n    label,\r\n    sublabel,\r\n    color = 'pacific',\r\n    size = 'md'\r\n}) => {\r\n    const percentage = max > 0 ? Math.min(100, Math.max(0, (value / max) * 100)) : 0;\r\n\r\n    // Arc configuration (270 degree arc)\r\n    const radius = size === 'sm' ? 36 : 44;\r\n    const strokeWidth = size === 'sm' ? 6 : 8;\r\n    const circumference = 2 * Math.PI * radius;\r\n    const arcLength = circumference * 0.75; // 270 degrees\r\n    const offset = arcLength * (1 - percentage / 100);\r\n\r\n    const colorClass = color === 'pacific'\r\n        ? 'text-pacific-500'\r\n        : 'text-bali-500';\r\n\r\n    const glowClass = color === 'pacific'\r\n        ? 'drop-shadow-[0_0_8px_rgba(14,165,233,0.4)]'\r\n        : 'drop-shadow-[0_0_8px_rgba(16,185,129,0.4)]';\r\n\r\n    const svgSize = size === 'sm' ? 100 : 120;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center\">\r\n            <div className=\"relative\" style={{ width: svgSize, height: svgSize * 0.75 }}>\r\n                <svg\r\n                    className=\"transform\"\r\n                    viewBox={`0 0 ${svgSize} ${svgSize * 0.85}`}\r\n                    style={{ width: '100%', height: '100%' }}\r\n                >\r\n                    {/* Background Arc */}\r\n                    <circle\r\n                        cx={svgSize / 2}\r\n                        cy={svgSize / 2}\r\n                        r={radius}\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth={strokeWidth}\r\n                        fill=\"transparent\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={`${arcLength} ${circumference}`}\r\n                        strokeDashoffset={0}\r\n                        className=\"text-graphite-100 dark:text-graphite-800\"\r\n                        transform={`rotate(135 ${svgSize / 2} ${svgSize / 2})`}\r\n                    />\r\n\r\n                    {/* Value Arc */}\r\n                    <circle\r\n                        cx={svgSize / 2}\r\n                        cy={svgSize / 2}\r\n                        r={radius}\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth={strokeWidth}\r\n                        fill=\"transparent\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={`${arcLength} ${circumference}`}\r\n                        strokeDashoffset={offset}\r\n                        className={`${colorClass} ${glowClass} transition-all duration-700 ease-out`}\r\n                        transform={`rotate(135 ${svgSize / 2} ${svgSize / 2})`}\r\n                    />\r\n                </svg>\r\n\r\n                {/* Center Value */}\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center\" style={{ paddingTop: size === 'sm' ? '8px' : '12px' }}>\r\n                    <span className={`font-display font-bold text-graphite-900 dark:text-white tracking-tight ${size === 'sm' ? 'text-2xl' : 'text-3xl'}`}>\r\n                        {typeof value === 'number' && value % 1 === 0 ? value : Math.round(value)}\r\n                        {label.includes('%') ? '' : ''}\r\n                    </span>\r\n                    {sublabel && (\r\n                        <span className=\"text-[8px] font-bold uppercase text-graphite-400 mt-0.5\">\r\n                            {sublabel}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Label Below */}\r\n            <div className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500 mt-1 text-center\">\r\n                {label}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":["ProgressArc","value","max","label","sublabel","color","size","percentage","Math","min","radius","strokeWidth","circumference","PI","arcLength","offset","colorClass","glowClass","svgSize","className","style","width","height","viewBox","cx","cy","r","stroke","fill","strokeLinecap","strokeDasharray","strokeDashoffset","transform","paddingTop","round","includes"],"mappings":";;;;;;AAWO,MAAMA,cAA0C,CAAC,EACpDC,KAAK,EACLC,GAAG,EACHC,KAAK,EACLC,QAAQ,EACRC,QAAQ,SAAS,EACjBC,OAAO,IAAI,EACd;IACG,MAAMC,aAAaL,MAAM,IAAIM,KAAKC,GAAG,CAAC,KAAKD,KAAKN,GAAG,CAAC,GAAG,AAACD,QAAQC,MAAO,QAAQ;IAE/E,qCAAqC;IACrC,MAAMQ,SAASJ,SAAS,OAAO,KAAK;IACpC,MAAMK,cAAcL,SAAS,OAAO,IAAI;IACxC,MAAMM,gBAAgB,IAAIJ,KAAKK,EAAE,GAAGH;IACpC,MAAMI,YAAYF,gBAAgB,MAAM,cAAc;IACtD,MAAMG,SAASD,YAAY,CAAC,IAAIP,aAAa,GAAG;IAEhD,MAAMS,aAAaX,UAAU,YACvB,qBACA;IAEN,MAAMY,YAAYZ,UAAU,YACtB,+CACA;IAEN,MAAMa,UAAUZ,SAAS,OAAO,MAAM;IAEtC,qBACI,6LAAC;QAAIa,WAAU;;0BACX,6LAAC;gBAAIA,WAAU;gBAAWC,OAAO;oBAAEC,OAAOH;oBAASI,QAAQJ,UAAU;gBAAK;;kCACtE,6LAAC;wBACGC,WAAU;wBACVI,SAAS,CAAC,IAAI,EAAEL,QAAQ,CAAC,EAAEA,UAAU,MAAM;wBAC3CE,OAAO;4BAAEC,OAAO;4BAAQC,QAAQ;wBAAO;;0CAGvC,6LAAC;gCACGE,IAAIN,UAAU;gCACdO,IAAIP,UAAU;gCACdQ,GAAGhB;gCACHiB,QAAO;gCACPhB,aAAaA;gCACbiB,MAAK;gCACLC,eAAc;gCACdC,iBAAiB,GAAGhB,UAAU,CAAC,EAAEF,eAAe;gCAChDmB,kBAAkB;gCAClBZ,WAAU;gCACVa,WAAW,CAAC,WAAW,EAAEd,UAAU,EAAE,CAAC,EAAEA,UAAU,EAAE,CAAC,CAAC;;;;;;0CAI1D,6LAAC;gCACGM,IAAIN,UAAU;gCACdO,IAAIP,UAAU;gCACdQ,GAAGhB;gCACHiB,QAAO;gCACPhB,aAAaA;gCACbiB,MAAK;gCACLC,eAAc;gCACdC,iBAAiB,GAAGhB,UAAU,CAAC,EAAEF,eAAe;gCAChDmB,kBAAkBhB;gCAClBI,WAAW,GAAGH,WAAW,CAAC,EAAEC,UAAU,qCAAqC,CAAC;gCAC5Ee,WAAW,CAAC,WAAW,EAAEd,UAAU,EAAE,CAAC,EAAEA,UAAU,EAAE,CAAC,CAAC;;;;;;;;;;;;kCAK9D,6LAAC;wBAAIC,WAAU;wBAA6DC,OAAO;4BAAEa,YAAY3B,SAAS,OAAO,QAAQ;wBAAO;;0CAC5H,6LAAC;gCAAKa,WAAW,CAAC,wEAAwE,EAAEb,SAAS,OAAO,aAAa,YAAY;;oCAChI,OAAOL,UAAU,YAAYA,QAAQ,MAAM,IAAIA,QAAQO,KAAK0B,KAAK,CAACjC;oCAClEE,MAAMgC,QAAQ,CAAC,OAAO,KAAK;;;;;;;4BAE/B/B,0BACG,6LAAC;gCAAKe,WAAU;0CACXf;;;;;;;;;;;;;;;;;;0BAOjB,6LAAC;gBAAIe,WAAU;0BACVhB;;;;;;;;;;;;AAIjB;KAtFaH"}},
    {"offset": {"line": 1171, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { Habit, HabitLog, Version, Cycle, Goal, GoalType } from '@/types/types';\r\nimport { Check, Target, Calendar, TrendingUp, Flame, Trophy, Layers, Plus, ChevronDown, ChevronUp, BookOpen, AlertTriangle } from 'lucide-react';\r\nimport { NewVersionModal } from '@/components/NewVersionModal';\r\nimport { PerformanceChart } from '@/components/PerformanceChart';\r\nimport { ProgressArc } from '@/components/ProgressArc';\r\n\r\ntype ChartView = 'week' | '30d' | 'cycle';\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const [data, setData] = useState<{\r\n    version: Version | null;\r\n    cycle: Cycle | null;\r\n    habits: Habit[];\r\n    todayLogs: HabitLog[];\r\n    habitStats: Record<string, { currentStreak: number; maxStreak: number }>;\r\n    goals: Goal[];\r\n  } | null>(null);\r\n\r\n  const [history, setHistory] = useState<{ date: string; score: number }[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentScore, setCurrentScore] = useState(0);\r\n  const [showNewVersion, setShowNewVersion] = useState(false);\r\n  const [expandedProjects, setExpandedProjects] = useState<Set<string>>(new Set());\r\n  const [chartView, setChartView] = useState<ChartView>('week');\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const dashboardData = await supabaseService.getDashboardData();\r\n      const historyData = await supabaseService.getHistoryData();\r\n      setData(dashboardData);\r\n      setHistory(historyData.dailyScores);\r\n      setCurrentScore(supabaseService.calculateDailyScore(dashboardData.habits, dashboardData.todayLogs));\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { loadData(); }, []);\r\n\r\n  const handleToggleHabit = async (habitId: string, currentStatus: boolean) => {\r\n    if (!data) return;\r\n    const newStatus = !currentStatus;\r\n    const updatedLogs = newStatus\r\n      ? [...data.todayLogs, { id: 'temp', habit_id: habitId, date: '', status: true }]\r\n      : data.todayLogs.filter(l => l.habit_id !== habitId);\r\n\r\n    setData({ ...data, todayLogs: updatedLogs });\r\n    const newScore = supabaseService.calculateDailyScore(data.habits, updatedLogs);\r\n    setCurrentScore(newScore);\r\n\r\n    const todayStr = new Date().toISOString().split('T')[0];\r\n    setHistory(prev => prev.map(d => d.date === todayStr ? { ...d, score: newScore } : d));\r\n\r\n    await supabaseService.toggleHabit(habitId, newStatus);\r\n    await loadData();\r\n  };\r\n\r\n  const toggleProject = (id: string) => {\r\n    const newSet = new Set(expandedProjects);\r\n    if (newSet.has(id)) newSet.delete(id);\r\n    else newSet.add(id);\r\n    setExpandedProjects(newSet);\r\n  };\r\n\r\n  const handleToggleSubtask = async (goalId: string, index: number) => {\r\n    if (!data) return;\r\n    const goalIndex = data.goals.findIndex(g => g.id === goalId);\r\n    if (goalIndex === -1) return;\r\n    const goal = data.goals[goalIndex];\r\n    if (!goal.subtasks || !Array.isArray(goal.subtasks)) return;\r\n\r\n    const newSubtasks = [...goal.subtasks];\r\n    newSubtasks[index] = { ...newSubtasks[index], done: !newSubtasks[index].done };\r\n    const updatedGoal = { ...goal, subtasks: newSubtasks };\r\n    const newGoals = [...data.goals];\r\n    newGoals[goalIndex] = updatedGoal;\r\n    setData({ ...data, goals: newGoals });\r\n    await supabaseService.updateGoal(updatedGoal);\r\n  };\r\n\r\n  const handleCreateVersion = async (vData: { title: string; description: string; number: number; startDate: string }) => {\r\n    await supabaseService.createVersion(vData);\r\n    setShowNewVersion(false);\r\n    loadData();\r\n  };\r\n\r\n  if (loading || !data) return <div className=\"flex h-full items-center justify-center text-sm font-medium text-graphite-400\">Initializing Portal...</div>;\r\n\r\n  const getCycleProgress = () => {\r\n    if (!data.cycle) return { percent: 0, daysLeft: 0, totalDays: 30 };\r\n    const start = new Date(data.cycle.start_date).getTime();\r\n    const end = new Date(data.cycle.end_date).getTime();\r\n    const now = new Date().getTime();\r\n    const total = end - start;\r\n    const elapsed = now - start;\r\n    const percent = total > 0 ? Math.min(100, Math.max(0, (elapsed / total) * 100)) : 0;\r\n    const daysLeft = Math.max(0, Math.ceil((end - now) / (1000 * 60 * 60 * 24)));\r\n    const totalDays = Math.ceil(total / (1000 * 60 * 60 * 24));\r\n    return { percent, daysLeft, totalDays };\r\n  };\r\n  const cycleStats = getCycleProgress();\r\n\r\n  const formatDateShort = (dateStr: string) => {\r\n    if (!dateStr) return '';\r\n    const d = new Date(dateStr);\r\n    const month = d.toLocaleString('en-US', { month: 'short' }).toUpperCase();\r\n    const day = d.getDate().toString().padStart(2, '0');\r\n    return `${month} ${day}`;\r\n  };\r\n\r\n  const getChartData = () => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    if (chartView === 'week') {\r\n      const dayOfWeek = today.getDay();\r\n      const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;\r\n      const monday = new Date(today);\r\n      monday.setDate(today.getDate() + mondayOffset);\r\n\r\n      const weekDays = [];\r\n      for (let i = 0; i < 7; i++) {\r\n        const d = new Date(monday);\r\n        d.setDate(monday.getDate() + i);\r\n        weekDays.push(d.toISOString().split('T')[0]);\r\n      }\r\n\r\n      return weekDays.map(dateStr => {\r\n        const existing = history.find(h => h.date === dateStr);\r\n        return existing || { date: dateStr, score: 0 };\r\n      });\r\n    } else if (chartView === '30d') {\r\n      return history.slice(-30);\r\n    } else {\r\n      if (!data.cycle) return history.slice(-14);\r\n      const cycleStart = new Date(data.cycle.start_date);\r\n      const cycleEnd = new Date(data.cycle.end_date);\r\n      return history.filter(h => {\r\n        const d = new Date(h.date);\r\n        return d >= cycleStart && d <= cycleEnd;\r\n      });\r\n    }\r\n  };\r\n\r\n  const chartData = getChartData();\r\n  const activeProjects = data.goals.filter(g => g.type === GoalType.TASK_PROJECT && g.cycle_id === data.cycle?.id);\r\n\r\n  const learningItems = data.cycle?.learning_focus\r\n    ? data.cycle.learning_focus.split(/[,\\n]/).map(s => s.trim()).filter(Boolean)\r\n    : [];\r\n\r\n  // Importance dots component\r\n  const ImportanceDots = ({ weight, isDone }: { weight: number; isDone: boolean }) => (\r\n    <div className=\"flex gap-0.5\" title={`Importance: ${weight}`}>\r\n      {[...Array(weight)].map((_, i) => (\r\n        <div\r\n          key={i}\r\n          className={`h-1.5 w-2.5 rounded-full transition-colors duration-300 ${isDone ? 'bg-bali-500' : 'bg-graphite-400 dark:bg-graphite-600'\r\n            }`}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-5 h-full\">\r\n\r\n      {/* Hero Header - Compact */}\r\n      <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-3 border-b border-graphite-200 dark:border-graphite-800 pb-4 flex-shrink-0\">\r\n        {data.version ? (\r\n          <div>\r\n            <div className=\"flex items-center gap-2 mb-1.5\">\r\n              <span className=\"inline-flex items-center rounded-md bg-pacific-500/10 border border-pacific-500/20 px-2.5 py-0.5 text-[10px] font-bold text-pacific-600 dark:text-pacific-400 uppercase tracking-wider\">\r\n                Version {data.version.number}.0\r\n              </span>\r\n              <span className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-wider\">Active</span>\r\n            </div>\r\n            <h1 className=\"text-2xl font-display font-bold text-graphite-900 dark:text-white tracking-tight leading-none\">\r\n              {data.version.title}\r\n            </h1>\r\n            <p className=\"mt-1.5 text-xs text-graphite-500 dark:text-graphite-400 max-w-2xl leading-snug line-clamp-1\">{data.version.description}</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col items-start gap-2\">\r\n            <div className=\"flex items-center gap-3 text-graphite-400\">\r\n              <div className=\"p-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg\"><Layers size={20} /></div>\r\n              <h1 className=\"text-lg font-bold text-graphite-900 dark:text-white\">System Standby</h1>\r\n            </div>\r\n            <button onClick={() => setShowNewVersion(true)} className=\"px-4 py-2 bg-pacific-600 text-white text-xs font-bold rounded-xl hover:bg-pacific-500 transition-colors shadow-lg shadow-pacific-500/20 flex items-center gap-2\">\r\n              <Plus size={14} /> Initialize Version 1.0\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {data.version && (\r\n          <div className=\"flex flex-col items-end\">\r\n            {data.cycle ? (\r\n              <div className=\"flex items-center gap-2 mb-1.5\">\r\n                <span className=\"h-2 w-2 rounded-full bg-pacific-500 animate-pulse\"></span>\r\n                <span className=\"text-[10px] font-bold uppercase text-graphite-500 dark:text-graphite-400 tracking-wider\">Cycle {data.cycle.sprint_number} Active</span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center gap-2 mb-1.5\">\r\n                <span className=\"h-2 w-2 rounded-full bg-red-500\"></span>\r\n                <span className=\"text-[10px] font-bold uppercase text-graphite-500 dark:text-graphite-400 tracking-wider\">No Active Cycle</span>\r\n              </div>\r\n            )}\r\n            <div className=\"flex items-center gap-2.5 text-[11px] font-mono font-medium text-graphite-500\">\r\n              <span>{formatDateShort(data.cycle?.start_date || '')}</span>\r\n              <span className=\"text-graphite-300 dark:text-graphite-600\"></span>\r\n              <span className=\"text-pacific-500 font-bold\">{formatDateShort(data.cycle?.end_date || '')}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* MAIN GRID: 4-column layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-5 flex-shrink-0\">\r\n\r\n        {/* Col 1: Habit Tracker - 4 columns */}\r\n        <div className=\"lg:col-span-4 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-4 shadow-sm\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-[10px] font-bold text-graphite-500 uppercase tracking-widest flex items-center gap-1.5\">\r\n              <Calendar size={12} /> HABIT TRACKER\r\n            </h3>\r\n            <span className=\"text-[10px] font-mono text-graphite-400\">{data.todayLogs.filter(l => l.status).length}/{data.habits.length}</span>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {data.habits.map((habit) => {\r\n              const isDone = data.todayLogs.some(l => l.habit_id === habit.id && l.status);\r\n              const stats = data.habitStats[habit.id] || { currentStreak: 0, maxStreak: 0 };\r\n              return (\r\n                <div\r\n                  key={habit.id}\r\n                  onClick={() => handleToggleHabit(habit.id, isDone)}\r\n                  className={`group relative cursor-pointer rounded-xl p-3 transition-all duration-300 border\r\n                      ${isDone\r\n                      ? 'bg-bali-500/10 border-bali-500/30'\r\n                      : 'bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50 hover:shadow-sm'\r\n                    }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between gap-2\">\r\n                    <div className=\"flex items-center gap-2.5 min-w-0\">\r\n                      <div className={`h-5 w-5 flex-shrink-0 rounded-md flex items-center justify-center transition-all duration-300 border ${isDone\r\n                        ? 'bg-bali-500 border-bali-500 text-white shadow-sm shadow-bali-500/30'\r\n                        : 'bg-transparent border-graphite-300 dark:border-graphite-600 text-transparent group-hover:border-pacific-400'\r\n                        }`}>\r\n                        <Check size={12} strokeWidth={3} />\r\n                      </div>\r\n                      <span className={`text-sm font-semibold transition-colors truncate ${isDone ? 'text-bali-600 dark:text-bali-400 line-through decoration-bali-500/30' : 'text-graphite-700 dark:text-graphite-200'}`}>\r\n                        {habit.name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3 flex-shrink-0\">\r\n                      {/* Importance Dots */}\r\n                      <ImportanceDots weight={habit.weight} isDone={isDone} />\r\n                      {/* Streak indicators */}\r\n                      <div className=\"flex items-center gap-2 opacity-70\">\r\n                        <div className=\"flex items-center gap-0.5\" title=\"Current Streak\">\r\n                          <Flame size={11} className={stats.currentStreak > 0 ? \"text-orange-500\" : \"text-graphite-400\"} />\r\n                          <span className={`text-[10px] font-bold ${stats.currentStreak > 0 ? \"text-graphite-600 dark:text-graphite-300\" : \"text-graphite-400\"}`}>{stats.currentStreak}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-0.5\" title=\"Best Streak\">\r\n                          <Trophy size={11} className={stats.maxStreak > 0 ? \"text-yellow-500\" : \"text-graphite-400\"} />\r\n                          <span className={`text-[10px] font-bold ${stats.maxStreak > 0 ? \"text-graphite-600 dark:text-graphite-300\" : \"text-graphite-400\"}`}>{stats.maxStreak}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            {data.habits.length === 0 && (\r\n              <div className=\"text-center py-8 text-xs text-graphite-400 italic\">No habits defined for this cycle.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 2: Arc Cards STACKED VERTICALLY - 2 columns */}\r\n        <div className=\"lg:col-span-2 flex flex-col gap-4\">\r\n          {/* Efficiency Arc - Square */}\r\n          <div className=\"aspect-square rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm flex items-center justify-center\">\r\n            <ProgressArc\r\n              value={currentScore}\r\n              max={100}\r\n              label=\"Efficiency\"\r\n              color=\"pacific\"\r\n              size=\"sm\"\r\n            />\r\n          </div>\r\n          {/* Cycle Arc - Square */}\r\n          <div className=\"aspect-square rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 shadow-sm flex items-center justify-center\">\r\n            <ProgressArc\r\n              value={cycleStats.daysLeft}\r\n              max={cycleStats.totalDays}\r\n              label={`Cycle ${data.cycle?.sprint_number || '-'}`}\r\n              sublabel=\"Days Left\"\r\n              color=\"bali\"\r\n              size=\"sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 3: Cycle Goals - 3 columns */}\r\n        <div className=\"lg:col-span-3 rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-4 shadow-sm\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-[10px] font-bold text-graphite-500 uppercase tracking-widest flex items-center gap-1.5\">\r\n              <Target size={12} /> CYCLE GOALS\r\n            </h3>\r\n          </div>\r\n          <div className=\"space-y-2.5\">\r\n            {activeProjects.map((project) => {\r\n              const isExpanded = expandedProjects.has(project.id);\r\n              const subtasks = project.subtasks || [];\r\n              const completed = subtasks.filter(t => t.done).length;\r\n              const total = subtasks.length;\r\n              const progress = total > 0 ? (completed / total) * 100 : 0;\r\n              const isDone = total > 0 && completed === total;\r\n\r\n              return (\r\n                <div\r\n                  key={project.id}\r\n                  className={`group relative rounded-xl border transition-all duration-300 overflow-hidden ${isExpanded || isDone\r\n                    ? 'bg-bali-500/10 border-bali-500/30'\r\n                    : 'bg-graphite-50 dark:bg-graphite-800/50 border-graphite-200 dark:border-graphite-700 hover:border-pacific-500/50'\r\n                    }`}\r\n                >\r\n                  {/* Progress bar at top edge */}\r\n                  <div className=\"absolute top-0 left-0 right-0 h-1 bg-graphite-100 dark:bg-graphite-800/50\">\r\n                    <div className={`h-full transition-all duration-500 ${isDone ? 'bg-bali-500' : 'bg-pacific-500'}`} style={{ width: `${progress}%` }} />\r\n                  </div>\r\n\r\n                  <div className=\"p-3 pt-3.5\">\r\n                    <div className=\"flex items-center justify-between gap-2\">\r\n                      <h3 className={`text-xs font-bold leading-tight flex-1 ${isDone ? 'text-bali-600 dark:text-bali-400 line-through' : 'text-graphite-900 dark:text-white'}`}>\r\n                        {project.title}\r\n                      </h3>\r\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <span className=\"text-[10px] font-mono font-bold text-graphite-400\">{Math.round(progress)}%</span>\r\n                        <button\r\n                          onClick={() => toggleProject(project.id)}\r\n                          className=\"p-1 rounded-md hover:bg-graphite-100 dark:hover:bg-graphite-700 transition-colors\"\r\n                        >\r\n                          {isExpanded ? <ChevronUp size={14} className=\"text-graphite-400\" /> : <ChevronDown size={14} className=\"text-graphite-400\" />}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Collapsible subtasks */}\r\n                    {isExpanded && (\r\n                      <div className=\"pt-2.5 border-t border-graphite-100 dark:border-graphite-700 space-y-2 mt-2.5\">\r\n                        {subtasks.length > 0 ? subtasks.map((task, i) => (\r\n                          <div key={i} className=\"flex items-start gap-2\">\r\n                            <button\r\n                              onClick={() => handleToggleSubtask(project.id, i)}\r\n                              className={`mt-0.5 h-4 w-4 rounded border flex items-center justify-center transition-all flex-shrink-0 ${task.done\r\n                                ? 'bg-pacific-500 border-pacific-500 text-white'\r\n                                : 'border-graphite-300 dark:border-graphite-600 hover:border-pacific-400'\r\n                                }`}\r\n                            >\r\n                              {task.done && <Check size={10} strokeWidth={3} />}\r\n                            </button>\r\n                            <span\r\n                              className={`text-xs leading-snug cursor-pointer ${task.done ? 'text-graphite-400 line-through' : 'text-graphite-600 dark:text-graphite-300'}`}\r\n                              onClick={() => handleToggleSubtask(project.id, i)}\r\n                            >\r\n                              {task.name}\r\n                            </span>\r\n                          </div>\r\n                        )) : (\r\n                          <div className=\"text-center py-2 text-[10px] text-graphite-400 italic\">No subtasks defined</div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            {activeProjects.length === 0 && (\r\n              <div className=\"text-center py-8 text-xs text-graphite-400 italic\">No cycle goals defined.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Col 4: Focus Cards - 3 columns */}\r\n        <div className=\"lg:col-span-3 flex flex-col gap-3\">\r\n\r\n          {/* Learning Focus */}\r\n          <div className=\"rounded-xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2.5\">\r\n              <BookOpen size={13} className=\"text-pacific-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500\">Learning Focus</h3>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              {learningItems.length > 0 ? learningItems.map((item, i) => (\r\n                <span key={i} className=\"inline-flex items-center px-2.5 py-1 rounded-lg bg-pacific-500/10 border border-pacific-500/20 text-[11px] font-medium text-pacific-600 dark:text-pacific-400\">\r\n                  {item}\r\n                </span>\r\n              )) : (\r\n                <span className=\"text-[10px] text-graphite-400 italic\">Not defined</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Focus Priorities */}\r\n          <div className=\"rounded-xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2.5\">\r\n              <Target size={13} className=\"text-bali-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-graphite-500\">Focus Priorities</h3>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {data.cycle?.focus_priorities?.map((p, i) => (\r\n                <div key={i} className=\"flex items-start gap-2.5\">\r\n                  <span className=\"flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-md bg-bali-500/10 text-[10px] font-bold text-bali-500\">{i + 1}</span>\r\n                  <span className=\"text-xs font-medium text-graphite-700 dark:text-graphite-300 leading-snug\">{p}</span>\r\n                </div>\r\n              ))}\r\n              {!data.cycle?.focus_priorities?.length && <div className=\"text-[10px] text-graphite-400 italic\">Not defined</div>}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Current Friction */}\r\n          <div className=\"rounded-xl bg-red-50 dark:bg-red-900/10 border border-red-200/50 dark:border-red-900/30 p-3.5 shadow-sm\">\r\n            <div className=\"flex items-center gap-1.5 mb-2\">\r\n              <AlertTriangle size={13} className=\"text-red-500\" />\r\n              <h3 className=\"text-[10px] font-bold uppercase tracking-widest text-red-500 dark:text-red-400\">Friction</h3>\r\n            </div>\r\n            {data.cycle?.problems ? (\r\n              <p className=\"text-xs italic text-red-700 dark:text-red-300/80 leading-relaxed\">\"{data.cycle.problems}\"</p>\r\n            ) : (\r\n              <p className=\"text-[10px] text-graphite-400 italic\">No friction defined</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* BOTTOM: Progress Chart - Full Width, Taller, Flex to Fill */}\r\n      <div className=\"rounded-2xl bg-white dark:bg-graphite-900 border border-graphite-200 dark:border-graphite-800 p-5 shadow-sm flex-1 min-h-[180px]\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <span className=\"text-[11px] font-bold uppercase text-graphite-500 flex items-center gap-2\">\r\n            <TrendingUp size={14} /> Progress Chart\r\n          </span>\r\n          <div className=\"flex items-center gap-1 p-1 bg-graphite-100 dark:bg-graphite-800 rounded-lg\">\r\n            {(['week', '30d', 'cycle'] as ChartView[]).map((view) => (\r\n              <button\r\n                key={view}\r\n                onClick={() => setChartView(view)}\r\n                className={`px-3 py-1.5 text-[10px] font-bold uppercase rounded-md transition-all ${chartView === view\r\n                  ? 'bg-white dark:bg-graphite-700 text-graphite-900 dark:text-white shadow-sm'\r\n                  : 'text-graphite-500 hover:text-graphite-700 dark:hover:text-graphite-300'\r\n                  }`}\r\n              >\r\n                {view === 'week' ? 'Week' : view === '30d' ? '30D' : 'Cycle'}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"h-full min-h-[120px]\">\r\n          <PerformanceChart\r\n            data={chartData}\r\n            className=\"h-full w-full\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {showNewVersion && <NewVersionModal onClose={() => setShowNewVersion(false)} onCreate={handleCreateVersion} suggestedNumber={1} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"names":["Dashboard","data","setData","history","setHistory","loading","setLoading","currentScore","setCurrentScore","showNewVersion","setShowNewVersion","expandedProjects","setExpandedProjects","Set","chartView","setChartView","loadData","dashboardData","getDashboardData","historyData","getHistoryData","dailyScores","calculateDailyScore","habits","todayLogs","err","console","error","handleToggleHabit","habitId","currentStatus","newStatus","updatedLogs","id","habit_id","date","status","filter","l","newScore","todayStr","Date","toISOString","split","prev","map","d","score","toggleHabit","toggleProject","newSet","has","delete","add","handleToggleSubtask","goalId","index","goalIndex","goals","findIndex","g","goal","subtasks","Array","isArray","newSubtasks","done","updatedGoal","newGoals","updateGoal","handleCreateVersion","vData","createVersion","className","getCycleProgress","cycle","percent","daysLeft","totalDays","start","start_date","getTime","end","end_date","now","total","elapsed","Math","min","max","ceil","cycleStats","formatDateShort","dateStr","month","toLocaleString","toUpperCase","day","getDate","toString","padStart","getChartData","today","setHours","dayOfWeek","getDay","mondayOffset","monday","setDate","weekDays","i","push","existing","find","h","slice","cycleStart","cycleEnd","chartData","activeProjects","type","TASK_PROJECT","cycle_id","learningItems","learning_focus","s","trim","Boolean","ImportanceDots","weight","isDone","title","_","version","number","description","size","onClick","sprint_number","length","habit","some","stats","habitStats","currentStreak","maxStreak","strokeWidth","name","value","label","color","sublabel","project","isExpanded","completed","t","progress","style","width","round","task","item","focus_priorities","p","problems","view","onClose","onCreate","suggestedNumber"],"mappings":"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"}}]
}