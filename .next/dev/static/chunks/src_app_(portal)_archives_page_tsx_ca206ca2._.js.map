{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/20252128/dev/Projects/el-portal/src/app/%28portal%29/archives/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { supabaseService } from '@/lib/supabaseService';\r\nimport { ArchiveItem, ArchiveType } from '@/types/types';\r\nimport { Library, Eye, List, Brain, ScrollText, Plus, Save, Trash2, X, Search, ArrowUpDown, Edit3, Check, CheckSquare, Square } from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\n\r\nconst Archives: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<ArchiveType>(ArchiveType.VISION_5Y);\r\n  const [items, setItems] = useState<ArchiveItem[]>([]);\r\n  const [selectedItem, setSelectedItem] = useState<ArchiveItem | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [editorContent, setEditorContent] = useState('');\r\n  const [editorTitle, setEditorTitle] = useState('');\r\n  const [newTodo, setNewTodo] = useState('');\r\n\r\n  // New state for modes and tracking\r\n  const [viewMode, setViewMode] = useState<'view' | 'edit'>('view');\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  const [originalContent, setOriginalContent] = useState('');\r\n\r\n  // Mantra Bank specific\r\n  const [mantraSearch, setMantraSearch] = useState('');\r\n  const [mantraSort, setMantraSort] = useState<'desc' | 'asc'>('desc');\r\n  const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'error' | 'idle'>('idle');\r\n  // New state for multi-item editing (Mantra Bank)\r\n  const [modifiedMantras, setModifiedMantras] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => { loadItems(); }, []);\r\n\r\n  // Track unsaved changes\r\n  useEffect(() => {\r\n    // For Life Checklist, we don't track unsaved changes this way as it saves automatically/directly\r\n    if (activeTab === ArchiveType.LIFE_TODO) return;\r\n\r\n    if (viewMode === 'edit' || activeTab === ArchiveType.MANTRA_BANK) {\r\n      setHasUnsavedChanges(editorContent !== originalContent);\r\n    }\r\n  }, [editorContent, originalContent, viewMode, activeTab]);\r\n\r\n  const loadItems = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await supabaseService.seedDefaultArchives();\r\n      const archives = await supabaseService.getArchives();\r\n      setItems(archives);\r\n\r\n      // Auto-select for singletons\r\n      if (activeTab === ArchiveType.VISION_5Y || activeTab === ArchiveType.LIFE_TODO) {\r\n        const found = archives.find((a: ArchiveItem) => a.type === activeTab);\r\n        if (found) {\r\n          selectItem(found);\r\n          setViewMode('view');\r\n        } else {\r\n          handleCreateNewForTab(activeTab);\r\n          // For Life Checklist, viewMode doesn't really matter as we render custom UI, but for consistency\r\n          setViewMode('edit');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectItem = (item: ArchiveItem) => {\r\n    setSelectedItem(item);\r\n    setEditorTitle(item.title);\r\n    setEditorContent(item.content);\r\n    setOriginalContent(item.content);\r\n    setHasUnsavedChanges(false);\r\n    setSaveStatus('idle');\r\n  };\r\n\r\n  const handleTabChange = (tabId: ArchiveType) => {\r\n    setActiveTab(tabId);\r\n    setSaveStatus('idle');\r\n    setHasUnsavedChanges(false);\r\n    setSelectedItem(null);\r\n\r\n    const isSingleton = tabId === ArchiveType.VISION_5Y || tabId === ArchiveType.LIFE_TODO;\r\n    if (isSingleton) {\r\n      const found = items.find((i: ArchiveItem) => i.type === tabId);\r\n      if (found) {\r\n        selectItem(found);\r\n        setViewMode('view'); // Default to view mode for singletons\r\n      } else {\r\n        handleCreateNewForTab(tabId);\r\n        setViewMode('edit');\r\n      }\r\n    } else {\r\n      // For collections (Theory, Routines), clear selection so user sees list\r\n      setSelectedItem(null);\r\n      setViewMode('view');\r\n    }\r\n  };\r\n\r\n  const handleCreateNewForTab = (tabId: ArchiveType) => {\r\n    const isMantra = tabId === ArchiveType.MANTRA_BANK;\r\n\r\n    let defaultTitle = 'New Entry';\r\n    let defaultContent = '';\r\n\r\n    if (isMantra) {\r\n      defaultTitle = 'Mantra';\r\n    } else if (tabId === ArchiveType.VISION_5Y) {\r\n      defaultTitle = 'Vision';\r\n    } else if (tabId === ArchiveType.LIFE_TODO) {\r\n      defaultTitle = 'Life Checklist';\r\n    } else if (tabId === ArchiveType.THEORY_NOTES) {\r\n      defaultTitle = 'Theory Note';\r\n      defaultContent = '# Theory Note\\n\\n**Problem/Friction:**\\n\\n\\n**Proposed Solution:**\\n';\r\n    }\r\n\r\n    const newItem: ArchiveItem = {\r\n      id: `new-${Date.now()}`,\r\n      type: tabId,\r\n      title: defaultTitle,\r\n      content: defaultContent\r\n    };\r\n\r\n    if (isMantra) {\r\n      // For mantras, add directly to items (simulating prompt appearance)\r\n      setItems(prev => [newItem, ...prev]);\r\n      setModifiedMantras(prev => ({ ...prev, [newItem.id]: defaultContent }));\r\n    } else {\r\n      selectItem(newItem);\r\n      setViewMode('edit');\r\n    }\r\n  };\r\n\r\n  const handleCreateNew = () => {\r\n    handleCreateNewForTab(activeTab);\r\n  };\r\n\r\n  // Dedicated Save Handler\r\n  const handleSave = async (shouldCloseMantra = false, contentOverride?: string) => {\r\n    if (selectedItem) {\r\n      setSaveStatus('saving');\r\n      try {\r\n        const contentToSave = contentOverride !== undefined ? contentOverride : editorContent;\r\n        const updatedItem = { ...selectedItem, title: editorTitle, content: contentToSave, type: activeTab };\r\n        const result = await supabaseService.updateArchive(updatedItem);\r\n\r\n        const savedItem = { ...updatedItem, id: result.id };\r\n        setOriginalContent(contentToSave);\r\n        if (contentOverride === undefined) {\r\n          setEditorContent(contentToSave); // Ensure local state matches if we passed an override that wasn't already set\r\n        }\r\n        setHasUnsavedChanges(false);\r\n\r\n        setItems(prev => {\r\n          const exists = prev.some(i => i.id === selectedItem.id || i.id === result.id);\r\n          if (exists) {\r\n            return prev.map(i => (i.id === selectedItem.id || i.id === result.id) ? savedItem : i);\r\n          }\r\n          return [...prev, savedItem];\r\n        });\r\n\r\n        // Update current valid item with new ID if it was new\r\n        setSelectedItem(savedItem);\r\n\r\n        setSaveStatus('saved');\r\n        setTimeout(() => setSaveStatus('idle'), 2000);\r\n\r\n        if (activeTab === ArchiveType.MANTRA_BANK && shouldCloseMantra) {\r\n          setSelectedItem(null);\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(err);\r\n        setSaveStatus('error');\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- LIFE CHECKLIST SPECIFIC LOGIC ---\r\n  const saveContentDirectly = (newContent: string) => {\r\n    setEditorContent(newContent);\r\n    handleSave(false, newContent);\r\n  };\r\n\r\n  const handleAddTodo = () => {\r\n    if (!newTodo.trim()) return;\r\n    const newContent = editorContent ? `${editorContent}\\n- [ ] ${newTodo}` : `- [ ] ${newTodo}`;\r\n    setNewTodo('');\r\n    saveContentDirectly(newContent);\r\n  };\r\n\r\n  const handleDeleteTodo = (idx: number) => {\r\n    const lines = editorContent.split('\\n');\r\n    lines.splice(idx, 1);\r\n    saveContentDirectly(lines.join('\\n'));\r\n  };\r\n\r\n  const handleUpdateTodoText = (idx: number, text: string) => {\r\n    const lines = editorContent.split('\\n');\r\n    const isDone = lines[idx].includes('[x]');\r\n    lines[idx] = `- [${isDone ? 'x' : ' '}] ${text}`;\r\n    setEditorContent(lines.join('\\n')); // Just update state, save on blur\r\n    setHasUnsavedChanges(true);\r\n  };\r\n\r\n  const handleToggleTodo = (idx: number) => {\r\n    const lines = editorContent.split('\\n');\r\n    const line = lines[idx];\r\n    const isDone = line.includes('[x]');\r\n    // Regex replace to handle potential spacing variations\r\n    lines[idx] = line.replace(/- \\[(x| )\\]/, `- [${isDone ? ' ' : 'x'}]`);\r\n    saveContentDirectly(lines.join('\\n'));\r\n  };\r\n  // --------------------------------------\r\n\r\n  const handleSaveMantra = async (item: ArchiveItem, newContent: string) => {\r\n    setSaveStatus('saving');\r\n    try {\r\n      const updatedItem = { ...item, content: newContent };\r\n      // Pass item directly; updateArchive handles 'new-' IDs by inserting\r\n      const result = await supabaseService.updateArchive(updatedItem);\r\n\r\n      const savedItem = { ...updatedItem, id: result.id };\r\n\r\n      setItems(prev => prev.map(i => i.id === item.id ? savedItem : i));\r\n\r\n      setModifiedMantras(prev => {\r\n        const next = { ...prev };\r\n        delete next[item.id]; // Remove from modified since saved\r\n        return next;\r\n      });\r\n\r\n      setSaveStatus('saved');\r\n      setTimeout(() => setSaveStatus('idle'), 2000);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaveStatus('error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (id: string) => {\r\n    if (id.startsWith('new-')) {\r\n      setSelectedItem(null);\r\n      return;\r\n    }\r\n    if (confirm('Permanently delete this entry?')) {\r\n      await supabaseService.deleteArchive(id);\r\n      const refreshed = items.filter(i => i.id !== id);\r\n      setItems(refreshed);\r\n      if (selectedItem?.id === id) setSelectedItem(null);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: ArchiveType.VISION_5Y, label: 'Vision', icon: <Eye size={18} /> },\r\n    { id: ArchiveType.LIFE_TODO, label: 'Life Checklist', icon: <Check size={18} /> },\r\n    { id: ArchiveType.ROUTINE, label: 'Routines', icon: <List size={18} /> },\r\n    { id: ArchiveType.MANTRA_BANK, label: 'Mantra Bank', icon: <Brain size={18} /> },\r\n    { id: ArchiveType.THEORY_NOTES, label: 'Theory Notes', icon: <ScrollText size={18} /> },\r\n  ];\r\n\r\n  const filteredItems = useMemo(() => {\r\n    let list = items.filter(i => i.type === activeTab);\r\n    if (activeTab === ArchiveType.MANTRA_BANK) {\r\n      if (mantraSearch) {\r\n        list = list.filter(i => i.content.toLowerCase().includes(mantraSearch.toLowerCase()));\r\n      }\r\n      list = [...list].sort((a, b) => {\r\n        const dateA = new Date(a.created_at || 0).getTime();\r\n        const dateB = new Date(b.created_at || 0).getTime();\r\n        return mantraSort === 'desc' ? dateB - dateA : dateA - dateB;\r\n      });\r\n    }\r\n    return list;\r\n  }, [items, activeTab, mantraSearch, mantraSort]);\r\n\r\n  const isSingleton = activeTab === ArchiveType.VISION_5Y || activeTab === ArchiveType.LIFE_TODO;\r\n  const isMantraBank = activeTab === ArchiveType.MANTRA_BANK;\r\n  const isLifeChecklist = activeTab === ArchiveType.LIFE_TODO;\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <header className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-graphite-900 dark:text-white\">Archives</h1>\r\n        <p className=\"text-xs font-bold text-graphite-500 uppercase tracking-widest\">Knowledge Base</p>\r\n      </header>\r\n\r\n      <div className=\"flex-1 flex overflow-hidden rounded-2xl border border-graphite-200 dark:border-graphite-800 bg-white dark:bg-graphite-900 shadow-sm\">\r\n\r\n        {/* Primary Sidebar - Tabs */}\r\n        <div className=\"w-64 flex-shrink-0 border-r border-graphite-100 dark:border-graphite-800 bg-graphite-50 dark:bg-graphite-950 p-4 space-y-1\">\r\n          {tabs.map(tab => (\r\n            <button key={tab.id}\r\n              onClick={() => handleTabChange(tab.id)}\r\n              className={`flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-bold transition-all ${activeTab === tab.id ? 'bg-pacific-50 text-pacific-700 dark:bg-pacific-900/20 dark:text-pacific-300' : 'text-graphite-500 hover:bg-graphite-100 dark:hover:bg-graphite-800'}`}\r\n            >\r\n              {tab.icon} {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Secondary Sidebar - Entries (for Collections) */}\r\n        {!isSingleton && !isMantraBank && (\r\n          <div className=\"w-64 flex-shrink-0 border-r border-graphite-100 dark:border-graphite-800 bg-white dark:bg-graphite-900 flex flex-col\">\r\n            <div className=\"p-4 border-b border-graphite-100 dark:border-graphite-800 flex justify-between items-center\">\r\n              <span className=\"text-xs font-bold text-graphite-400 uppercase\">Entries</span>\r\n              <button\r\n                onClick={handleCreateNew}\r\n                className=\"text-pacific-600 hover:bg-pacific-50 p-1.5 rounded-lg transition-colors\"\r\n                title=\"Create New Entry\"\r\n              >\r\n                <Plus size={18} />\r\n              </button>\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto p-2 space-y-1\">\r\n              {filteredItems.map((item: ArchiveItem) => (\r\n                <div key={item.id} className=\"group relative\">\r\n                  <button\r\n                    onClick={() => { selectItem(item); setViewMode('view'); }}\r\n                    className={`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${selectedItem?.id === item.id ? 'bg-graphite-100 dark:bg-graphite-800 text-graphite-900 dark:text-white' : 'text-graphite-500 hover:bg-graphite-50 dark:hover:bg-graphite-800/50'}`}\r\n                  >\r\n                    {item.title || 'Untitled'}\r\n                  </button>\r\n                  <button\r\n                    onClick={(e) => { e.stopPropagation(); handleDeleteItem(item.id); }}\r\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 opacity-0 group-hover:opacity-100 text-graphite-400 hover:text-red-500 transition-all\"\r\n                  >\r\n                    <Trash2 size={14} />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n              {filteredItems.length === 0 && <div className=\"p-4 text-center text-graphite-400 text-xs italic\">No entries yet</div>}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Content Area */}\r\n        <div className=\"flex-1 flex flex-col bg-white dark:bg-graphite-900 relative\">\r\n          {isMantraBank ? (\r\n            <div className=\"flex-1 flex flex-col p-8 overflow-hidden\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-graphite-900 dark:text-white\">Mantra Bank</h2>\r\n                  <div className=\"flex items-center gap-2 mt-1 min-h-[16px]\">\r\n                    {saveStatus === 'saving' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-pacific-500 animate-pulse uppercase tracking-wider\"><Save size={10} /> Saving...</span>}\r\n                    {saveStatus === 'saved' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-bali-500 uppercase tracking-wider\"><Check size={10} /> Saved</span>}\r\n                    {saveStatus === 'error' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-red-500 uppercase tracking-wider\"><X size={10} /> Error Saving</span>}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <div className=\"relative\">\r\n                    <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-graphite-400\" />\r\n                    <input\r\n                      value={mantraSearch}\r\n                      onChange={e => setMantraSearch(e.target.value)}\r\n                      placeholder=\"Search mantras...\"\r\n                      className=\"bg-graphite-100 dark:bg-graphite-800 border-none rounded-lg pl-10 pr-4 py-2 text-sm focus:ring-1 focus:ring-pacific-500 w-64\"\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setMantraSort(s => s === 'desc' ? 'asc' : 'desc')}\r\n                    className=\"flex items-center gap-2 px-3 py-2 bg-graphite-100 dark:bg-graphite-800 rounded-lg text-graphite-500 hover:text-graphite-900 dark:hover:text-white transition-colors text-xs font-bold uppercase tracking-wide\"\r\n                  >\r\n                    <ArrowUpDown size={14} />\r\n                    {mantraSort === 'desc' ? 'Newest' : 'Oldest'}\r\n                  </button>\r\n                  <button onClick={handleCreateNew} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white text-sm font-bold rounded-lg hover:bg-pacific-500 shadow-lg shadow-pacific-600/20 active:scale-95 transition-all\"><Plus size={18} /> New Mantra</button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-1 overflow-y-auto pr-2 space-y-4\">\r\n                {filteredItems.map(mantra => {\r\n                  const isModified = modifiedMantras[mantra.id] !== undefined && modifiedMantras[mantra.id] !== mantra.content;\r\n                  const currentContent = modifiedMantras[mantra.id] ?? mantra.content;\r\n\r\n                  return (\r\n                    <div key={mantra.id} className=\"group relative px-6 py-4 rounded-2xl bg-transparent border-b border-graphite-100 dark:border-graphite-800 transition-all flex flex-col justify-center\">\r\n                      <div className=\"flex gap-4 items-start w-full\">\r\n                        {/* Text Area - Horizontal Flow */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <textarea\r\n                            value={currentContent}\r\n                            onChange={(e) => setModifiedMantras(prev => ({ ...prev, [mantra.id]: e.target.value }))}\r\n                            className=\"w-full bg-transparent text-lg font-medium text-graphite-600 dark:text-graphite-300 focus:text-graphite-900 dark:focus:text-white placeholder-graphite-300 border-none focus:ring-0 focus:outline-none focus:shadow-none outline-none ring-0 border-0 resize-none p-0 leading-relaxed h-auto overflow-hidden field-sizing-content\"\r\n                            placeholder=\"Write your mantra...\"\r\n                            spellCheck=\"false\"\r\n                            rows={1}\r\n                            style={{ fieldSizing: \"content\", outline: 'none', boxShadow: 'none' } as any} // Modern CSS to auto-grow\r\n                            onInput={(e) => {\r\n                              const target = e.target as HTMLTextAreaElement;\r\n                              target.style.height = \"auto\";\r\n                              target.style.height = `${target.scrollHeight}px`;\r\n                            }}\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Actions & Metadata - Stays on right or fades in */}\r\n                        <div className=\"flex items-center gap-4 shrink-0 self-center\">\r\n                          <span className=\"text-[10px] text-graphite-300 font-mono uppercase tracking-widest opacity-60\">\r\n                            {mantra.created_at ? new Date(mantra.created_at).toLocaleDateString() : new Date().toLocaleDateString()}\r\n                          </span>\r\n\r\n                          <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-x-2 group-hover:translate-x-0\">\r\n                            {isModified && (\r\n                              <button\r\n                                onClick={() => handleSaveMantra(mantra, currentContent)}\r\n                                className=\"p-2 text-pacific-500 hover:bg-pacific-50 dark:hover:bg-pacific-900/20 rounded-lg transition-transform hover:scale-105 active:scale-95\"\r\n                                title=\"Save Changes\"\r\n                              >\r\n                                <Save size={16} />\r\n                              </button>\r\n                            )}\r\n                            <button\r\n                              onClick={() => handleDeleteItem(mantra.id)}\r\n                              className=\"p-2 text-graphite-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\r\n                              title=\"Delete Mantra\"\r\n                            >\r\n                              <Trash2 size={16} />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n                {filteredItems.length === 0 && !loading && (\r\n                  <div className=\"h-64 flex flex-col items-center justify-center text-graphite-500 space-y-4\">\r\n                    <Brain size={48} className=\"text-graphite-800 opacity-20\" />\r\n                    <p className=\"italic text-sm\">Your mantra bank is empty. Add something to anchor your focus.</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : selectedItem ? (\r\n            <>\r\n              {/* Header / Title Area */}\r\n              <div className=\"p-6 border-b border-graphite-100 dark:border-graphite-800 flex justify-between items-center bg-white dark:bg-graphite-900/50 backdrop-blur-md sticky top-0 z-10 transition-all duration-300\">\r\n                <div className=\"flex-1 mr-4\">\r\n                  <input\r\n                    value={editorTitle}\r\n                    onChange={e => setEditorTitle(e.target.value)}\r\n                    onBlur={() => handleSave(false)}\r\n                    className=\"bg-transparent text-2xl font-bold text-graphite-900 dark:text-white focus:outline-none placeholder-graphite-400 w-full\"\r\n                    placeholder=\"Entry Title...\"\r\n                    disabled={false}\r\n                  />\r\n                  <div className=\"flex items-center gap-3 mt-1 min-h-[16px]\">\r\n                    {saveStatus === 'saving' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-pacific-500 animate-pulse uppercase tracking-wider\"><Save size={10} /> Saving Changes...</span>}\r\n                    {saveStatus === 'saved' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-bali-500 uppercase tracking-wider\"><Check size={10} /> All Changes Saved</span>}\r\n                    {saveStatus === 'error' && <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-red-500 uppercase tracking-wider\"><X size={10} /> Connection Error</span>}\r\n\r\n                    {saveStatus === 'idle' && hasUnsavedChanges && (\r\n                      <span className=\"flex items-center gap-1.5 text-[10px] font-bold text-orange-500 uppercase tracking-wider animate-pulse\">\r\n                        <span className=\"h-2 w-2 rounded-full bg-orange-500\"></span> Unsaved Changes\r\n                      </span>\r\n                    )}\r\n\r\n                    {saveStatus === 'idle' && !hasUnsavedChanges && isSingleton && <span className=\"text-[10px] font-bold text-graphite-400 uppercase tracking-wider\">Synced</span>}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                  {/* View/Edit Toggle for All EXCEPT LIFE CHECKLIST */}\r\n                  {!isLifeChecklist && (\r\n                    <div className=\"flex bg-graphite-100 dark:bg-graphite-800 rounded-lg p-1 mr-2\">\r\n                      <button\r\n                        onClick={() => setViewMode('view')}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${viewMode === 'view' ? 'bg-white dark:bg-graphite-700 shadow-sm text-graphite-900 dark:text-white' : 'text-graphite-500 hover:text-graphite-700'}`}\r\n                      >\r\n                        <Eye size={14} className=\"inline mr-1.5 mb-0.5\" /> Read\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setViewMode('edit')}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${viewMode === 'edit' ? 'bg-white dark:bg-graphite-700 shadow-sm text-graphite-900 dark:text-white' : 'text-graphite-500 hover:text-graphite-700'}`}\r\n                      >\r\n                        <Edit3 size={14} className=\"inline mr-1.5 mb-0.5\" /> Write\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {!isSingleton && <button onClick={() => handleDeleteItem(selectedItem.id)} className=\"p-2 text-graphite-400 hover:text-red-500 transition-colors bg-graphite-100 dark:bg-graphite-800 rounded-lg\" title=\"Delete Entry\"><Trash2 size={16} /></button>}\r\n\r\n                  {/* Manual Save button for non-checklist */}\r\n                  {!isLifeChecklist && viewMode === 'edit' && (\r\n                    <button onClick={() => handleSave(false)} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white text-xs font-bold rounded-lg hover:bg-pacific-500 shadow-lg shadow-pacific-600/20 active:scale-95 transition-all\">\r\n                      <Save size={16} /> Save\r\n                    </button>\r\n                  )}\r\n                  {/* Manual Save button for Life Checklist (optional, but good for title saves etc if not auto handled nicely by blur, but we use blur for title) */}\r\n                  {isLifeChecklist && (\r\n                    <button onClick={() => handleSave(false)} className=\"flex items-center gap-2 px-4 py-2 bg-pacific-600 text-white text-xs font-bold rounded-lg hover:bg-pacific-500 shadow-lg shadow-pacific-600/20 active:scale-95 transition-all\">\r\n                      <Save size={16} /> Save\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-1 p-8 overflow-y-auto\">\r\n                {isLifeChecklist ? (\r\n                  /* LIFE CHECKLIST CUSTOM UI */\r\n                  <div className=\"space-y-1 max-w-3xl\">\r\n                    {editorContent.split('\\n').filter(line => line.trim() !== '').map((line, idx) => {\r\n                      const isTask = line.trim().startsWith('- [');\r\n                      if (!isTask) return null;\r\n                      const isDone = line.includes('[x]');\r\n                      const text = line.replace(/- \\[(x| )\\] /, '');\r\n                      return (\r\n                        <div key={idx} className=\"flex items-center gap-3 group py-2 px-3 rounded-lg hover:bg-graphite-50 dark:hover:bg-graphite-800/50 transition-colors\">\r\n                          <button onClick={() => handleToggleTodo(idx)} className={`flex-shrink-0 transition-colors ${isDone ? 'text-bali-500' : 'text-graphite-300 hover:text-graphite-500'}`}>\r\n                            {isDone ? <CheckSquare size={20} /> : <Square size={20} />}\r\n                          </button>\r\n                          <input\r\n                            value={text}\r\n                            onChange={(e) => handleUpdateTodoText(idx, e.target.value)}\r\n                            onBlur={() => handleSave(false)}\r\n                            className={`flex-1 bg-transparent text-base focus:outline-none ${isDone ? 'text-graphite-400 line-through decoration-graphite-300' : 'text-graphite-700 dark:text-graphite-200'}`}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleDeleteTodo(idx)}\r\n                            className=\"opacity-0 group-hover:opacity-100 text-graphite-400 hover:text-red-500 transition-all p-1\"\r\n                          >\r\n                            <X size={16} />\r\n                          </button>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                    <div className=\"flex items-center gap-3 pt-4 mt-2 border-t border-graphite-100 dark:border-graphite-800 px-3\">\r\n                      <button onClick={handleAddTodo} className=\"text-graphite-400 hover:text-pacific-500 transition-colors\">\r\n                        <Plus size={20} />\r\n                      </button>\r\n                      <input\r\n                        value={newTodo}\r\n                        onChange={e => setNewTodo(e.target.value)}\r\n                        onKeyDown={e => e.key === 'Enter' && handleAddTodo()}\r\n                        placeholder=\"Add new item\"\r\n                        className=\"flex-1 bg-transparent text-base text-graphite-900 dark:text-white focus:outline-none placeholder-graphite-400\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  /* STANDARD MARKDOWN / TEXTAREA UI */\r\n                  viewMode === 'view' ? (\r\n                    <div className=\"prose prose-sm md:prose-base dark:prose-invert max-w-4xl mx-auto\">\r\n                      <ReactMarkdown\r\n                        remarkPlugins={[remarkGfm]}\r\n                        components={{\r\n                          input: ({ node, ...props }) => (\r\n                            <input {...props} type=\"checkbox\" className=\"w-4 h-4 rounded-sm border-2 border-pacific-500 text-pacific-600 focus:ring-offset-0 focus:ring-0 mr-2 cursor-pointer disabled:cursor-not-allowed disabled:opacity-70 accent-pacific-500/80 bg-transparent\" />\r\n                          )\r\n                        }}\r\n                      >\r\n                        {editorContent}\r\n                      </ReactMarkdown>\r\n                    </div>\r\n                  ) : (\r\n                    <textarea\r\n                      value={editorContent}\r\n                      onChange={e => setEditorContent(e.target.value)}\r\n                      className=\"w-full h-full bg-transparent text-graphite-700 dark:text-graphite-300 font-mono text-base resize-none focus:outline-none leading-relaxed p-4\"\r\n                      placeholder=\"# Start writing some markdown...\"\r\n                    />\r\n                  )\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-graphite-400 space-y-4\">\r\n              <Library size={48} className=\"opacity-10\" />\r\n              <p className=\"text-sm font-medium\">Select an entry or create a new one to begin.</p>\r\n              {!isSingleton && <button onClick={handleCreateNew} className=\"text-pacific-500 font-bold flex items-center gap-2 hover:underline\"><Plus size={16} /> Create Fresh Entry</button>}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Archives;\r\n"],"names":[],"mappings":"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"}}]
}